
# Full disclosure: This is supplied as is. Its a strait copy paste from Raw Configuration Editor in my dashboard
# It will most certainly not work right out of the box for you.
# You will have to edit entities, devices, create helpers and install custom cards from HACS
# This code is supplied because of demand, I dont have the skills or capacity to make it a plug and play product
# that works for everyones setup.

# I recommend creating a new empty dashboard. Then go into Edit and Raw Configuration Editor.
# Paste the code and see what happens.
# You might first need to install some custom cards from HACS.
# Then you will probably encounter missing entities. There isnt really a easy fix for this, the best way will be to go through
# one by one and change missing entities into your own or dummy entities.

# Good luck, thanks for the support. I will try my best to help in the YouTube comments.

kiosk_mode:
  mobile_settings:
    hide_header: true
    ignore_entity_settings: true
  non_admin_settings:
    hide_header: true
    hide_menubutton: true
    ignore_entity_settings: true
  entity_settings:
    - entity:
        input_boolean.kiosk_mode: 'on'
      hide_header: true
    - entity:
        input_boolean.kiosk_mode: 'off'
      hide_header: false
decluttering_templates:
  light_slider:
    card:
      type: vertical-stack
      cards:
        - type: custom:button-card
          entity: '[[entity]]'
          name: '[[name]]'
          icon: '[[icon]]'
          tap_action:
            action: none
          styles:
            grid:
              - grid-template-columns: 64px 1fr
              - grid-template-areas: '"i n"'
            icon:
              - width: 22px
              - color: var(--gray100)
            img_cell:
              - width: 22px
              - height: 22px
            card:
              - background: none
              - height: 75px
              - padding: 0
              - z-index: 1
              - position: absolute
              - border-radius: 30px
            name:
              - justify-self: start
              - font-size: 16px
              - font-weight: 400
              - color: var(--gray100)
        - type: custom:my-slider-v2
          entity: '[[entity]]'
          allowTapping: false
          allowSliding: true
          disableScroll: false
          marginOfError: 50
          styles:
            container:
              - border-radius: 30px
            card:
              - height: 75px
              - border-radius: 30px
            progress:
              - background: var(--yellow)
            thumb:
              - width: 5px
              - height: 30%
              - top: 36%
              - margin-right: '-6px'
              - border-radius: 5px
              - background: var(--gray1000)
              - z-index: 2
            track:
              - background: var(--yellow-tint)
  light_toggle:
    card:
      type: custom:button-card
      entity: '[[entity]]'
      name: '[[name]]'
      icon: '[[icon]]'
      show_label: false
      tap_action:
        action: toggle
      state:
        - value: 'on'
          styles:
            card:
              - background: var(--yellow)
        - value: 'off'
          styles:
            card:
              - background: var(--yellow-tint)
            name:
              - color: var(--gray100)
            icon:
              - color: var(--gray100)
        - value: unavailable
          styles:
            card:
              - background: var(--yellow-tint)
            name:
              - color: var(--gray100)
            icon:
              - color: var(--gray100)
      styles:
        grid:
          - grid-template-columns: 64px 1fr
          - grid-template-areas: '"i n"'
        icon:
          - width: 22px
          - color: var(--gray100)
        img_cell:
          - width: 22px
          - height: 22px
        card:
          - padding: 0
          - height: 75px
          - border-radius: 30px
        name:
          - justify-self: start
          - font-size: 16px
          - font-weight: 400
          - color: var(--gray100)
button_card_templates:
  universal_sensor:
    variables:
      entity: null
      size: big
      icon: mdi:alert
      show_tap_indicator: false
      main_text: null
      sub_text: null
      alt_text: null
      symbol: null
      show_bar: false
      bar_value: null
      bar_color: null
      bar_invert_colors: false
      background_color: var(--gray200)
      text_color: var(--gray1000)
      margin: 0
      enable_off_state_styling: false
      off_state_value: 'off'
      off_state_main_text: 'Off'
      off_state_background_color: null
      off_state_text_color: null
      badge_condition: null
      badge_text: '!'
      badge_color: var(--error-color)
      show_timer: false
    tap_action:
      action: none
    name: |
      [[[
        if (variables.sub_text !== null) {
          return variables.sub_text;
        }
        if (entity) {
          return entity.attributes.friendly_name;
        }
        return 'Sensor';
      ]]]
    label: |
      [[[
        let baseText;

        if (variables.main_text !== null) {
          baseText = variables.main_text;
        } else if (variables.show_bar) {
          baseText = variables.bar_value !== null ? variables.bar_value : (entity ? entity.state : 0);
        } else if (entity) {
          baseText = entity.state;
        } else {
          baseText = 'Value';
        }

        if (variables.symbol !== null) {
          if (variables.size === 'small') {
            return String(baseText) + '' + variables.symbol;
          } else {
            return String(baseText) + '<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">' + variables.symbol + '</span>';
          }
        }
        
        return baseText;
      ]]]
    icon: '[[[ return variables.icon ]]]'
    show_label: true
    show_icon: true
    show_state: |
      [[[ 
        const is_off = variables.enable_off_state_styling && entity && entity.state === variables.off_state_value;
        return variables.show_timer && !is_off; 
      ]]]
    state:
      - operator: template
        value: |
          [[[
            return variables.enable_off_state_styling && entity && entity.state === variables.off_state_value;
          ]]]
        label: '[[[ return variables.off_state_main_text ]]]'
        styles:
          label:
            - color: '[[[ return variables.off_state_text_color ]]]'
            - padding-bottom: '[[[ return variables.show_bar  ? "10px" : "0" ]]]'
          state:
            - color: '[[[ return variables.off_state_text_color ]]]'
            - padding-bottom: '[[[ return variables.show_bar  ? "10px" : "0" ]]]'
          name:
            - color: '[[[ return variables.off_state_text_color ]]]'
          icon:
            - color: '[[[ return variables.off_state_text_color ]]]'
          card:
            - background: >-
                [[[ return variables.off_state_background_color ||
                variables.background_color ]]]
            - height: >-
                [[[ return variables.size === "small" ? "65px" :
                (variables.show_bar ? "160px" : "160px") ]]]
          img_cell:
            - width: 58px
            - height: 58px
            - padding: null
          custom_fields:
            bar:
              - display: none
            state:
              - display: none
      - operator: template
        value: '[[[ return variables.badge_condition ]]]'
        styles:
          custom_fields:
            badge:
              - display: block
    custom_fields:
      badge: '[[[ return variables.badge_text ]]]'
      state: '[[[ return variables.alt_text ]]]'
      tap: |
        [[[ 
          if (variables.show_tap_indicator) {
            return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
          }
          return '';
        ]]]
      bar: |
        [[[
          if (!variables.show_bar || variables.size === 'small') return '';

          const state = variables.bar_value !== null ? variables.bar_value : (entity ? entity.state : 0);

          var color;
          if (variables.bar_color === 'white') {
            color = 'var(--gray1000)';
          } else if (variables.bar_color) {
            color = variables.bar_color;
          } else {
            const colors = ["var(--red)","var(--orange)","var(--yellow)","var(--blue)","var(--green)"];
            const thresholds = [70, 50, 30, 20, 0];
            var index = thresholds.findIndex(threshold => state >= threshold);
            if (variables.bar_invert_colors) {
                index = 4 - index;
            }
            color = colors[index];
          }      
          return `<div><div style="background:${color}; height:30px;width:${state}%;"></div></div>`;
        ]]]
    styles:
      card:
        - padding: >-
            [[[ return variables.size === "small" ? "0" : (variables.show_bar ?
            "0" : "0 0 12px 20px") ]]]
        - height: >-
            [[[ return variables.size === "small" ? "65px" : (variables.show_bar
            ? "160px" : "160px") ]]]
        - background: '[[[ return variables.background_color ]]]'
        - margin-top: '[[[ return variables.margin ]]]'
        - overflow: visible
      grid:
        - grid-template-areas: |
            [[[
              const is_off = variables.enable_off_state_styling && entity && entity.state === variables.off_state_value;
              const showing_timer = variables.show_timer && !is_off;
              
              const main = showing_timer ? 's' : 'l';

              if (variables.size === 'small') {
                return `"i ${main}" "i n"`;
              }
              if (variables.show_bar) {
                return `"n i" "${main} state" "bar bar"`;
              }
              return variables.alt_text ? `"n i" "${main} state"` : `"n i" "${main} ${main}"`;
            ]]]
        - grid-template-columns: '[[[ return variables.size === "small" ? "76px 1fr" : null ]]]'
        - grid-template-rows: >-
            [[[ return variables.size === "small" ? "1fr 1fr" :
            (variables.show_bar ? "min-content 1fr min-content" : "min-content
            1fr") ]]]
      img_cell:
        - justify-self: '[[[ return variables.size === "small" ? "start" : "end" ]]]'
        - align-self: start
        - background: |-
            [[[ 
              const shouldBeDim = !variables.enable_off_state_styling || (entity && entity.state === variables.off_state_value);
              return shouldBeDim 
                ? "rgba(250, 251, 252, 0.1)" 
                : "rgba(250, 251, 252, 0.3)";
            ]]]
        - margin: 4px 4px
        - border-radius: 50%
        - width: 58px
        - height: 58px
        - padding: 0
      icon:
        - width: 30px
        - height: 30px
        - color: '[[[ return variables.text_color ]]]'
      state:
        - display: |
            [[[ 
              const is_off = variables.enable_off_state_styling && entity && entity.state === variables.off_state_value;
              const showing_timer = variables.show_timer && !is_off;
              return showing_timer ? "block" : "none"; 
            ]]]
        - justify-self: start
        - align-self: end
        - font-size: '[[[ return variables.size === "small" ? "16px" : "2em" ]]]'
        - font-weight: '[[[ return variables.size === "small" ? "500" : "300" ]]]'
        - color: '[[[ return variables.text_color ]]]'
        - line-height: 1.5em
        - padding-left: >-
            [[[ return variables.size === "big" && variables.show_bar ? "20px" :
            "0" ]]]
      label:
        - display: |
            [[[ 
              const is_off = variables.enable_off_state_styling && entity && entity.state === variables.off_state_value;
              const showing_timer = variables.show_timer && !is_off;
              return showing_timer ? "none" : "block";
            ]]]
        - justify-self: start
        - align-self: end
        - font-size: '[[[ return variables.size === "small" ? "16px" : "2em" ]]]'
        - font-weight: '[[[ return variables.size === "small" ? "500" : "300" ]]]'
        - color: '[[[ return variables.text_color ]]]'
        - line-height: 1.5em
        - padding-left: >-
            [[[ return variables.size === "big" && variables.show_bar ? "20px" :
            "0" ]]]
      name:
        - justify-self: start
        - align-self: '[[[ return variables.size === "small" ? "start" : "center" ]]]'
        - text-align: left
        - font-size: 14px
        - color: '[[[ return variables.text_color ]]]'
        - opacity: '0.7'
        - padding-left: >-
            [[[ return variables.size === "big" && variables.show_bar ? "20px" :
            "0" ]]]
      custom_fields:
        badge:
          - position: absolute
          - padding: 2px
          - right: 0px
          - top: '-1px'
          - background: '[[[ return variables.badge_color ]]]'
          - width: 16px
          - height: 16px
          - border-radius: 50%
          - display: '[[[ return variables.badge_condition ? "block" : "none" ]]]'
          - line-height: 14px
          - font-weight: 900
          - font-size: 14px
          - color: var(--white)
        tap:
          - overflow: visible
          - opacity: 0.2
        state:
          - display: >-
              [[[ return variables.size === "big" && variables.alt_text ?
              "block" : "none" ]]]
          - justify-self: end
          - align-self: end
          - font-size: 14px
          - color: '[[[ return variables.text_color ]]]'
          - opacity: '0.7'
          - padding-right: 20px
          - padding-bottom: 9px
        bar:
          - display: >-
              [[[ return variables.size === "big" && variables.show_bar ?
              "block" : "none" ]]]
          - justify-self: start
          - width: calc(100% - 1px);
          - height: 30px
          - margin-top: 6px
          - border-bottom-left-radius: 34px
          - border-bottom-right-radius: 34px
          - background-image: |
              [[[     
                if (!variables.show_bar || variables.size === 'small') return 'none';

                const state = variables.bar_value !== null ? variables.bar_value : (entity ? entity.state : 0);

                var color;
                if (variables.bar_color === 'white') {
                  color = 'var(--gray1000)';
                } else if (variables.bar_color) {
                  color = variables.bar_color;
                } else {
                  const colors = ["var(--red)","var(--orange)","var(--yellow)","var(--blue)","var(--green)"];
                  const thresholds = [70, 50, 30, 20, 0];
                  var index = thresholds.findIndex(threshold => state >= threshold);
                  if (variables.bar_invert_colors) {
                      index = 4 - index;
                  }
                  color = colors[index];
                }
                return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
              ]]]
  sensor_battery:
    name: |
      [[[ return entity.attributes.device_name; ]]]
    label: |
      [[[ return (parseFloat(entity.state)).toFixed(0) + '%' ]]]
    show_icon: true
    show_label: true
    icon: mdi:battery
    styles:
      card:
        - padding: 0
        - height: 180px
        - background: var(--gray200)
      grid:
        - grid-template-areas: ' "n i" "l battery" "bar bar"'
        - grid-template-rows: min-content 1fr min-content
      label:
        - justify-self: start
        - align-self: end
        - font-size: 2em
        - font-weight: 350
        - padding-left: 20px
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - padding-left: 20px
        - opacity: '0.7'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - margin: 4px 4px
        - border-radius: 50%
        - width: 58px
        - height: 58px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray1000)
      custom_fields:
        bar:
          - justify-self: start
          - width: 100%
          - background-image: >
              [[[       var color; var state = entity.state;  if (state >= 80) {
                  color = "#9EDF9C";
              } else if (state >= 60) {
                  color = "#78B3CE";
              } else if (state >= 40) {
                  color = "#FBD288";
              } else if (state >= 20) {
                  color = "#FF9C73";
              } else {
                  color = "#F95454";
              } return `repeating-linear-gradient(45deg,transparent,transparent
              2px,${color} 3px,transparent 4px)` ]]]  
          - height: 30px
          - margin-top: 6px
        battery:
          - justify-self: start
          - align-self: end
          - font-size: 14px
          - color: var(--gray800)
          - padding-right: 20px
          - opacity: '0.7'
    custom_fields:
      battery: |
        [[[
          return entity.attributes.battery_quantity + " x " + entity.attributes.battery_type;
        ]]]
      bar: >
        [[[       var color; var state = entity.state;  if (state >= 80) {
            color = "#9EDF9C";
        } else if (state >= 60) {
            color = "#78B3CE";
        } else if (state >= 40) {
            color = "#FBD288";
        } else if (state >= 20) {
            color = "#FF9C73";
        } else {
            color = "#F95454";
        } return `<div> <div style="background:${color}; height:
        30px;width:${state}%; "></div></div>` ]]]
  template_sensor_big:
    variables:
      text_main: Main text
      text_sub: Sub text
      icon: mdi:alert
      entity: null
      background: var(--gray200)
      height: 160px
      margin: 12px
      action: none
    icon: '[[[ return variables.icon ]]]'
    label: '[[[ return variables.text_main ]]]'
    name: '[[[ return variables.text_sub ]]]'
    show_label: true
    custom_fields:
      tap: |
        [[[ 
          const action = variables.action || 'none';
          
          switch(action) {
            case 'tap':
              return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
            case 'none':
              return '';
            default:
              return '';
          }
        ]]]      
    styles:
      custom_fields:
        tap:
          - overflow: visible
          - opacity: 0.1
      card:
        - padding: 0 0 12px 20px
        - height: '[[[ return variables.height ]]]'
        - background: '[[[ return variables.background ]]]'
        - margin-top: '[[[ return variables.margin ]]]'
      grid:
        - grid-template-areas: '"n i" "l l"'
        - grid-template-rows: min-content 1fr min-content
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - margin: 4px 4px
        - border-radius: 50%
        - width: 58px
        - height: 58px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray1000)
      label:
        - justify-self: start
        - align-self: end
        - font-size: 2em
        - line-height: 1.5em
        - font-weight: 300
        - color: var(--gray1000)
      name:
        - justify-self: start
        - text-align: left;
        - font-size: 14px
        - color: var(--gray1000)
        - opacity: '0.7'
  template_sensor_big_alt:
    variables:
      text_main: Main text
      text_sub: Sub text
      text_alt: Alt text
      icon: mdi:alert
      entity: null
      background: var(--gray200)
      height: 160px
      margin: 12px
    icon: '[[[ return variables.icon ]]]'
    label: '[[[ return variables.text_main ]]]'
    name: '[[[ return variables.text_sub ]]]'
    show_label: true
    custom_fields:
      state: '[[[ return variables.text_alt ]]]'
    styles:
      card:
        - padding: 0 0 12px 20px
        - height: '[[[ return variables.height ]]]'
        - background: '[[[ return variables.background ]]]'
        - margin-top: '[[[ return variables.margin ]]]'
      grid:
        - grid-template-areas: '"n i" "l state"'
        - grid-template-rows: min-content 1fr
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - margin: 4px 4px
        - border-radius: 50%
        - width: 58px
        - height: 58px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray1000)
      label:
        - justify-self: start
        - align-self: end
        - font-size: 2em
        - line-height: 1.5em
        - font-weight: 300
        - color: var(--gray1000)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray1000)
        - opacity: '0.7'
        - text-align: left;
      custom_fields:
        state:
          - justify-self: end
          - align-self: end
          - font-size: 14px
          - color: var(--gray1000)
          - opacity: '0.7'
          - padding-right: 20px
          - padding-bottom: 9px
  template_sensor_small:
    variables:
      text_main: Main text
      text_sub: Sub text
      icon: mdi:alert
      entity: null
      background: var(--gray200)
      margin: 12px
      action: none
    icon: '[[[ return variables.icon ]]]'
    label: '[[[ return variables.text_main ]]]'
    name: '[[[ return variables.text_sub ]]]'
    show_label: true
    custom_fields:
      tap: |
        [[[ 
          const action = variables.action || 'none';
          
          switch(action) {
            case 'tap':
              return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
            case 'none':
              return '';
            default:
              return '';
          }
        ]]]  
    styles:
      custom_fields:
        tap:
          - overflow: visible
          - opacity: 0.1
      card:
        - padding: 0
        - background: '[[[ return variables.background ]]]'
        - margin-top: '[[[ return variables.margin ]]]'
      grid:
        - grid-template-areas: '"i l" "i n"'
        - grid-template-columns: 76px 1fr
        - grid-template-rows: 1fr 1fr
      img_cell:
        - justify-self: start
        - align-self: start
        - background: rgba(var(--highlight))
        - margin: 4px 4px
        - border-radius: 50%
        - width: 58px
        - height: 58px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray1000)
      label:
        - justify-self: start
        - align-self: end
        - font-size: 16px
        - font-weight: 500
        - color: var(--gray1000)
        - line-height: 1.4em
      name:
        - justify-self: start
        - align-self: start
        - font-size: 14px
        - color: var(--gray1000)
        - opacity: '0.7'
        - line-height: 1.4em
  template_trigger_card:
    variables:
      text_main: Main text
      icon: mdi:alert
      entity: null
      background: var(--gray200)
      color: var(--gray1000)
      margin: 0px
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.text_main ]]]'
    show_label: false
    styles:
      grid:
        - grid-template-areas: '"i" "n"'
      img_cell:
        - justify-self: start
        - align-self: start
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: '[[[ return variables.color ]]]'
      name:
        - justify-self: start
        - text-align: left
        - font-size: 16px
        - font-weight: 500
        - color: '[[[ return variables.color ]]]'
      card:
        - padding: 20px
        - background: '[[[ return variables.background ]]]'
        - height: 130px
        - margin-top: '[[[ return variables.margin ]]]'
  template_toggle_card:
    variables:
      main_text: null
      icon: null
      entity: null
      background: var(--gray200)
      state_off: Av
      state_on: P√•
      margin: 0px
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.main_text ]]]'
    tap_action:
      action: toggle
    state:
      - value: 'off'
        styles:
          card:
            - background: var(--red)
          img_cell:
            - background: rgba(0,0,0, 0.1)
          icon:
            - color: var(--black)
          name:
            - color: var(--black)
          custom_fields:
            state:
              - color: var(--black)
    styles:
      card:
        - padding: 4px 4px 12px 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
        - margin-top: '[[[ return variables.margin ]]]'
      grid:
        - grid-template-areas: '"n i" "state icon"'
        - grid-template-columns: 1fr min-content
        - grid-template-rows: min-content 1fr
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - border-radius: 50%
        - width: 58px
        - height: 58px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray1000)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray1000)
        - opacity: '0.7'
      custom_fields:
        icon:
          - justify-self: end
          - align-self: end
        state:
          - justify-self: start
          - align-self: end
          - font-size: 2em
          - line-height: 1.5em
          - font-weight: 300
          - color: var(--gray1000)
    custom_fields:
      icon: |
        [[[
         var state = entity.state;
         if(state == "on")
          return `<ha-icon
          icon="mdi:toggle-switch"
          style="color: var(--green); width:60px; height:60px;">
          </ha-icon>
          `;
         else 
          return `<ha-icon
          icon="mdi:toggle-switch-off"
          style="color: var(--black); width:60px; height:60px;">
          </ha-icon>
          `;
        ]]]
      state: |
        [[[
          var state = entity.state;
          var state_off = variables.state_off;
          var state_on = variables.state_on;
         if(state == "on")
          return `<span>${state_on}</san>
          `;
         else 
          return `<span>${state_off}</san>
          `;
        ]]] 
  template_toggle_card_small:
    variables:
      icon: null
      entity: input_boolean.automation_lys_ute
      background: var(--gray200)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: |
      [[[
        const fullName = entity.attributes.friendly_name;
        const separator = variables.separator || "-";  // Default to "-" if not specified
        const parts = fullName.split(separator);
        
        // Return only the first part (before the separator), trimmed of any whitespace
        return parts[0].trim();
      ]]]     
    label: |
      [[[
        const fullName = entity.attributes.friendly_name;
        const separator = variables.separator || "-";  // Default to "-" if not specified
        const parts = fullName.split(separator);
        
        // Return the second part (after the separator), trimmed of any whitespace
        if (parts.length > 1) {
          return parts.slice(1).join(separator).trim();
        }
        return '';
      ]]] 
    show_label: true
    tap_action:
      action: toggle
    state:
      - value: 'off'
        styles:
          card:
            - background: var(--red)
          img_cell:
            - background: rgba(0,0,0, 0.1)
          icon:
            - color: var(--black)
          name:
            - color: var(--black)
          label:
            - color: var(--black)
    styles:
      card:
        - height: 66px
        - border-radius: 75px
        - padding: 4px 20px 4px 4px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-columns: 76px 1fr min-content
        - grid-template-areas: '"i n icon" "i l icon"'
      icon:
        - width: 30px
        - color: var(--gray1000)
      img_cell:
        - justify-self: start
        - width: 30px
        - height: 30px
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
      label:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray1000)
        - opacity: 0.7
        - padding-bottom: 7px
      name:
        - justify-self: start
        - font-size: 16px
        - padding-top: 4px
        - font-weight: 500
        - color: var(--gray1000)
      custom_fields:
        icon: null
    custom_fields:
      icon: |
        [[[
         var state = entity.state;
         if(state == "on")
          return `<ha-icon
          icon="mdi:toggle-switch"
          style="color: var(--gray1000); width:50px; height:40px;">
          </ha-icon>
          `;
         else 
          return `<ha-icon
          icon="mdi:toggle-switch-off"
          style="color: var(--black); width:50px; height:40px;">
          </ha-icon>
          `;
        ]]] 
paper_buttons_row:
  presets:
    weather:
      styles:
        state:
          font-size: 28px
          font-weight: 300
          line-height: 10px
          margin-top: 15px
        icon:
          width: 40px
          height: 40px
          margin-top: '-30px'
          border-radius: 0
          padding: 0
        button:
          width: 80px
          height: 170px
          flex-shrink: 0
          background-color: var(--gray200)
          border-radius: 24px
          color: var(--gray1000)
        name:
          position: absolute
          top: 0px
          margin: 0
          height: 170px
          font-weight: 400
          font-size: 13px
          line-height: 1.25
          white-space: pre-line
          text-align: center
          width: 100%
          opacity: 0.7
    button:
      styles:
        state:
          position: absolute
          top: 8px
          width: 36px
          height: 3px
          padding: 0
          background: var(--gray1000)
          border-radius: 5px
          opacity: 0.1
        name:
          color: var(--gray1000)
        button:
          padding: 12px
          width: 76px
          height: 76px
          flex-basis: 1
          flex-shrink: 0
          display: flex
          background-color: var(--gray200)
          border-radius: 24px
          color: var(--white)
        icon:
          '--mdc-icon-size': 26px
          color: var(--gray1000)
          margin-top: 6px
views:
  - title: Home
    theme: My SmartHome Theme v3  
    type: custom:grid-layout
    sections: []
    layout:
      grid-template-columns: 100%
      grid-template-rows: auto
      grid-template-areas: |
        "header"
        "left"
        "right"
        "footer"  
      mediaquery:
        '(min-width: 1024px)':
          grid-template-columns: 50% 50%
          justify-content: center
          grid-template-areas: |
            "header ."
            "left right"
            "footer footer"     
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 2em
              line-height: 1em
              padding: 32px 6px 12px 6px
            card_style:
              background: none
            content: |
              Halloüëã{{user}}
            buttons:
              - id: hello
                template: Halloüëã
                style:
                  background: none
                  color: var(--gray1000)
                  padding: 0
                  cursor: context-menu
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      this.dispatchEvent(new Event('hass-toggle-menu', { bubbles: true, composed: true}));
                      return none;
                    ]]]  
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 6px 0 6px
            card_style:
              background: none
            content: >
              Ute er det {{button:temperature}}. Str√∏mmen koster
              {{button:strom}}

              og vi 

              [[ 
                {% if states('sensor.amsleser_po') | float(0) > 0 %}
                  eksporterer {% raw %}{{button:export}}{% endraw %}
                {% else %}
                  bruker {% raw %}{{button:import}}{% endraw %}
                {% endif %}
              ]]


              med {{button:lights}} p√•.

              Vi har {{button:events}} i dag.
            buttons:
              - id: temperature
                entity: sensor.dashboard_index
                attribute: weather
                unit: ¬∞
                icon: current.icon
                icon_position: end
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                  text-transform: lowercase
                tap_action:
                  action: navigate
                  navigation_path: '#weather'
              - id: strom
                entity: sensor.dashboard_index
                attribute: strom
                unit: ' kr'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: navigate
                  navigation_path: '?tab=priser#strom'
              - id: import
                entity: sensor.amsleser_p
                unit: W
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: navigate
                  navigation_path: '?tab=forbruk#strom'
              - id: export
                entity: sensor.amsleser_po
                unit: W
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: navigate
                  navigation_path: '#strom'
              - id: lights
                entity: sensor.lights_on
                suffix: lys
                icon: üí°
                style:
                  background: var(--gray1000)
                  padding-right: 2px
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: navigate
                  navigation_path: '#lys'
              - id: events
                entity: sensor.dashboard_index
                attribute: events
                icon: ‚è∞
                icon_position: start
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: navigate
                  navigation_path: '#hjemhendelser'
          - type: custom:gap-card
            height: 24
        view_layout:
          grid-area: header
      - type: vertical-stack
        cards:
          - type: custom:simple-tabs
            alignment: start
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            margin-bottom: '-100px'
            tabs:
              - title: Hjem
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:button-card
                              entity: lock.hallway_door_lock
                              template: universal_sensor
                              tap_action:
                                action: navigate
                                navigation_path: '#lock'
                              variables:
                                size: small
                                sub_text: Inngangsd√∏r
                                icon: mdi:key
                                main_text: Ul√•st
                                background_color: var(--active-big)
                                text_color: var(--gray100)
                                badge_condition: |
                                  [[[
                                    return states['sensor.hallway_door_lock_battery'].state < 15
                                  ]]]  
                                badge_text: '!'
                                enable_off_state_styling: true
                                off_state_value: locked
                                off_state_main_text: L√•st
                                off_state_background_color: var(--gray100)
                                off_state_text_color: var(--gray1000)
                            - type: custom:css-swipe-card
                              height: 355px
                              pagination: true
                              custom_css:
                                '--pagination-bullet-active-background-color': var(--gray400)
                                '--pagination-bullet-background-color': var(--gray200)
                                '--pagination-bullet-border': none
                                '--pagination-bullet-distance': 0px
                              cards:
                                - type: custom:button-card
                                  entity: sensor.calendar_upcoming_events
                                  show_icon: false
                                  show_name: false
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#hjemhendelser'
                                  state:
                                    - operator: template
                                      value: |
                                        [[[
                                          return new Date(entity.attributes.events[0].start).toDateString() === new Date().toDateString()
                                        ]]]
                                      styles:
                                        card:
                                          - background: var(--active-big)
                                        custom_fields:
                                          arrow:
                                            - border-top: 2px solid var(--black)
                                          day:
                                            - color: var(--black)
                                          time:
                                            - color: var(--black)
                                          date:
                                            - color: var(--black)
                                          event:
                                            - color: var(--black)
                                  styles:
                                    grid:
                                      - grid-template-areas: '"day" "date" "arrow" "time" "event"'
                                      - grid-template-columns: 1fr
                                      - grid-template-rows: >-
                                          min-content 1fr 1fr min-content
                                          min-content
                                    card:
                                      - padding: 20px
                                      - height: 322px
                                      - margin-top: 12px
                                    custom_fields:
                                      day:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: start
                                      time:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: end
                                        - font-size: 1em
                                        - font-weight: 500
                                        - padding: 12px 0 6px 0
                                      date:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: start
                                        - font-size: 2.6em
                                        - line-height: 1.2em
                                        - font-weight: 300
                                      event:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - text-align: left
                                        - width: calc(100% + 10px)
                                        - text-overflow: ellipsis
                                        - white-space: normal
                                  custom_fields:
                                    day: |
                                      [[[
                                        return helpers.formatDateWeekday(entity.attributes.events[0].start)
                                      ]]]
                                    date: |
                                      [[[
                                        const d = new Date(entity.attributes.events[0].start);
                                        return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                                      ]]]  
                                    time: >
                                      [[[  const start =
                                      entity.attributes.events[0].start; const
                                      end = entity.attributes.events[0].end;
                                      return start.includes('T') ?
                                      (helpers.formatTime24h(start) + ' ¬∑ ' +
                                      helpers.formatTime24h(end)) : 'Hele dagen'
                                      ]]]
                                    event: |
                                      [[[
                                        return entity.attributes.events[0].summary
                                      ]]]
                                - type: custom:button-card
                                  entity: sensor.calendar_upcoming_events
                                  show_icon: false
                                  show_name: false
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#hjemhendelser'
                                  state:
                                    - operator: template
                                      value: |
                                        [[[
                                          return new Date(entity.attributes.events[1].start).toDateString() === new Date().toDateString()
                                        ]]]
                                      styles:
                                        card:
                                          - background: var(--active-big)
                                        custom_fields:
                                          arrow:
                                            - border-top: 2px solid var(--black)
                                          day:
                                            - color: var(--black)
                                          time:
                                            - color: var(--black)
                                          date:
                                            - color: var(--black)
                                          event:
                                            - color: var(--black)
                                  styles:
                                    grid:
                                      - grid-template-areas: '"day" "date" "arrow" "time" "event"'
                                      - grid-template-columns: 1fr
                                      - grid-template-rows: >-
                                          min-content 1fr 1fr min-content
                                          min-content
                                    card:
                                      - padding: 20px
                                      - height: 322px
                                      - margin-top: 12px
                                    custom_fields:
                                      day:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: start
                                      time:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: end
                                        - font-size: 1em
                                        - font-weight: 500
                                        - padding: 12px 0 6px 0
                                      date:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: start
                                        - font-size: 2.6em
                                        - line-height: 1.2em
                                        - font-weight: 300
                                      event:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - text-align: left
                                        - width: calc(100% + 10px)
                                        - text-overflow: ellipsis
                                        - white-space: normal
                                  custom_fields:
                                    day: |
                                      [[[
                                        return helpers.formatDateWeekday(entity.attributes.events[1].start)
                                      ]]]
                                    date: |
                                      [[[
                                        const d = new Date(entity.attributes.events[1].start);
                                        return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                                      ]]] 
                                    time: >
                                      [[[  const start =
                                      entity.attributes.events[1].start; const
                                      end = entity.attributes.events[1].end;
                                      return start.includes('T') ?
                                      (helpers.formatTime24h(start) + ' ¬∑ ' +
                                      helpers.formatTime24h(end)) : 'Hele dagen'
                                      ]]]
                                    event: |
                                      [[[
                                        return entity.attributes.events[1].summary
                                      ]]]
                                - type: custom:button-card
                                  entity: sensor.calendar_upcoming_events
                                  show_icon: false
                                  show_name: false
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#hjemhendelser'
                                  state:
                                    - operator: template
                                      value: |
                                        [[[
                                          return new Date(entity.attributes.events[2].start).toDateString() === new Date().toDateString()
                                        ]]]
                                      styles:
                                        card:
                                          - background: var(--active-big)
                                        custom_fields:
                                          arrow:
                                            - border-top: 2px solid var(--black)
                                          day:
                                            - color: var(--black)
                                          time:
                                            - color: var(--black)
                                          date:
                                            - color: var(--black)
                                          event:
                                            - color: var(--black)
                                  styles:
                                    grid:
                                      - grid-template-areas: '"day" "date" "arrow" "time" "event"'
                                      - grid-template-columns: 1fr
                                      - grid-template-rows: >-
                                          min-content 1fr 1fr min-content
                                          min-content
                                    card:
                                      - padding: 20px
                                      - height: 322px
                                      - margin-top: 12px
                                    custom_fields:
                                      day:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: start
                                      time:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: end
                                        - font-size: 1em
                                        - font-weight: 500
                                        - padding: 12px 0 6px 0
                                      date:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - align-self: start
                                        - font-size: 2.6em
                                        - line-height: 1.2em
                                        - font-weight: 300
                                      event:
                                        - color: var(--gray1000)
                                        - justify-self: start
                                        - text-align: left
                                        - width: calc(100% + 10px)
                                        - text-overflow: ellipsis
                                        - white-space: normal
                                  custom_fields:
                                    day: |
                                      [[[
                                        return helpers.formatDateWeekday(entity.attributes.events[2].start)
                                      ]]]
                                    date: |
                                      [[[
                                        const d = new Date(entity.attributes.events[2].start);
                                        return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                                      ]]]   
                                    time: >
                                      [[[  const start =
                                      entity.attributes.events[2].start; const
                                      end = entity.attributes.events[2].end;
                                      return start.includes('T') ?
                                      (helpers.formatTime24h(start) + ' ¬∑ ' +
                                      helpers.formatTime24h(end)) : 'Hele dagen'
                                      ]]]
                                    event: |
                                      [[[
                                        return entity.attributes.events[2].summary
                                      ]]]
                        - type: vertical-stack
                          cards:
                            - type: custom:css-swipe-card
                              cardId: swipe_dashboard1
                              height: 264px
                              pagination: true
                              custom_css:
                                '--pagination-bullet-active-background-color': var(--gray400)
                                '--pagination-bullet-background-color': var(--gray200)
                                '--pagination-bullet-border': none
                                '--pagination-bullet-distance': 0px
                              cards:
                                - type: custom:button-card
                                  icon: mdi:sofa
                                  name: |
                                    [[[ return 'Stue<br>nede' ]]]
                                  entity: sensor.adax_stue_on
                                  triggers_update:
                                    - sensor.adax_stue_on
                                    - sensor.i_9psl_temperatur
                                    - sensor.i_9psl_luftfuktighet
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#stue_nede'
                                  state:
                                    - operator: template
                                      value: |
                                        [[[
                                          return states['binary_sensor.livingroom_door_balcony_contact'].state === 'on'
                                        ]]]   
                                      styles:
                                        custom_fields:
                                          error:
                                            - display: block
                                  custom_fields:
                                    error: |
                                      [[[ return '!' ]]]    
                                    temp: |
                                      [[[ 
                                        var temp = states['sensor.i_9psl_temperatur'].state;
                                        var hum = states['sensor.i_9psl_luftfuktighet'].state;
                                        return `
                                        ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                        `
                                      ]]]  
                                    btn1:
                                      card:
                                        type: custom:paper-buttons-row
                                        styles:
                                          display: flex
                                          flex-direction: column
                                          flex-wrap: wrap
                                        buttons:
                                          - icon: mdi:chevron-up
                                            ripple: none
                                            entity: sensor.adax_stue_on
                                            name: false
                                            tap_action:
                                              action: call-service
                                              service: input_number.increment
                                              target:
                                                entity_id:
                                                  - input_number.stue_nede_heater_target
                                              data:
                                                amount: 1
                                            styles:
                                              icon:
                                                color: var(--gray1000)
                                              button:
                                                background: var(--gray200)
                                                border-radius: 40px 40px 0 0
                                                width: 46px
                                                height: 30px
                                                z-index: 1
                                                border-width: 1px 1px 0 1px
                                                border-style: solid
                                                border-color: var(--gray400)
                                          - name: >-
                                              {{
                                              states('input_number.stue_nede_heater_target')
                                              | round(0) }}¬∞
                                            ripple: none
                                            entity: sensor.adax_stue_on
                                            icon: false
                                            styles:
                                              name:
                                                color: var(--gray1000)
                                              button:
                                                background: var(--gray200)
                                                border-radius: 0
                                                width: 46px
                                                height: 22px
                                                z-index: 1
                                                border-width: 0 1px 0 1px
                                                border-style: solid
                                                border-color: var(--gray400)
                                          - icon: mdi:chevron-down
                                            ripple: none
                                            entity: sensor.adax_stue_on
                                            name: false
                                            tap_action:
                                              action: call-service
                                              service: input_number.decrement
                                              target:
                                                entity_id:
                                                  - input_number.stue_nede_heater_target
                                              data:
                                                amount: 1
                                            styles:
                                              icon:
                                                color: var(--gray1000)
                                              button:
                                                background: var(--gray200)
                                                border-radius: 0 0 40px 40px
                                                width: 46px
                                                height: 30px
                                                z-index: 1
                                                border-width: 0 1px 1px 1px
                                                border-style: solid
                                                border-color: var(--gray400)
                                  styles:
                                    card:
                                      - padding: 4px
                                      - height: 246px
                                      - overflow: visible
                                    grid:
                                      - grid-template-areas: >-
                                          "n n i" ". . btn1" ". . btn1" "temp temp
                                          btn1"
                                      - grid-template-rows: 1fr min-content min-content min-content
                                      - grid-template-columns: 1fr min-content min-content
                                    icon:
                                      - width: 28px
                                      - color: var(--black)
                                    img_cell:
                                      - justify-self: end
                                      - background: var(--green)
                                      - border-radius: 100%
                                      - align-self: start
                                      - width: 60px
                                      - height: 60px
                                    name:
                                      - justify-self: start
                                      - align-self: start
                                      - text-align: left
                                      - font-size: 1em
                                      - font-weight: 500
                                      - color: '[[[ return variables.text ]]]'
                                      - padding: 14px
                                    custom_fields:
                                      error:
                                        - position: absolute
                                        - padding: 2px
                                        - right: 0px
                                        - top: '-2px'
                                        - background: var(--red)
                                        - width: 20px
                                        - height: 20px
                                        - border-radius: 50%
                                        - display: none
                                        - line-height: 20px
                                        - font-weight: 900
                                        - color: var(--white)
                                      btn1:
                                        - align-self: end
                                        - justify-self: end
                                      temp:
                                        - justify-self: start
                                        - font-size: 2.6em
                                        - line-height: 1em
                                        - font-weight: 300
                                        - color: '[[[ return variables.text ]]]'
                                        - padding: 0 0 14px 14px
                                - type: custom:button-card
                                  icon: mdi:silverware-fork-knife
                                  name: |
                                    [[[ return 'Kj√∏kken' ]]]
                                  triggers_update:
                                    - sensor.kitchen_sensor_temphum_humidity
                                    - sensor.kitchen_sensor_temphum_temperature
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#kjokken'
                                  custom_fields:
                                    temp: |
                                      [[[ 
                                        var temp = states['sensor.kitchen_sensor_temphum_temperature'].state;
                                        var hum = states['sensor.kitchen_sensor_temphum_humidity'].state;
                                        return `
                                        ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                        `
                                      ]]]  
                                  styles:
                                    card:
                                      - padding: 4px
                                      - height: 246px
                                      - overflow: visible
                                    grid:
                                      - grid-template-areas: >-
                                          "n n i" ". . btn_plus" ". . state" "temp
                                          temp btn_minus"
                                      - grid-template-rows: 1fr min-content min-content min-content
                                      - grid-template-columns: 1fr min-content min-content
                                    icon:
                                      - width: 28px
                                      - color: var(--black)
                                    img_cell:
                                      - justify-self: end
                                      - background: var(--blue)
                                      - border-radius: 100%
                                      - align-self: start
                                      - width: 60px
                                      - height: 60px
                                    name:
                                      - justify-self: start
                                      - align-self: start
                                      - text-align: left
                                      - font-size: 1em
                                      - font-weight: 500
                                      - color: '[[[ return variables.text ]]]'
                                      - padding: 14px
                                    custom_fields:
                                      temp:
                                        - justify-self: start
                                        - font-size: 2.6em
                                        - line-height: 1em
                                        - font-weight: 300
                                        - color: '[[[ return variables.text ]]]'
                                        - padding: 0 0 14px 14px
                                - type: custom:button-card
                                  icon: mdi:toy-brick-outline
                                  name: |
                                    [[[ return 'Stue<br>oppe' ]]]
                                  entity: switch.upstairs_plug_oven
                                  triggers_update:
                                    - switch.upstairs_plug_oven
                                    - sensor.meter_0e9a
                                    - sensor.meter_0e9a_luftfuktighet
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#stue_oppe'
                                  state:
                                    - operator: template
                                      value: |
                                        [[[
                                          return states['binary_sensor.upstairs_door_balcony_contact'].state === 'on'
                                        ]]]   
                                      styles:
                                        custom_fields:
                                          error:
                                            - display: block
                                  custom_fields:
                                    error: |
                                      [[[ return '!' ]]]    
                                    temp: |
                                      [[[ 
                                        var temp = states['sensor.meter_0e9a'].state;
                                        var hum = states['sensor.meter_0e9a_luftfuktighet'].state;
                                        return `
                                        ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                        `
                                      ]]]  
                                    btn1:
                                      card:
                                        type: custom:paper-buttons-row
                                        styles:
                                          display: flex
                                          flex-direction: column
                                          flex-wrap: wrap
                                        buttons:
                                          - icon: mdi:chevron-up
                                            ripple: none
                                            entity: switch.upstairs_plug_oven
                                            name: false
                                            tap_action:
                                              action: call-service
                                              service: input_number.increment
                                              target:
                                                entity_id:
                                                  - input_number.stue_oppe_heater_upper
                                              data:
                                                amount: 1
                                            styles:
                                              icon:
                                                color: var(--gray1000)
                                              button:
                                                background: var(--gray200)
                                                border-radius: 40px 40px 0 0
                                                width: 46px
                                                height: 30px
                                                z-index: 1
                                                border-width: 1px 1px 0 1px
                                                border-style: solid
                                                border-color: var(--gray400)
                                          - name: >-
                                              {{
                                              states('input_number.stue_oppe_heater_upper')
                                              | round(0) }}¬∞
                                            ripple: none
                                            icon: false
                                            styles:
                                              name:
                                                color: var(--gray1000)
                                              button:
                                                background: var(--gray200)
                                                border-radius: 0
                                                width: 46px
                                                height: 22px
                                                z-index: 1
                                                border-width: 0 1px 0 1px
                                                border-style: solid
                                                border-color: var(--gray400)
                                          - icon: mdi:chevron-down
                                            ripple: none
                                            entity: switch.upstairs_plug_oven
                                            name: false
                                            tap_action:
                                              action: call-service
                                              service: input_number.decrement
                                              target:
                                                entity_id:
                                                  - input_number.stue_oppe_heater_upper
                                              data:
                                                amount: 1
                                            styles:
                                              icon:
                                                color: var(--gray1000)
                                              button:
                                                background: var(--gray200)
                                                border-radius: 0 0 40px 40px
                                                width: 46px
                                                height: 30px
                                                z-index: 1
                                                border-width: 0 1px 1px 1px
                                                border-style: solid
                                                border-color: var(--gray400)
                                  styles:
                                    card:
                                      - padding: 4px
                                      - height: 246px
                                      - overflow: visible
                                    grid:
                                      - grid-template-areas: >-
                                          "n n i" ". . btn1" ". . btn1" "temp temp
                                          btn1"
                                      - grid-template-rows: 1fr min-content min-content min-content
                                      - grid-template-columns: 1fr min-content min-content
                                    icon:
                                      - width: 28px
                                      - color: var(--black)
                                    img_cell:
                                      - justify-self: end
                                      - background: var(--orange)
                                      - border-radius: 100%
                                      - align-self: start
                                      - width: 60px
                                      - height: 60px
                                    name:
                                      - justify-self: start
                                      - align-self: start
                                      - text-align: left
                                      - font-size: 1em
                                      - font-weight: 500
                                      - color: '[[[ return variables.text ]]]'
                                      - padding: 14px
                                    custom_fields:
                                      error:
                                        - position: absolute
                                        - padding: 2px
                                        - right: 0px
                                        - top: '-2px'
                                        - background: var(--red)
                                        - width: 20px
                                        - height: 20px
                                        - border-radius: 50%
                                        - display: none
                                        - line-height: 20px
                                        - font-weight: 900
                                        - color: var(--white)
                                      btn1:
                                        - align-self: end
                                        - justify-self: end
                                      temp:
                                        - justify-self: start
                                        - font-size: 2.6em
                                        - line-height: 1em
                                        - font-weight: 300
                                        - color: '[[[ return variables.text ]]]'
                                        - padding: 0 0 14px 14px
                                - type: custom:button-card
                                  icon: mdi:door
                                  name: |
                                    [[[ return 'Gang' ]]]
                                  triggers_update:
                                    - sensor.hallway_sensor_temphum_humidity
                                    - sensor.hallway_sensor_temphum_temperature
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#gang'
                                  custom_fields:
                                    temp: |
                                      [[[ 
                                        var temp = states['sensor.hallway_sensor_temphum_temperature'].state;
                                        var hum = states['sensor.hallway_sensor_temphum_humidity'].state;
                                        return `
                                        ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                        `
                                      ]]]  
                                  styles:
                                    card:
                                      - padding: 4px
                                      - height: 246px
                                      - overflow: visible
                                    grid:
                                      - grid-template-areas: >-
                                          "n n i" ". . btn_plus" ". . state" "temp
                                          temp btn_minus"
                                      - grid-template-rows: 1fr min-content min-content min-content
                                      - grid-template-columns: 1fr min-content min-content
                                    icon:
                                      - width: 28px
                                      - color: var(--black)
                                    img_cell:
                                      - justify-self: end
                                      - background: var(--yellow)
                                      - border-radius: 100%
                                      - align-self: start
                                      - width: 60px
                                      - height: 60px
                                    name:
                                      - justify-self: start
                                      - align-self: start
                                      - text-align: left
                                      - font-size: 1em
                                      - font-weight: 500
                                      - color: '[[[ return variables.text ]]]'
                                      - padding: 14px
                                    custom_fields:
                                      temp:
                                        - justify-self: start
                                        - font-size: 2.6em
                                        - line-height: 1em
                                        - font-weight: 300
                                        - color: '[[[ return variables.text ]]]'
                                        - padding: 0 0 14px 14px
                            - type: vertical-stack
                              cards:
                                - type: conditional
                                  conditions:
                                    - condition: state
                                      entity: sensor.dashboard_active_card
                                      state: oven
                                  card:
                                    type: custom:button-card
                                    template: universal_sensor
                                    entity: sensor.ovn_machine_state
                                    tap_action:
                                      action: navigate
                                      navigation_path: '#kjokken'
                                    variables:
                                      size: small
                                      margin: 12px
                                      sub_text: Komfyr
                                      icon: mdi:stove
                                      main_text: |
                                        [[[ 
                                          return (parseFloat(states['sensor.ovn_temperatur'].state)).toFixed(0)
                                          + '/' +
                                          (parseFloat(states['sensor.ovn_set_point'].state)).toFixed(0)
                                          + '¬∞'
                                        ]]]
                                      background_color: var(--active-big)
                                      text_color: var(--gray100)
                                      enable_off_state_styling: true
                                      off_state_value: ready
                                      off_state_main_text: Av
                                      off_state_background_color: var(--gray100)
                                      off_state_text_color: var(--gray1000)
                                - type: conditional
                                  conditions:
                                    - condition: state
                                      entity: sensor.dashboard_active_card
                                      state: vacuum
                                  card:
                                    type: custom:button-card
                                    template: universal_sensor
                                    entity: vacuum.rolf
                                    tap_action:
                                      action: navigate
                                      navigation_path: '#rolf'
                                    variables:
                                      size: small
                                      margin: 12px
                                      sub_text: Rolf
                                      icon: mdi:robot-vacuum
                                      main_text: Vasker
                                      background_color: var(--active-big)
                                      text_color: var(--gray100)
                                      enable_off_state_styling: true
                                      off_state_value: docked
                                      off_state_main_text: Hviler
                                      off_state_background_color: var(--gray100)
                                      off_state_text_color: var(--gray1000)
                                      badge_condition: |
                                        [[[
                                          return states['binary_sensor.rolf_water_shortage'].state === 'on'
                                        ]]]
                                      badge_text: '!'
                                - type: conditional
                                  conditions:
                                    - condition: state
                                      entity: sensor.dashboard_active_card
                                      state: dishwasher
                                  card:
                                    type: custom:button-card
                                    template: universal_sensor
                                    entity: sensor.oppvaskmaskin
                                    tap_action:
                                      action: navigate
                                      navigation_path: '#kjokken'
                                    variables:
                                      size: small
                                      margin: 12px
                                      sub_text: Oppvaskemaskin
                                      icon: mdi:dishwasher
                                      main_text: >-
                                        [[[ return entity.attributes.remain_time
                                        ]]]
                                      background_color: var(--active-big)
                                      text_color: var(--gray100)
                                      enable_off_state_styling: true
                                - type: conditional
                                  conditions:
                                    - condition: state
                                      entity: sensor.dashboard_active_card
                                      state: washing_machine
                                  card:
                                    type: custom:button-card
                                    template: universal_sensor
                                    entity: sensor.vaskemaskin
                                    tap_action:
                                      action: navigate
                                      navigation_path: '#bad_nede'
                                    variables:
                                      size: small
                                      margin: 12px
                                      sub_text: Vaskemaskin
                                      icon: mdi:washing-machine
                                      main_text: >-
                                        [[[ return entity.attributes.remain_time
                                        ]]]
                                      background_color: var(--active-big)
                                      text_color: var(--gray100)
                                      enable_off_state_styling: true
                                - type: conditional
                                  conditions:
                                    - condition: state
                                      entity: sensor.dashboard_active_card
                                      state: tv
                                  card:
                                    type: custom:button-card
                                    template: universal_sensor
                                    entity: media_player.tv_stue
                                    tap_action:
                                      action: navigate
                                      navigation_path: '?tab=tv#media'
                                    variables:
                                      size: small
                                      margin: 12px
                                      sub_text: TV
                                      icon: mdi:television-classic
                                      main_text: |
                                        [[[ 
                                          var source = entity.attributes.source;
                                          var shield = states['media_player.shield_androidtv'];
                                          
                                          // RENAME YOUR APPS HERE
                                          var appMap = {
                                            "no.nrk.tv": "NRK",
                                            "ar.tvplayer.tv": "TiviMate",
                                            "no.altibox.tv": "Altibox",
                                            "com.retroarch.aarch64": "RetroArch",
                                            "com.netflix.ninja": "Netflix"
                                          };

                                          if (source == 'TV/HDMI' && shield && shield.attributes.app_name) {
                                            var rawApp = shield.attributes.app_name;
                                            var cleanName = appMap[rawApp] || rawApp;
                                            return 'Ser p√• ' + cleanName;
                                          }
                                          
                                          return 'Ser p√• ' + source;
                                        ]]]  
                                      enable_off_state_styling: true
                                      background_color: var(--active-big)
                                      text_color: var(--gray100)
                            - type: custom:button-card
                              template: universal_sensor
                              trigger_update:
                                - sensor.todo_husarbeid
                                - sensor.todo_sma_oppgaver
                                - sensor.todo_oppgaver_count
                              tap_action:
                                action: navigate
                                navigation_path: '#todo'
                              variables:
                                size: small
                                margin: 12px
                                sub_text: |
                                  [[[ 
                                    return (states['sensor.todo_oppgaver_count'].attributes.store_oppgaver_completed + states['sensor.todo_oppgaver_count'].attributes.sma_oppgaver_completed) + ' ferdige'
                                  ]]]
                                icon: mdi:hammer-screwdriver
                                main_text: |
                                  [[[ 
                                    return (states['sensor.todo_oppgaver_count'].attributes.store_oppgaver_pending + states['sensor.todo_oppgaver_count'].attributes.sma_oppgaver_pending) + ' gj√∏rem√•l'
                                  ]]]
                                background_color: var(--gray100)
                                text_color: var(--gray1000)
                    - type: conditional
                      conditions:
                        - condition: screen
                          media_query: '(min-width: 0px) and (max-width: 767px)'
                      card:
                        type: custom:button-card
                        entity: sensor.neste_tomming_2
                        show_icon: false
                        state:
                          - operator: template
                            value: |
                              [[[
                                return states['sensor.neste_tomming_2'].state.split(',')[0] === "0"
                              ]]]
                            styles:
                              card:
                                - background: var(--active-big)
                              label:
                                - color: var(--black)
                              name:
                                - color: var(--black)
                              custom_fields:
                                type:
                                  - color: var(--black)
                        name: >
                          [[[ return
                          states['sensor.neste_tomming_2'].state.split(',')[0];
                          ]]]
                        label: |
                          [[[
                            const days = states['sensor.neste_tomming_2'].state.split(',')[0];
                            if (days === undefined || days === null || isNaN(days)) {
                              return 'Ukjent tid til s√∏ppelt√∏mming';
                            } else if (days === '0') {
                              return 'S√∏ppel t√∏mmes i dag';
                            } else if (days === '1') {
                              return 'Dag til neste s√∏ppelt√∏mming';
                            } else {
                              return 'Dager til neste s√∏ppelt√∏mming';
                            }
                          ]]]
                        show_label: true
                        custom_fields:
                          type: >
                            [[[ return
                            states['sensor.neste_tomming_2'].state.split(',')[1];
                            ]]]
                        tap_action:
                          action: navigate
                          navigation_path: '#soppel'
                        styles:
                          grid:
                            - grid-template-areas: '"n l" "n type";'
                            - grid-template-columns: 30% 1fr;
                            - grid-template-rows: 1fr 1fr;
                          name:
                            - color: var(--gray1000)
                            - font-size: 2.6em
                            - align-self: center
                            - font-weight: 300
                          card:
                            - border: none
                            - '--mdc-ripple-press-opacity': 0
                            - margin-top: 12px
                          label:
                            - justify-self: start
                            - align-self: end
                            - font-size: 18px
                            - font-weight: 500
                            - color: var(--gray1000)
                            - text-align: left;
                          custom_fields:
                            type:
                              - justify-self: start
                              - font-size: 14px
                              - line-height: 14px
                              - font-weight: 500
                              - color: var(--gray1000)
              - title: 1. etg
                card:
                  type: grid
                  columns: 2
                  square: false
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          icon: mdi:sofa
                          name: |
                            [[[ return 'Stue<br>nede' ]]]
                          entity: sensor.adax_stue_on
                          triggers_update:
                            - sensor.adax_stue_on
                            - sensor.i_9psl_temperatur
                            - sensor.i_9psl_luftfuktighet
                          tap_action:
                            action: navigate
                            navigation_path: '#stue_nede'
                          state:
                            - operator: template
                              value: |
                                [[[
                                  return states['binary_sensor.livingroom_door_balcony_contact'].state === 'on'
                                ]]]   
                              styles:
                                custom_fields:
                                  error:
                                    - display: block
                          custom_fields:
                            error: |
                              [[[ return '!' ]]]    
                            temp: |
                              [[[ 
                                var temp = states['sensor.i_9psl_temperatur'].state;
                                var hum = states['sensor.i_9psl_luftfuktighet'].state;
                                return `
                                ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                `
                              ]]]  
                            btn1:
                              card:
                                type: custom:paper-buttons-row
                                styles:
                                  display: flex
                                  flex-direction: column
                                  flex-wrap: wrap
                                buttons:
                                  - icon: mdi:chevron-up
                                    ripple: none
                                    entity: sensor.adax_stue_on
                                    name: false
                                    tap_action:
                                      action: call-service
                                      service: input_number.increment
                                      target:
                                        entity_id:
                                          - input_number.stue_nede_heater_target
                                      data:
                                        amount: 1
                                    styles:
                                      icon:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray200)
                                        border-radius: 40px 40px 0 0
                                        width: 46px
                                        height: 30px
                                        z-index: 1
                                        border-width: 1px 1px 0 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                                  - name: >-
                                      {{
                                      states('input_number.stue_nede_heater_target')
                                      | round(0) }}¬∞
                                    ripple: none
                                    entity: sensor.adax_stue_on
                                    icon: false
                                    styles:
                                      name:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray200)
                                        border-radius: 0
                                        width: 46px
                                        height: 22px
                                        z-index: 1
                                        border-width: 0 1px 0 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                                  - icon: mdi:chevron-down
                                    ripple: none
                                    entity: sensor.adax_stue_on
                                    name: false
                                    tap_action:
                                      action: call-service
                                      service: input_number.decrement
                                      target:
                                        entity_id:
                                          - input_number.stue_nede_heater_target
                                      data:
                                        amount: 1
                                    styles:
                                      icon:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray200)
                                        border-radius: 0 0 40px 40px
                                        width: 46px
                                        height: 30px
                                        z-index: 1
                                        border-width: 0 1px 1px 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                          styles:
                            card:
                              - padding: 4px
                              - height: 246px
                              - overflow: visible
                            grid:
                              - grid-template-areas: '"n n i" ". . btn1" ". . btn1" "temp temp btn1"'
                              - grid-template-rows: 1fr min-content min-content min-content
                              - grid-template-columns: 1fr min-content min-content
                            icon:
                              - width: 28px
                              - color: var(--black)
                            img_cell:
                              - justify-self: end
                              - background: var(--green)
                              - border-radius: 100%
                              - align-self: start
                              - width: 60px
                              - height: 60px
                            name:
                              - justify-self: start
                              - align-self: start
                              - text-align: left
                              - font-size: 1em
                              - font-weight: 500
                              - color: '[[[ return variables.text ]]]'
                              - padding: 14px
                            custom_fields:
                              error:
                                - position: absolute
                                - padding: 2px
                                - right: 0px
                                - top: '-2px'
                                - background: var(--red)
                                - width: 20px
                                - height: 20px
                                - border-radius: 50%
                                - display: none
                                - line-height: 20px
                                - font-weight: 900
                                - color: var(--white)
                              btn1:
                                - align-self: end
                                - justify-self: end
                              temp:
                                - justify-self: start
                                - font-size: 2.6em
                                - line-height: 1em
                                - font-weight: 300
                                - color: '[[[ return variables.text ]]]'
                                - padding: 0 0 14px 14px
                        - type: custom:button-card
                          icon: mdi:shower-head
                          label: Bad nede
                          trigger_update:
                            - sensor.bathroomdown_sensor_temphum_humidity
                            - sensor.bathroomdown_sensor_temphum_temperature
                          tap_action:
                            action: navigate
                            navigation_path: '#bad_nede'
                          name: >
                            [[[ return
                            states['sensor.bathroomdown_sensor_temphum_temperature'].state
                            + '¬∞ ¬∑ ' +
                            states['sensor.bathroomdown_sensor_temphum_humidity'].state
                            + '%' ]]]
                          show_label: true
                          styles:
                            card:
                              - padding: 0
                              - overflow: visible
                              - margin-top: 12px
                            grid:
                              - grid-template-areas: '"i l" "i n"'
                              - grid-template-columns: 76px 1fr
                              - grid-template-rows: 1fr 1fr
                            img_cell:
                              - justify-self: start
                              - align-self: start
                              - background: var(--blue-dark)
                              - margin: 4px 4px
                              - padding: 14px
                              - border-radius: 50%
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 30px
                              - height: 30px
                              - color: var(--black)
                            label:
                              - justify-self: start
                              - align-self: end
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                              - padding: 1px 0
                            name:
                              - justify-self: start
                              - align-self: start
                              - font-size: 14px
                              - color: var(--gray1000)
                              - opacity: '0.7'
                              - padding: 1px 0
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          icon: mdi:door
                          label: Gangen
                          trigger_update:
                            - sensor.hallway_sensor_temphum_temperature
                            - sensor.hallway_sensor_temphum_humidity
                          tap_action:
                            action: navigate
                            navigation_path: '#gang'
                          name: >
                            [[[ return
                            states['sensor.hallway_sensor_temphum_temperature'].state
                            + '¬∞ ¬∑ ' +
                            states['sensor.hallway_sensor_temphum_humidity'].state
                            + '%' ]]]
                          show_label: true
                          styles:
                            card:
                              - padding: 0
                              - overflow: visible
                            grid:
                              - grid-template-areas: '"i l" "i n"'
                              - grid-template-columns: 76px 1fr min-content
                              - grid-template-rows: 1fr 1fr
                            img_cell:
                              - justify-self: start
                              - align-self: start
                              - background: var(--yellow)
                              - margin: 4px 4px
                              - padding: 14px
                              - border-radius: 50%
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 30px
                              - height: 30px
                              - color: var(--black)
                            label:
                              - justify-self: start
                              - align-self: end
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                              - padding: 1px 0
                            name:
                              - justify-self: start
                              - align-self: start
                              - font-size: 14px
                              - color: var(--gray1000)
                              - opacity: '0.7'
                              - padding: 1px 0
                        - type: custom:button-card
                          icon: mdi:silverware-fork-knife
                          name: |
                            [[[ return 'Kj√∏kken' ]]]
                          triggers_update:
                            - sensor.kitchen_sensor_temphum_humidity
                            - sensor.kitchen_sensor_temphum_temperature
                          tap_action:
                            action: navigate
                            navigation_path: '#kjokken'
                          custom_fields:
                            temp: |
                              [[[ 
                                var temp = states['sensor.kitchen_sensor_temphum_temperature'].state;
                                var hum = states['sensor.kitchen_sensor_temphum_humidity'].state;
                                return `
                                ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                `
                              ]]]  
                          styles:
                            card:
                              - padding: 4px
                              - height: 246px
                              - overflow: visible
                              - margin-top: 12px
                            grid:
                              - grid-template-areas: >-
                                  "n n i" ". . btn_plus" ". . state" "temp temp
                                  btn_minus"
                              - grid-template-rows: 1fr min-content min-content min-content
                              - grid-template-columns: 1fr min-content min-content
                            icon:
                              - width: 28px
                              - color: var(--black)
                            img_cell:
                              - justify-self: end
                              - background: var(--blue)
                              - border-radius: 100%
                              - align-self: start
                              - width: 60px
                              - height: 60px
                            name:
                              - justify-self: start
                              - align-self: start
                              - text-align: left
                              - font-size: 1em
                              - font-weight: 500
                              - color: '[[[ return variables.text ]]]'
                              - padding: 14px
                            custom_fields:
                              temp:
                                - justify-self: start
                                - font-size: 2.6em
                                - line-height: 1em
                                - font-weight: 300
                                - color: '[[[ return variables.text ]]]'
                                - padding: 0 0 14px 14px
              - title: 2. etg
                card:
                  type: grid
                  columns: 2
                  square: false
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          icon: mdi:toy-brick-outline
                          name: |
                            [[[ return 'Stue<br>oppe' ]]]
                          entity: switch.upstairs_plug_oven
                          triggers_update:
                            - switch.upstairs_plug_oven
                            - sensor.meter_0e9a
                            - sensor.meter_0e9a_luftfuktighet
                          tap_action:
                            action: navigate
                            navigation_path: '#stue_oppe'
                          state:
                            - operator: template
                              value: |
                                [[[
                                  return states['binary_sensor.upstairs_door_balcony_contact'].state === 'on'
                                ]]]   
                              styles:
                                custom_fields:
                                  error:
                                    - display: block
                          custom_fields:
                            error: |
                              [[[ return '!' ]]]    
                            temp: |
                              [[[ 
                                var temp = states['sensor.meter_0e9a'].state;
                                var hum = states['sensor.meter_0e9a_luftfuktighet'].state;
                                return `
                                ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                `
                              ]]]  
                            btn1:
                              card:
                                type: custom:paper-buttons-row
                                styles:
                                  display: flex
                                  flex-direction: column
                                  flex-wrap: wrap
                                buttons:
                                  - icon: mdi:chevron-up
                                    ripple: none
                                    entity: switch.upstairs_plug_oven
                                    name: false
                                    tap_action:
                                      action: call-service
                                      service: input_number.increment
                                      target:
                                        entity_id:
                                          - input_number.stue_oppe_heater_upper
                                      data:
                                        amount: 1
                                    styles:
                                      icon:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray200)
                                        border-radius: 40px 40px 0 0
                                        width: 46px
                                        height: 30px
                                        z-index: 1
                                        border-width: 1px 1px 0 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                                  - name: >-
                                      {{
                                      states('input_number.stue_oppe_heater_upper')
                                      | round(0) }}¬∞
                                    ripple: none
                                    icon: false
                                    styles:
                                      name:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray200)
                                        border-radius: 0
                                        width: 46px
                                        height: 22px
                                        z-index: 1
                                        border-width: 0 1px 0 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                                  - icon: mdi:chevron-down
                                    ripple: none
                                    entity: switch.upstairs_plug_oven
                                    name: false
                                    tap_action:
                                      action: call-service
                                      service: input_number.decrement
                                      target:
                                        entity_id:
                                          - input_number.stue_oppe_heater_upper
                                      data:
                                        amount: 1
                                    styles:
                                      icon:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray200)
                                        border-radius: 0 0 40px 40px
                                        width: 46px
                                        height: 30px
                                        z-index: 1
                                        border-width: 0 1px 1px 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                          styles:
                            card:
                              - padding: 4px
                              - height: 324px
                              - overflow: visible
                            grid:
                              - grid-template-areas: '"n n i" ". . btn1" ". . btn1" "temp temp btn1"'
                              - grid-template-rows: 1fr min-content min-content min-content
                              - grid-template-columns: 1fr min-content min-content
                            icon:
                              - width: 28px
                              - color: var(--black)
                            img_cell:
                              - justify-self: end
                              - background: var(--orange)
                              - border-radius: 100%
                              - align-self: start
                              - width: 60px
                              - height: 60px
                            name:
                              - justify-self: start
                              - align-self: start
                              - text-align: left
                              - font-size: 1em
                              - font-weight: 500
                              - color: '[[[ return variables.text ]]]'
                              - padding: 14px
                            custom_fields:
                              error:
                                - position: absolute
                                - padding: 2px
                                - right: 0px
                                - top: '-2px'
                                - background: var(--red)
                                - width: 20px
                                - height: 20px
                                - border-radius: 50%
                                - display: none
                                - line-height: 20px
                                - font-weight: 900
                                - color: var(--white)
                              btn1:
                                - align-self: end
                                - justify-self: end
                              temp:
                                - justify-self: start
                                - font-size: 2.6em
                                - line-height: 1em
                                - font-weight: 300
                                - color: '[[[ return variables.text ]]]'
                                - padding: 0 0 14px 14px
                        - type: custom:button-card
                          icon: mdi:bed-empty
                          label: Anna
                          trigger_update:
                            - sensor.Anna_sensor_temphum_temperature
                            - sensor.Anna_sensor_temphum_humidity
                          tap_action:
                            action: navigate
                            navigation_path: '#Anna'
                          name: >
                            [[[ return
                            states['sensor.Anna_sensor_temphum_temperature'].state
                            + '¬∞ ¬∑ ' +
                            states['sensor.Anna_sensor_temphum_humidity'].state
                            + '%' ]]]
                          show_label: true
                          styles:
                            card:
                              - padding: 0
                              - overflow: visible
                              - margin-top: 12px
                            grid:
                              - grid-template-areas: '"i l" "i n"'
                              - grid-template-columns: 76px 1fr
                              - grid-template-rows: 1fr 1fr
                            img_cell:
                              - justify-self: start
                              - align-self: start
                              - background: var(--pink)
                              - margin: 4px 4px
                              - padding: 14px
                              - border-radius: 50%
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 30px
                              - height: 30px
                              - color: var(--black)
                            label:
                              - justify-self: start
                              - align-self: end
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                              - padding: 1px 0
                            name:
                              - justify-self: start
                              - align-self: start
                              - font-size: 14px
                              - color: var(--gray1000)
                              - opacity: '0.7'
                              - padding: 1px 0
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          icon: mdi:shower-head
                          label: Bad oppe
                          trigger_update:
                            - sensor.bathroomup_sensor_temphum_temperature
                            - sensor.bathroomup_sensor_temphum_humidity
                          tap_action:
                            action: navigate
                            navigation_path: '#bad_oppe'
                          name: >
                            [[[ return
                            states['sensor.bathroomup_sensor_temphum_temperature'].state
                            + '¬∞ ¬∑ ' +
                            states['sensor.bathroomup_sensor_temphum_humidity'].state
                            + '%' ]]]
                          show_label: true
                          styles:
                            card:
                              - padding: 0
                              - overflow: visible
                            grid:
                              - grid-template-areas: '"i l" "i n"'
                              - grid-template-columns: 76px 1fr
                              - grid-template-rows: 1fr 1fr
                            img_cell:
                              - justify-self: start
                              - align-self: start
                              - background: var(--red)
                              - margin: 4px 4px
                              - padding: 14px
                              - border-radius: 50%
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 30px
                              - height: 30px
                              - color: var(--black)
                            label:
                              - justify-self: start
                              - align-self: end
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                              - padding: 1px 0
                            name:
                              - justify-self: start
                              - align-self: start
                              - font-size: 14px
                              - color: var(--gray1000)
                              - opacity: '0.7'
                              - padding: 1px 0
                        - type: custom:button-card
                          icon: mdi:bed-king
                          name: |
                            [[[ return 'Soverom' ]]]
                          triggers_update:
                            - sensor.bedroom_sensor_temphum_temperature
                            - sensor.bedroom_sensor_temphum_humidity
                          tap_action:
                            action: navigate
                            navigation_path: '#soverom'
                          custom_fields:
                            temp: |
                              [[[ 
                                var temp = states['sensor.bedroom_sensor_temphum_temperature'].state;
                                var hum = states['sensor.bedroom_sensor_temphum_humidity'].state;
                                return `
                                ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                `
                              ]]]  
                          styles:
                            card:
                              - padding: 4px
                              - height: 246px
                              - overflow: visible
                              - margin-top: 12px
                            grid:
                              - grid-template-areas: >-
                                  "n n i" ". . btn_plus" ". . state" "temp temp
                                  btn_minus"
                              - grid-template-rows: 1fr min-content min-content min-content
                              - grid-template-columns: 1fr min-content min-content
                            icon:
                              - width: 28px
                              - color: var(--black)
                            img_cell:
                              - justify-self: end
                              - background: var(--purple)
                              - border-radius: 100%
                              - align-self: start
                              - width: 60px
                              - height: 60px
                            name:
                              - justify-self: start
                              - align-self: start
                              - text-align: left
                              - font-size: 1em
                              - font-weight: 500
                              - color: '[[[ return variables.text ]]]'
                              - padding: 14px
                            custom_fields:
                              temp:
                                - justify-self: start
                                - font-size: 2.6em
                                - line-height: 1em
                                - font-weight: 300
                                - color: '[[[ return variables.text ]]]'
                                - padding: 0 0 14px 14px
                        - type: custom:button-card
                          icon: mdi:bed-empty
                          label: Tina
                          trigger_update:
                            - sensor.Tina_sensor_temphum_temperature
                            - sensor.Tina_sensor_temphum_humidity
                          tap_action:
                            action: navigate
                            navigation_path: '#Tina'
                          name: >
                            [[[ return
                            states['sensor.Tina_sensor_temphum_temperature'].state
                            + '¬∞ ¬∑ ' +
                            states['sensor.Tina_sensor_temphum_humidity'].state
                            + '%' ]]]
                          show_label: true
                          styles:
                            card:
                              - padding: 0
                              - overflow: visible
                              - margin-top: 12px
                            grid:
                              - grid-template-areas: '"i l" "i n"'
                              - grid-template-columns: 76px 1fr
                              - grid-template-rows: 1fr 1fr
                            img_cell:
                              - justify-self: start
                              - align-self: start
                              - background: var(--pink)
                              - margin: 4px 4px
                              - padding: 14px
                              - border-radius: 50%
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 30px
                              - height: 30px
                              - color: var(--black)
                            label:
                              - justify-self: start
                              - align-self: end
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                              - padding: 1px 0
                            name:
                              - justify-self: start
                              - align-self: start
                              - font-size: 14px
                              - color: var(--gray1000)
                              - opacity: '0.7'
                              - padding: 1px 0
              - title: Aktuelt
                icon: ''
                badge: ''
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: binary_sensor.dashboard_scenes_helper_night
                          state: 'on'
                      card:
                        type: custom:paper-buttons-row
                        styles:
                          gap: 8px
                          justify-content: flex-start
                          margin: 12px 0 12px 0
                          width: 100%
                        preset: button
                        buttons:
                          - icon: mdi:sleep
                            layout: icon_name_state
                            name: Leggetid
                            tap_action:
                              action: call-service
                              service: scene.turn_on
                              target:
                                entity_id: scene.stue_oppe_leggetid
                              data:
                                transition: 1
                          - icon: mdi:movie-open
                            layout: icon_name_state
                            name: Filmkveld
                            tap_action:
                              action: call-service
                              service: scene.turn_on
                              target:
                                entity_id: scene.filmkveld
                              data:
                                transition: 1
                          - icon: mdi:food
                            layout: icon_name_state
                            name: Middag
                            tap_action:
                              action: call-service
                              service: scene.turn_on
                              target:
                                entity_id: scene.stue_nede_middag
                              data:
                                transition: 1
                          - icon: mdi:power
                            layout: icon_name_state
                            name: Natta
                            tap_action:
                              action: call-service
                              service: scene.turn_on
                              target:
                                entity_id: scene.stue_nede_alt_av
                              data:
                                transition: 1
                            styles:
                              button:
                                margin-right: 36px
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: binary_sensor.dashboard_scenes_helper_night
                          state: 'off'
                      card:
                        type: custom:paper-buttons-row
                        styles:
                          gap: 8px
                          justify-content: flex-start
                          margin: 12px 0 12px 0
                          width: 100%
                        preset: button
                        buttons:
                          - icon: mdi:lightbulb-group-off
                            layout: icon_name_state
                            name: Alt lys av
                            tap_action:
                              action: call-service
                              service: script.lys_alle_av
                          - icon: mdi:food
                            layout: icon_name_state
                            name: Middag
                            tap_action:
                              action: call-service
                              service: scene.turn_on
                              target:
                                entity_id: scene.stue_nede_middag
                              data:
                                transition: 1
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: media_player.tv_stue
                              state: 'on'
                          card:
                            type: custom:button-card
                            template: universal_sensor
                            entity: media_player.tv_stue
                            tap_action:
                              action: navigate
                              navigation_path: '?tab=tv#media'
                            variables:
                              sub_text: TV
                              main_text: |
                                [[[ 
                                  var source = entity.attributes.source;
                                  var shield = states['media_player.shield_androidtv'];
                                  
                                  // RENAME YOUR APPS HERE
                                  var appMap = {
                                    "no.nrk.tv": "NRK",
                                    "ar.tvplayer.tv": "TiviMate",
                                    "no.altibox.tv": "Altibox",
                                    "com.retroarch.aarch64": "RetroArch",
                                    "com.netflix.ninja": "Netflix"
                                  };

                                  if (source == 'TV/HDMI' && shield && shield.attributes.app_name) {
                                    var rawApp = shield.attributes.app_name;
                                    var cleanName = appMap[rawApp] || rawApp;
                                    return cleanName;
                                  }
                                  
                                  return source;
                                ]]]
                              icon: mdi:television-classic
                              background_color: var(--gray200)
                              text_color: var(--gray1000)
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: vacuum.rolf
                              state: cleaning
                          card:
                            type: custom:button-card
                            template: universal_sensor
                            entity: vacuum.rolf
                            tap_action:
                              action: navigate
                              navigation_path: '#rolf'
                            extra_styles: |
                              @keyframes vacc {
                                  0% {
                                      transform: rotate(0deg) translate(0);
                                  }

                                  20% {
                                      transform: rotate(-5deg) translate(-3px, 3px);
                                  }

                                  40% {
                                      transform: rotate(-12deg) translate(-3px, -3px);
                                  }

                                  60% {
                                      transform: translate(3px, 3px);
                                  }

                                  80% {
                                      transform: rotate(12deg) translate(3px, -3px);
                                  }

                                  100% {
                                      transform: rotate(0deg) translate(0);
                                  }
                              }
                            state:
                              - value: cleaning
                                styles:
                                  icon:
                                    - animation: vacc 2s ease 0s infinite normal forwards
                            variables:
                              sub_text: Rolf
                              main_text: Vasker
                              icon: mdi:robot-vacuum
                              background_color: var(--gray200)
                              text_color: var(--gray1000)
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: binary_sensor.outdoor_carcharger_contact_contact
                              state: 'off'
                          card:
                            type: custom:button-card
                            template: universal_sensor
                            entity: binary_sensor.outdoor_carcharger_contact_contact
                            tap_action:
                              action: navigate
                              navigation_path: '#bil'
                            variables:
                              sub_text: Ioniq 5
                              main_text: Lader
                              alt_text: >
                                [[[ return
                                states['sensor.ioniq_5_ev_battery_level_2'].state
                                + '%' ]]]
                              icon: mdi:ev-station
                              background_color: var(--gray200)
                              text_color: var(--gray1000)
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: sensor.vaskemaskin
                              state: 'on'
                          card:
                            type: custom:button-card
                            template: universal_sensor
                            entity: sensor.vaskemaskin
                            tap_action:
                              action: navigate
                              navigation_path: '#bad_nede'
                            variables:
                              sub_text: Vaskemaskin
                              main_text: |
                                [[[ return entity.attributes.remain_time ]]]
                              icon: mdi:washing-machine
                              background_color: var(--gray200)
                              text_color: var(--gray1000)
                              show_bar: true
                              bar_value: >
                                [[[ return
                                states['sensor.washing_remain_percent'].state
                                ]]]
                              bar_color: var(--gray1000)
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: sensor.oppvaskmaskin
                              state: 'on'
                          card:
                            type: custom:button-card
                            template: universal_sensor
                            entity: sensor.oppvaskmaskin
                            tap_action:
                              action: navigate
                              navigation_path: '#kjokken'
                            variables:
                              sub_text: Oppvaskmaskin
                              main_text: |
                                [[[ return entity.attributes.remain_time ]]]
                              icon: mdi:dishwasher
                              background_color: var(--gray200)
                              text_color: var(--gray1000)
                              show_bar: true
                              bar_value: >
                                [[[ return
                                states['sensor.dishwashing_remain_percent'].state
                                ]]]
                              bar_color: var(--gray1000)
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: sensor.ovn_machine_state
                              state: running
                          card:
                            type: custom:button-card
                            template: universal_sensor
                            entity: sensor.ovn_machine_state
                            tap_action:
                              action: navigate
                              navigation_path: '#kjokken'
                            variables:
                              sub_text: Komfyr
                              main_text: >
                                [[[ return states['sensor.ovn_temperatur'].state
                                + '¬∞<span style="font-size:14px;
                                line-height:1.5em">/' +
                                states['sensor.ovn_set_point'].state + '¬∞' ]]]
                              icon: mdi:television-classic
                              background_color: var(--gray200)
                              text_color: var(--gray1000)
              - title: Batterier
                conditions:
                  - template: >-
                      {{ (states | selectattr('entity_id', 'search',
                      '_battery_plus_low') | selectattr('state', 'eq', 'on') |
                      list) | length > 0 }}
                card:
                  type: custom:auto-entities
                  card:
                    type: grid
                    columns: 2
                    square: false
                  card_param: cards
                  filter:
                    include:
                      - entity_id: sensor.*battery_plus
                        state: < 30
                        options:
                          type: custom:button-card
                          template: sensor_battery
                    exclude: []
                  sort:
                    method: state
                    numeric: true
                badge: ''
        view_layout:
          grid-area: left
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: V√¶ret
            icon: mdi:weather-partly-snowy-rainy
            state: null
            hash: '#weather'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: V√¶ret
                icon: mdi:weather-partly-snowy-rainy
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:css-swipe-card
            height: 190px
            pagination: true
            custom_css:
              '--pagination-bullet-active-background-color': var(--gray400)
              '--pagination-bullet-background-color': var(--gray200)
              '--pagination-bullet-border': none
              '--pagination-bullet-distance': 0px
            cards:
              - type: custom:button-card
                entity: sensor.weather_forecast_v2
                tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - vaer_naa: hide
                      - vaer_idag: show
                show_icon: false
                show_name: false
                custom_fields:
                  cond: >
                    [[[ 

                    return entity.attributes.current.condition + '<span
                    style="padding-left:12px;">' +
                    entity.attributes.current.wind_desc + '<span
                    style="padding-left:12px; text-transform:lowercase">' +
                    entity.attributes.current.precipitation + ' mm'

                    ]]]
                  day: V√¶ret n√•
                  temp: >
                    [[[ return entity.attributes.current.temperature + '¬∞<span
                    style="font-size: 0.3em">' +
                    entity.attributes.current.feels_like + '¬∞' ]]] 
                  icon: >
                    [[[ return '<img src = "' + entity.attributes.current.icon
                    +  '" width="130" height="130" />' ]]] 
                styles:
                  grid:
                    - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                    - grid-template-columns: 1fr 1fr 1fr
                    - grid-template-rows: min-content 1fr min-content
                  card:
                    - background: var(--gray200)
                    - padding: 24px 0px 24px 24px
                    - height: 170px
                  custom_fields:
                    day:
                      - justify-self: start
                      - align-self: end
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray1000)
                    cond:
                      - justify-self: start
                      - align-self: end
                      - text-transform: capitalize
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray1000)
                    temp:
                      - justify-self: start
                      - text-align: left
                      - font-size: 3.4em
                      - line-height: 1em
                      - font-weight: 300
                      - padding: 12px 0 0 0
                      - color: var(--gray1000)
                    icon:
                      - justify-self: end
                      - margin-top: 10px
                      - padding-right: 20px
              - type: custom:paper-buttons-row
                styles:
                  justify-content: space-between
                  align-content: space-between
                  flex-wrap: wrap
                  gap: 8px
                  background: var(--gray200)
                  border-radius: 30px
                  padding: 4px
                  height: 162px
                buttons:
                  - name: Pollenvarsel
                    layout: name
                    styles:
                      button:
                        width: 100%
                        display: flex
                        justify-content: flex-start
                        padding-left: 16px
                        padding-top: 12px
                      name:
                        text-align: left
                        align-self: flex-start
                        font-size: 14px
                        font-weight: 400
                        color: var(--gray1000)
                  - name: '{{ state_attr(config.entity, ''display_name'') }}'
                    entity: sensor.google_pollen_bjork
                    layout: name_state
                    state: >-
                      {{ state_attr(config.entity, 'category') }} ({{
                      state_attr(config.entity, 'index_value') | round(0) }})
                    styles:
                      name:
                        font-size: 14px
                        line-height: 18px
                        opacity: 1
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}        
                      state:
                        font-size: 10px
                        line-height: 18px
                        opacity: 0.7
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}   
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: >
                          {% set p = state_attr(config.entity,
                          'index_value')|int %} {%- if p == 5 -%}
                            var(--purple)
                          {%- elif p == 4 -%}
                            var(--red)
                          {%- elif p == 3 -%}
                            var(--orange)
                          {%- elif p == 2 -%}
                            var(--yellow)
                          {%- elif p == 1 -%}
                            var(--green)
                          {%- else -%}
                            var(--gray100)
                          {%- endif -%}
                        border-radius: 26px
                        color: var(--gray1000)
                  - name: '{{ state_attr(config.entity, ''display_name'') }}'
                    entity: sensor.google_pollen_gress
                    layout: name_state
                    state: >-
                      {{ state_attr(config.entity, 'category') }} ({{
                      state_attr(config.entity, 'index_value') | round(0) }})
                    styles:
                      name:
                        font-size: 14px
                        line-height: 18px
                        opacity: 1
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}        
                      state:
                        font-size: 10px
                        line-height: 18px
                        opacity: 0.7
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}   
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: >
                          {% set p = state_attr(config.entity,
                          'index_value')|int %} {%- if p == 5 -%}
                            var(--purple)
                          {%- elif p == 4 -%}
                            var(--red)
                          {%- elif p == 3 -%}
                            var(--orange)
                          {%- elif p == 2 -%}
                            var(--yellow)
                          {%- elif p == 1 -%}
                            var(--green)
                          {%- else -%}
                            var(--gray100)
                          {%- endif -%}
                        border-radius: 26px
                        color: var(--gray1000)
                  - name: '{{ state_attr(config.entity, ''display_name'') }}'
                    entity: sensor.google_pollen_or
                    layout: name_state
                    state: >-
                      {{ state_attr(config.entity, 'category') }} ({{
                      state_attr(config.entity, 'index_value') | round(0) }})
                    styles:
                      name:
                        font-size: 14px
                        line-height: 18px
                        opacity: 1
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}        
                      state:
                        font-size: 10px
                        line-height: 18px
                        opacity: 0.7
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}   
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: >
                          {% set p = state_attr(config.entity,
                          'index_value')|int %} {%- if p == 5 -%}
                            var(--purple)
                          {%- elif p == 4 -%}
                            var(--red)
                          {%- elif p == 3 -%}
                            var(--orange)
                          {%- elif p == 2 -%}
                            var(--yellow)
                          {%- elif p == 1 -%}
                            var(--green)
                          {%- else -%}
                            var(--gray100)
                          {%- endif -%}
                        border-radius: 26px
                        color: var(--gray1000)
                  - name: '{{ state_attr(config.entity, ''display_name'') }}'
                    entity: sensor.google_pollen_hassel
                    layout: name_state
                    state: >-
                      {{ state_attr(config.entity, 'category') }} ({{
                      state_attr(config.entity, 'index_value') | round(0) }})
                    styles:
                      name:
                        font-size: 14px
                        line-height: 18px
                        opacity: 1
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}        
                      state:
                        font-size: 10px
                        line-height: 18px
                        opacity: 0.7
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}   
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: >
                          {% set p = state_attr(config.entity,
                          'index_value')|int %} {%- if p == 5 -%}
                            var(--purple)
                          {%- elif p == 4 -%}
                            var(--red)
                          {%- elif p == 3 -%}
                            var(--orange)
                          {%- elif p == 2 -%}
                            var(--yellow)
                          {%- elif p == 1 -%}
                            var(--green)
                          {%- else -%}
                            var(--gray100)
                          {%- endif -%}
                        border-radius: 26px
                        color: var(--gray1000)
                  - name: Burot
                    entity: sensor.google_pollen_malurt
                    layout: name_state
                    state: >-
                      {{ state_attr(config.entity, 'category') }} ({{
                      state_attr(config.entity, 'index_value') | round(0) }})
                    styles:
                      name:
                        font-size: 14px
                        line-height: 18px
                        opacity: 1
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}        
                      state:
                        font-size: 10px
                        line-height: 18px
                        opacity: 0.7
                        font-weight: 300
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'index_value')|int %} {% if pollen_index >= 1 %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}   
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        flex-shrink: 0
                        background-color: >
                          {% set p = state_attr(config.entity,
                          'index_value')|int %} {%- if p == 5 -%}
                            var(--purple)
                          {%- elif p == 4 -%}
                            var(--red)
                          {%- elif p == 3 -%}
                            var(--orange)
                          {%- elif p == 2 -%}
                            var(--yellow)
                          {%- elif p == 1 -%}
                            var(--green)
                          {%- else -%}
                            var(--gray100)
                          {%- endif -%} 
                        border-radius: 26px
                        color: var(--gray1000)
              - type: custom:paper-buttons-row
                styles:
                  justify-content: space-between
                  align-content: space-between
                  flex-wrap: wrap
                  gap: 8px
                  background: var(--gray200)
                  border-radius: 30px
                  padding: 4px
                  height: 162px
                buttons:
                  - name: Andre varsler
                    layout: name
                    styles:
                      button:
                        width: 100%
                        display: flex
                        justify-content: flex-start
                        padding-left: 16px
                        padding-top: 12px
                      name:
                        text-align: left
                        align-self: flex-start
                        font-size: 14px
                        font-weight: 400
                        color: var(--gray1000)
                  - name: >-
                      {{ state_attr(config.entity, 'next_setting') |
                      as_timestamp | timestamp_custom('%H:%M') }}
                    layout: icon_name
                    entity: sun.sun
                    image: /local/ic/weather_icons/met/sun_down.png
                    styles:
                      name:
                        font-size: 13px
                        line-height: 1.25
                        opacity: 0.7
                        font-weight: 400
                      icon:
                        width: 40px
                        height: 40px
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: var(--gray100)
                        border-radius: 26px
                        color: var(--gray1000)
                  - name: >-
                      {{ state_attr(config.entity, 'next_rising') | as_timestamp
                      | timestamp_custom('%H:%M') }}
                    layout: icon_name
                    entity: sun.sun
                    image: /local/ic/weather_icons/met/sun_up.png
                    styles:
                      name:
                        font-size: 13px
                        line-height: 1.25
                        opacity: 0.7
                        font-weight: 400
                      icon:
                        width: 40px
                        height: 40px
                      button:
                        flex: 1 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: var(--gray100)
                        border-radius: 26px
                        color: var(--gray1000)
                  - name: UV
                    entity: sensor.weather_forecast_v2
                    layout: name_state
                    state: >
                      {% set uv = state_attr(config.entity, 'current').uv_index
                      | float %} {% set uv_display = uv | round(1) %} {% set
                      categories = [
                        {'min': 11, 'name': 'Ekstrem'},
                        {'min': 8, 'name': 'Sv√¶rt sterk'},
                        {'min': 6, 'name': 'Sterk'},
                        {'min': 3, 'name': 'Moderat'},
                        {'min': 1, 'name': 'Lav'},
                        {'min': 0, 'name': 'Sv√¶rt lav'}
                      ] %} {% for cat in categories %}
                        {% if uv >= cat.min %}
                          {{ cat.name }} ({{ uv_display }})
                          {% break %}
                        {% endif %}
                      {% endfor %}
                    styles:
                      name:
                        font-size: 28px
                        font-weight: 300
                        padding: 8px 0
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'current').uv_index | float %} {% if pollen_index >= 1
                          %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}        
                      state:
                        font-size: 13px
                        padding: 8px 0
                        line-height: 1.25
                        opacity: 0.7
                        font-weight: 400
                        color: >
                          {% set pollen_index = state_attr(config.entity,
                          'current').uv_index | float %} {% if pollen_index >= 1
                          %}
                            var(--black)
                          {% else %}
                            var(--gray1000)
                          {% endif %}   
                      button:
                        flex: 3 1 0
                        width: 0
                        height: calc(100% - 64px)
                        background-color: >
                          {% set p = state_attr(config.entity,
                          'current').uv_index | float %} {%- if p >= 11 -%}
                            var(--purple)
                          {%- elif p >= 8 -%}
                            var(--red)
                          {%- elif p >= 6 -%}
                            var(--orange)
                          {%- elif p >= 3 -%}
                            var(--yellow)
                          {%- elif p >= 1 -%}
                            var(--green)
                          {%- else -%}
                            var(--gray100)
                          {%- endif -%}
                        border-radius: 26px
                        color: var(--gray1000)
          - type: custom:gap-card
            height: 0
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflowX: scroll
              height: 182px
              margin: 0 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            preset: weather
            buttons:
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[0].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[0].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[0].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[0].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[0].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[0].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[1].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[1].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[1].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[1].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[1].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[1].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[2].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[2].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[2].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[2].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[2].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[2].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[3].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[3].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[3].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[3].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[3].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[3].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[4].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[4].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[4].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[4].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[4].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[4].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[5].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[5].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[5].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[5].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[5].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[5].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[6].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[6].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[6].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[6].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[6].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[6].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[7].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[7].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[7].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[7].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[7].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[7].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[8].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[8].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[8].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[8].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[8].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[8].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[9].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[9].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[9].precipitation > 0
                  %}{{ state_attr(config.entity, 'hourly')[9].precipitation }}
                  mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[9].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[9].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[10].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[10].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[10].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[10].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[10].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[10].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[11].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[11].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[11].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[11].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[11].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[11].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[12].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[12].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[12].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[12].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[12].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[12].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[13].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[13].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[13].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[13].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[13].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[13].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[14].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[14].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[14].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[14].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[14].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[14].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[15].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[15].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[15].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[15].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[15].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[15].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[16].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[16].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[16].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[16].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[16].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[16].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[17].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[17].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[17].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[17].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[17].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[17].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[18].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[18].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[18].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[18].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[18].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[18].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[19].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[19].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[19].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[19].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[19].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[19].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[20].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[20].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[20].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[20].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[20].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[20].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[21].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[21].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[21].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[21].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[21].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[21].temperature }}¬∞'
              - layout: icon_state_name
                entity: sensor.weather_forecast_v2
                ripple: none
                tap_action:
                  action: none
                name: >-
                  {{
                  state_attr(config.entity,'hourly')[22].datetime.split('T')[1].split(':')[0]
                  }}:00







                  {{ state_attr(config.entity, 'hourly')[22].wind_speed }}m/s

                  {% if state_attr(config.entity, 'hourly')[22].precipitation >
                  0 %}{{ state_attr(config.entity, 'hourly')[22].precipitation
                  }} mm{% else %}0 mm{% endif %}
                image: '{{ state_attr(config.entity, ''hourly'')[22].icon }}'
                state: '{{ state_attr(config.entity, ''hourly'')[22].temperature }}¬∞'
                styles:
                  button:
                    margin-right: 36px
          - type: custom:button-card
            entity: sensor.weather_forecast_v2
            show_icon: false
            show_name: false
            custom_fields:
              cond: >
                [[[ 

                return entity.attributes.forecast[0].condition + '<span
                style="padding-left:12px; text-transform:lowercase">' +
                entity.attributes.forecast[0].precipitation + ' mm'

                ]]]
              day: >
                [[[  return
                helpers.formatDateWeekday(entity.attributes.forecast[0].datetime)
                ]]]     
              temp: >
                [[[  return entity.attributes.forecast[0].temperature + '¬∞'
                ]]]  
              icon: |
                [[[
                  var weather = entity.attributes.forecast[0].icon;
                  return '<img src = "' + weather + '" width="80" height="80" />'
                ]]]
            styles:
              grid:
                - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                - grid-template-columns: 1fr 1fr 1fr
                - grid-template-rows: min-content 1fr min-content
              card:
                - background: var(--gray200)
                - padding: 24px
                - height: 130px
              custom_fields:
                day:
                  - justify-self: start
                  - align-self: end
                  - font-size: 14px
                  - font-weight: 400
                  - text-transform: capitalize;
                  - color: var(--gray1000)
                cond:
                  - justify-self: start
                  - align-self: end
                  - text-transform: capitalize
                  - font-size: 14px
                  - font-weight: 400
                  - color: var(--gray1000)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 2.2em
                  - line-height: 40px
                  - font-weight: 300
                  - color: var(--gray1000)
                icon:
                  - justify-self: end
                  - margin-top: 10px
          - type: custom:button-card
            entity: sensor.weather_forecast_v2
            show_icon: false
            show_name: false
            custom_fields:
              cond: >
                [[[ 


                return entity.attributes.forecast[1].condition + '<span
                style="padding-left:12px;text-transform:lowercase">' +
                entity.attributes.forecast[1].precipitation + ' mm'


                ]]]
              day: >
                [[[  return
                helpers.formatDateWeekday(entity.attributes.forecast[1].datetime)
                ]]]     
              temp: >
                [[[  return entity.attributes.forecast[1].temperature + '¬∞'
                ]]]  
              icon: |
                [[[
                  var weather = entity.attributes.forecast[1].icon;
                  return '<img src = "' + weather + '" width="80" height="80" />'
                ]]]
            styles:
              grid:
                - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                - grid-template-columns: 1fr 1fr 1fr
                - grid-template-rows: min-content 1fr min-content
              card:
                - background: var(--gray200)
                - padding: 24px
                - height: 130px
              custom_fields:
                day:
                  - justify-self: start
                  - align-self: end
                  - font-size: 14px
                  - font-weight: 400
                  - text-transform: capitalize;
                  - color: var(--gray1000)
                cond:
                  - justify-self: start
                  - align-self: end
                  - text-transform: capitalize
                  - font-size: 14px
                  - font-weight: 400
                  - color: var(--gray1000)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 2.2em
                  - line-height: 40px
                  - font-weight: 300
                  - color: var(--gray1000)
                icon:
                  - justify-self: end
                  - margin-top: 10px
          - type: custom:button-card
            entity: sensor.weather_forecast_v2
            show_icon: false
            show_name: false
            custom_fields:
              cond: >
                [[[ 


                return entity.attributes.forecast[2].condition + '<span
                style="padding-left:12px;text-transform:lowercase">' +
                entity.attributes.forecast[2].precipitation + ' mm'


                ]]]
              day: >
                [[[  return
                helpers.formatDateWeekday(entity.attributes.forecast[2].datetime)
                ]]]     
              temp: >
                [[[  return entity.attributes.forecast[2].temperature + '¬∞'
                ]]]  
              icon: |
                [[[
                  var weather = entity.attributes.forecast[2].icon;
                  return '<img src = "' + weather + '" width="80" height="80" />'
                ]]]
            styles:
              grid:
                - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                - grid-template-columns: 1fr 1fr 1fr
                - grid-template-rows: min-content 1fr min-content
              card:
                - background: var(--gray200)
                - padding: 24px
                - height: 130px
              custom_fields:
                day:
                  - justify-self: start
                  - align-self: end
                  - font-size: 14px
                  - font-weight: 400
                  - text-transform: capitalize;
                  - color: var(--gray1000)
                cond:
                  - justify-self: start
                  - align-self: end
                  - text-transform: capitalize
                  - font-size: 14px
                  - font-weight: 400
                  - color: var(--gray1000)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 2.2em
                  - line-height: 40px
                  - font-weight: 300
                  - color: var(--gray1000)
                icon:
                  - justify-self: end
                  - margin-top: 10px
          - type: custom:button-card
            entity: sensor.weather_forecast_v2
            show_icon: false
            show_name: false
            custom_fields:
              cond: >
                [[[ 


                return entity.attributes.forecast[3].condition + '<span
                style="padding-left:12px;text-transform:lowercase">' +
                entity.attributes.forecast[3].precipitation + ' mm'


                ]]]
              day: >
                [[[  return
                helpers.formatDateWeekday(entity.attributes.forecast[3].datetime)
                ]]]     
              temp: >
                [[[  return entity.attributes.forecast[3].temperature + '¬∞'
                ]]]  
              icon: |
                [[[
                  var weather = entity.attributes.forecast[3].icon;
                  return '<img src = "' + weather + '" width="80" height="80" />'
                ]]]
            styles:
              grid:
                - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                - grid-template-columns: 1fr 1fr 1fr
                - grid-template-rows: min-content 1fr min-content
              card:
                - background: var(--gray200)
                - padding: 24px
                - height: 130px
              custom_fields:
                day:
                  - justify-self: start
                  - align-self: end
                  - font-size: 14px
                  - font-weight: 400
                  - text-transform: capitalize;
                  - color: var(--gray1000)
                cond:
                  - justify-self: start
                  - align-self: end
                  - text-transform: capitalize
                  - font-size: 14px
                  - font-weight: 400
                  - color: var(--gray1000)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 2.2em
                  - line-height: 40px
                  - font-weight: 300
                  - color: var(--gray1000)
                icon:
                  - justify-self: end
                  - margin-top: 10px
          - type: custom:button-card
            entity: sensor.weather_forecast_v2
            show_icon: false
            show_name: false
            custom_fields:
              cond: >
                [[[ 


                return entity.attributes.forecast[4].condition + '<span
                style="padding-left:12px;text-transform:lowercase">' +
                entity.attributes.forecast[4].precipitation + ' mm'


                ]]]
              day: >
                [[[  return
                helpers.formatDateWeekday(entity.attributes.forecast[4].datetime)
                ]]]     
              temp: >
                [[[  return entity.attributes.forecast[4].temperature + '¬∞'
                ]]]  
              icon: |
                [[[
                  var weather = entity.attributes.forecast[4].icon;
                  return '<img src = "' + weather + '" width="80" height="80" />'
                ]]]
            styles:
              grid:
                - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                - grid-template-columns: 1fr 1fr 1fr
                - grid-template-rows: min-content 1fr min-content
              card:
                - background: var(--gray200)
                - padding: 24px
                - height: 130px
              custom_fields:
                day:
                  - justify-self: start
                  - align-self: end
                  - font-size: 14px
                  - font-weight: 400
                  - text-transform: capitalize;
                  - color: var(--gray1000)
                cond:
                  - justify-self: start
                  - align-self: end
                  - text-transform: capitalize
                  - font-size: 14px
                  - font-weight: 400
                  - color: var(--gray1000)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 2.2em
                  - line-height: 40px
                  - font-weight: 300
                  - color: var(--gray1000)
                icon:
                  - justify-self: end
                  - margin-top: 10px
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Rolf
            icon: mdi:robot-vacuum
            state: null
            hash: '#rolf'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Rolf
                icon: mdi:robot-vacuum
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: conditional
            conditions:
              - condition: state
                entity: binary_sensor.rolf_water_shortage
                state: 'on'
            card:
              type: custom:button-card
              name: '[[[ return ''<strong>Error:</strong> Vanntanken er tom!'' ]]]'
              icon: mdi:alert-circle-outline
              custom_fields:
                btn:
                  card:
                    type: custom:paper-buttons-row
                    styles:
                      justify-content: flex-start
                      gap: 6px
                      margin-right: 10px
                    buttons:
                      - layout: icon
                        icon: mdi:delete-empty
                        entity: script.rolf_empty
                        tap_action:
                          action: toggle
                        styles:
                          button:
                            flex-basis: 1
                            flex-shrink: 0
                            background-color: rgba(0,0,0, 0.1)
                            height: 34px
                            width: 34px
                            border-radius: 50%
                            border: 1px solid rgba(0,0,0, 0.1)
                          icon:
                            color: var(--black)
              styles:
                card:
                  - padding: 0
                  - background: var(--red)
                grid:
                  - grid-template-areas: '"i n btn"'
                  - grid-template-columns: 76px 1fr
                img_cell:
                  - justify-self: start
                  - background: rgba(0,0,0, 0.1)
                  - margin: 4px 4px
                  - border-radius: 50%
                  - width: 58px
                  - height: 58px
                icon:
                  - width: 30px
                  - height: 30px
                  - color: var(--black)
                name:
                  - justify-self: start
                  - color: var(--black)
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Renhold
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:button-card
                              template: template_sensor_big
                              show_name: false
                              entity: input_boolean.rolf_rom_stue
                              name: ''
                              tap_action:
                                action: toggle
                              variables:
                                text_main: Stue
                                icon: mdi:sofa
                                background: var(--gray200)
                                margin: 0
                                height: 152px
                                action: tap
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: var(--black)
                                    label:
                                      - color: var(--black)
                                    icon:
                                      - color: var(--black)
                                    img_cell:
                                      - background: rgba(var(--highlight_active))
                            - type: custom:button-card
                              template: template_sensor_big
                              show_name: false
                              entity: input_boolean.rolf_rom_trapp
                              tap_action:
                                action: toggle
                              variables:
                                text_main: Trapp
                                icon: mdi:stairs
                                background: var(--gray200)
                                margin: 12px
                                height: 152px
                                action: tap
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: var(--black)
                                    label:
                                      - color: var(--black)
                                    icon:
                                      - color: var(--black)
                                    img_cell:
                                      - background: rgba(var(--highlight_active))
                        - type: vertical-stack
                          cards:
                            - type: custom:button-card
                              template: template_sensor_small
                              show_name: false
                              entity: input_boolean.rolf_rom_gang
                              tap_action:
                                action: toggle
                              variables:
                                text_main: Gangen
                                icon: mdi:door
                                background: var(--gray200)
                                margin: 0
                                action: tap
                              styles:
                                grid:
                                  - grid-template-areas: '"i l" "i l"'
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-rows: 1fr 1fr
                                label:
                                  - align-self: center
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: var(--black)
                                    label:
                                      - color: var(--black)
                                    icon:
                                      - color: var(--black)
                                    img_cell:
                                      - background: rgba(var(--highlight_active))
                            - type: custom:button-card
                              template: template_sensor_big
                              show_name: false
                              entity: input_boolean.rolf_rom_kjokken
                              tap_action:
                                action: toggle
                              variables:
                                text_main: Kj√∏kken
                                icon: mdi:silverware-fork-knife
                                background: var(--gray200)
                                margin: 12px
                                action: tap
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: var(--black)
                                    label:
                                      - color: var(--black)
                                    icon:
                                      - color: var(--black)
                                    img_cell:
                                      - background: rgba(var(--highlight_active))
                            - type: custom:button-card
                              template: template_sensor_small
                              show_name: false
                              entity: input_boolean.rolf_rom_bad
                              tap_action:
                                action: toggle
                              variables:
                                text_main: Badet
                                icon: mdi:shower-head
                                background: var(--gray200)
                                margin: 12px
                                action: tap
                              styles:
                                grid:
                                  - grid-template-areas: '"i l" "i l"'
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-rows: 1fr 1fr
                                label:
                                  - align-self: center
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: var(--black)
                                    label:
                                      - color: var(--black)
                                    icon:
                                      - color: var(--black)
                                    img_cell:
                                      - background: rgba(var(--highlight_active))
                    - type: custom:button-card
                      name: |
                        [[[
                          if (states['sensor.rolf_all'].state == 'False')
                            return "St√∏vsug alt";
                          else
                            return "St√∏vsug valgte rom";
                        ]]]
                      icon: mdi:robot-vacuum
                      entity: vacuum.rolf
                      triggers_update:
                        - input_boolean.rolf_rom_stue
                        - input_boolean.rolf_rom_gang
                        - input_boolean.rolf_rom_spisebord
                        - input_boolean.rolf_rom_kjokken
                        - input_boolean.rolf_rom_bad
                      tap_action:
                        action: perform-action
                        perform_action: script.rolf_start_barebones
                      custom_fields:
                        btn:
                          card:
                            type: custom:paper-buttons-row
                            styles:
                              justify-content: flex-start
                              gap: 6px
                              margin-right: 10px
                            buttons:
                              - layout: icon
                                icon: mdi:pause
                                entity: vacuum.rolf
                                state_icons:
                                  paused: mdi:play
                                  cleaning: mdi:pause
                                tap_action:
                                  action: call-service
                                  service: script.rolf_play_pause
                                styles:
                                  button:
                                    flex-basis: 1
                                    flex-shrink: 0
                                    background-color: rgba(0,0,0, 0.1)
                                    height: 34px
                                    width: 34px
                                    border-radius: 50%
                                    border: 1px solid rgba(0,0,0, 0.1)
                                  icon:
                                    color: var(--black)
                              - layout: icon
                                icon: mdi:home
                                entity: script.rolf_avbryt
                                tap_action:
                                  action: toggle
                                styles:
                                  button:
                                    flex-basis: 1
                                    flex-shrink: 0
                                    background-color: rgba(0,0,0, 0.1)
                                    height: 34px
                                    width: 34px
                                    border-radius: 50%
                                    border: 1px solid rgba(0,0,0, 0.1)
                                  icon:
                                    color: var(--black)
                      state:
                        - value: cleaning
                          name: Vasker
                          styles:
                            custom_fields:
                              btn:
                                - display: block
                            icon:
                              - animation: vacc 2s ease 0s infinite normal forwards
                        - value: paused
                          name: Pauset
                          styles:
                            custom_fields:
                              btn:
                                - display: block
                      extra_styles: |
                        @keyframes vacc {
                            0% {
                                transform: rotate(0deg) translate(0);
                            }

                            20% {
                                transform: rotate(-5deg) translate(-3px, 3px);
                            }

                            40% {
                                transform: rotate(-12deg) translate(-3px, -3px);
                            }

                            60% {
                                transform: translate(3px, 3px);
                            }

                            80% {
                                transform: rotate(12deg) translate(3px, -3px);
                            }

                            100% {
                                transform: rotate(0deg) translate(0);
                            }
                        }
                      styles:
                        card:
                          - padding: 0
                          - background: var(--green)
                          - margin-top: 12px
                        grid:
                          - grid-template-areas: '"i n btn"'
                          - grid-template-columns: 76px 1fr
                        img_cell:
                          - justify-self: start
                          - background: rgba(0,0,0, 0.1)
                          - margin: 4px 4px
                          - border-radius: 50%
                          - width: 58px
                          - height: 58px
                        icon:
                          - width: 30px
                          - height: 30px
                          - color: var(--black)
                        name:
                          - justify-self: start
                          - color: var(--black)
                        custom_fields:
                          btn:
                            - display: none
                    - type: custom:paper-buttons-row
                      styles:
                        gap: 8px
                        justify-content: flex-start
                        overflow: scroll
                        margin: 36px 0 0 -18px
                        padding-left: 18px
                        width: calc(100% + 36px)
                      extra_styles: |
                        ::-webkit-scrollbar {
                          display: none;
                        }
                      buttons:
                        - icon: mdi:table-furniture
                          layout: icon|name
                          name: Spisebord lite
                          tap_action:
                            action: call-service
                            service: script.rolf_zone_stuebord
                          styles:
                            name:
                              color: var(--gray1000)
                              text-wrap: nowrap
                            button:
                              display: flex
                              background-color: var(--gray200)
                              border-radius: 24px
                              color: var(--white)
                              padding: 10px 20px 10px 15px
                            icon:
                              color: var(--gray1000)
                              padding-right: 10px
                        - icon: mdi:table-furniture
                          layout: icon|name
                          name: Spisebord mye
                          tap_action:
                            action: call-service
                            service: script.rolf_zone_stuebord_mye
                          styles:
                            name:
                              color: var(--gray1000)
                              text-wrap: nowrap
                            button:
                              display: flex
                              background-color: var(--gray200)
                              border-radius: 24px
                              color: var(--white)
                              padding: 10px 20px 10px 15px
                            icon:
                              color: var(--gray1000)
                              padding-right: 10px
                        - icon: mdi:table-furniture
                          layout: icon|name
                          name: Stue uten spisebord
                          tap_action:
                            action: call-service
                            service: script.rolf_zone_stue_uten_spisebord
                          styles:
                            name:
                              color: var(--gray1000)
                              text-wrap: nowrap
                            button:
                              display: flex
                              background-color: var(--gray200)
                              border-radius: 24px
                              color: var(--white)
                              padding: 10px 20px 10px 15px
                            icon:
                              color: var(--gray1000)
                              padding-right: 10px
                        - icon: mdi:rug
                          layout: icon|name
                          name: Teppe stue
                          tap_action:
                            action: call-service
                            service: script.rolf_zone_teppe
                          styles:
                            name:
                              color: var(--gray1000)
                              text-wrap: nowrap
                            button:
                              display: flex
                              background-color: var(--gray200)
                              border-radius: 24px
                              color: var(--white)
                              padding: 10px 20px 10px 15px
                            icon:
                              color: var(--gray1000)
                              padding-right: 10px
                        - icon: mdi:table-furniture
                          layout: icon|name
                          name: Kj√∏kkenbord
                          tap_action:
                            action: call-service
                            service: script.rolf_zone_kjokkenbord
                          styles:
                            name:
                              color: var(--gray1000)
                              text-wrap: nowrap
                            button:
                              display: flex
                              background-color: var(--gray200)
                              border-radius: 24px
                              color: var(--white)
                              padding: 10px 20px 10px 15px
                              margin-right: 36px
                            icon:
                              color: var(--gray1000)
                              padding-right: 10px
              - title: Kontroll
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 1
                      square: false
                      cards:
                        - type: grid
                          columns: 3
                          square: false
                          cards:
                            - type: custom:button-card
                              template: template_trigger_card
                              entity: vacuum.rolf
                              state:
                                - value: paused
                                  icon: mdi:play
                                  name: Fortsett
                                  styles:
                                    card:
                                      - background: var(--green)
                              tap_action:
                                action: call-service
                                service: script.rolf_play_pause
                                target: {}
                              variables:
                                text_main: Pause
                                icon: mdi:pause
                                background: var(--red)
                                color: var(--black)
                                margin: 0
                            - type: custom:button-card
                              template: template_trigger_card
                              entity: script.rolf_avbryt
                              tap_action:
                                action: toggle
                              variables:
                                text_main: |
                                  [[[ return 'Returner<br>hjem' ]]]
                                icon: mdi:home
                                background: var(--orange)
                                color: var(--black)
                                margin: 0
                            - type: custom:button-card
                              template: template_trigger_card
                              entity: script.rolf_empty
                              tap_action:
                                action: toggle
                              variables:
                                text_main: |
                                  [[[ return 'T√∏m<br>st√∏vsuger' ]]]
                                icon: mdi:delete-empty
                                background: var(--gray1000)
                                color: var(--black)
                                margin: 0
                        - type: grid
                          columns: 2
                          square: false
                          cards:
                            - type: custom:button-card
                              template: template_sensor_big
                              entity: script.rolf_set_fan_speed
                              trigger_update:
                                - vacuum.rolf
                              tap_action:
                                action: toggle
                              variables:
                                text_main: |
                                  [[[
                                    return states['vacuum.rolf'].attributes.fan_speed
                                  ]]]  
                                text_sub: Viftehastighet
                                icon: mdi:fan
                                background: var(--gray200)
                                margin: 0
                                height: 144px
                              styles:
                                label:
                                  - text-transform: capitalize
                            - type: grid
                              columns: 1
                              square: false
                              cards:
                                - type: custom:button-card
                                  template: template_sensor_small
                                  entity: script.rolf_mop_mode
                                  trigger_update:
                                    - vacuum.rolf
                                  tap_action:
                                    action: toggle
                                  variables:
                                    text_main: |
                                      [[[
                                        return states['select.rolf_mop_mode'].state
                                      ]]]  
                                    text_sub: Mopp modus
                                    icon: mdi:broom
                                    background: var(--gray200)
                                    margin: 0
                                  styles:
                                    label:
                                      - text-transform: capitalize
                                - type: custom:button-card
                                  template: template_sensor_small
                                  entity: script.rolf_mop_intensity
                                  trigger_update:
                                    - vacuum.rolf
                                  tap_action:
                                    action: toggle
                                  variables:
                                    text_main: |
                                      [[[
                                        return states['select.rolf_mop_intensity'].state
                                      ]]] 
                                    text_sub: Mopp intensitet
                                    icon: mdi:tune-variant
                                    background: var(--gray200)
                                    margin: 0
                                  styles:
                                    label:
                                      - text-transform: capitalize
              - title: Info
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        flex-wrap: wrap
                        font-size: 1.4em
                        line-height: 1.2em
                        gap: 0px
                        margin-bottom: 24px
                      buttons:
                        - layout: name
                          name: Rolf har vasket
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          entity: sensor.weather_now
                          name: >-
                            {{ states('sensor.rolf_total_cleaning_area') |
                            round(0) }} m¬≤
                          styles:
                            name:
                              color: var(--black)
                            button:
                              padding: 2px 8px
                              flex-basis: 1
                              flex-shrink: 0
                              display: flex
                              background-color: var(--gray1000)
                              border-radius: 24px
                        - layout: name
                          name: som tilsvarer ca
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          name: >-
                            {{ (states('sensor.rolf_total_cleaning_area') |
                            round(0) / 7140) | round(1) }} fotballbaner
                          styles:
                            name:
                              color: var(--black)
                            button:
                              padding: 2px 8px
                              flex-basis: 1
                              flex-shrink: 0
                              display: flex
                              background-color: var(--gray1000)
                              border-radius: 24px
                        - layout: name
                          name: ', det har han brukt mer enn'
                          styles:
                            button:
                              margin-left: '-6px'
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          name: >-
                            {% set time =
                            states('sensor.rolf_arbeidstid').split(':') %} {%
                            set total_hours = time[0] | int %} {% set days =
                            (total_hours / 24) | int %} {% set remaining_hours =
                            total_hours % 24 %} {{ days }} dager og {{
                            remaining_hours }} timer
                          styles:
                            name:
                              color: var(--black)
                            button:
                              padding: 2px 8px
                              flex-basis: 1
                              flex-shrink: 0
                              display: flex
                              background-color: var(--gray1000)
                              border-radius: 24px
                        - layout: name
                          name: p√• til sammen.
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          trigger_update:
                            - vacuum.rolf
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: Hovedb√∏rste
                            icon: mdi:broom
                            main_text: |
                              [[[
                                return Math.round(states['sensor.rolf_main_brush_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]] 
                        - type: custom:button-card
                          trigger_update:
                            - vacuum.rolf
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: Filter
                            icon: mdi:air-filter
                            main_text: |
                              [[[
                                return Math.round(states['sensor.rolf_filter_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]] 
                        - type: custom:button-card
                          trigger_update:
                            - vacuum.rolf
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: Sensor
                            icon: mdi:eye-outline
                            main_text: |
                              [[[
                                return Math.round(states['sensor.rolf_sensor_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]]
                        - type: custom:button-card
                          trigger_update:
                            - vacuum.rolf
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: Sideb√∏rste
                            icon: mdi:brush
                            main_text: |
                              [[[
                                return Math.round(states['sensor.rolf_side_brush_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]]            
              - title: Kart
                card:
                  square: false
                  type: grid
                  columns: 1
                  cards:
                    - type: picture
                      image_entity: image.rolf_map_0
                      theme: Mytheme_v2
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Str√∏m
            icon: mdi:power-plug
            state: null
            hash: '#strom'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Str√∏m
                icon: mdi:power-plug
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Priser
                id: priser
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.norgespris_pris_na
                          variables:
                            sub_text: Str√∏mpris n√•<br>Inkl nettleie
                            main_text: |
                              [[[
                                return Math.round(entity.state * 100) / 100
                              ]]]  
                            symbol: kr/kWt
                            icon: mdi:lightning-bolt
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.stromregning_estimate
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: toggle
                              ids:
                                - strom_billig_settings
                          variables:
                            sub_text: Str√∏mregning
                            show_tap_indicator: true
                            symbol: kr
                            main_text: |
                              [[[
                                return (Math.round((entity.state) * 10) / 10)
                              ]]]
                            icon: mdi:cash-fast
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                    - type: custom:local-conditional-card
                      id: strom_billig_settings
                      default: hide
                      card:
                        type: vertical-stack
                        cards:
                          - type: custom:gap-card
                            height: 24
                          - type: custom:button-card
                            name: Str√∏mregning
                            icon: mdi:cash-fast
                            show_label: true
                            label: |
                              [[[ return states['sensor.maned'].state ]]]
                            styles:
                              grid:
                                - grid-template-areas: '"i n l"'
                                - grid-template-columns: min-content min-content 1fr
                              icon:
                                - color: var(--gray1000)
                                - width: 22px
                                - padding-right: 12px
                              card:
                                - background: none
                                - padding: 12px 12px 0px 6px
                                - overflow: visible
                                - '--mdc-ripple-press-opacity': 0
                              name:
                                - color: var(--gray1000)
                                - font-size: 16px
                                - font-weight: 500
                                - justify-self: start
                                - align-self: center
                              label:
                                - justify-self: start
                                - padding-left: 12px
                                - font-size: 14px
                                - color: var(--gray1000)
                                - opacity: '0.7'
                          - type: custom:button-card
                            show_icon: false
                            show_name: false
                            entity: sensor.stromregning_estimate
                            styles:
                              grid:
                                - grid-template-areas: >-
                                    "strom" "nettleie" "fast" "vibb" "solgt"
                                    "totalt"
                                - grid-template-columns: 1fr
                              card:
                                - padding: 6px 20px 20px 20px
                                - background: var(--gray200)
                                - margin-top: 12px
                              custom_fields:
                                strom:
                                  - color: var(--gray1000)
                                  - text-align: left
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - width: 100%
                                  - border-bottom: 1px solid rgba(250, 251, 252, 0.1)
                                  - padding: 5px 0
                                nettleie:
                                  - color: var(--gray1000)
                                  - text-align: left
                                  - font-size: 2em
                                  - font-weight: 300
                                  - width: 100%
                                  - border-bottom: 1px solid rgba(250, 251, 252, 0.1)
                                  - padding: 5px 0
                                fast:
                                  - color: var(--gray1000)
                                  - text-align: left
                                  - font-size: 2em
                                  - font-weight: 300
                                  - width: 100%
                                  - border-bottom: 1px solid rgba(250, 251, 252, 0.1)
                                  - padding: 5px 0
                                vibb:
                                  - color: var(--gray1000)
                                  - text-align: left
                                  - font-size: 2em
                                  - font-weight: 300
                                  - width: 100%
                                  - border-bottom: 1px solid rgba(250, 251, 252, 0.1)
                                  - padding: 5px 0
                                solgt:
                                  - color: var(--gray1000)
                                  - text-align: left
                                  - font-size: 2em
                                  - font-weight: 300
                                  - width: 100%
                                  - border-bottom: 1px solid rgba(250, 251, 252, 0.1)
                                  - padding: 5px 0
                                totalt:
                                  - color: var(--gray1000)
                                  - font-size: 2.6em
                                  - font-weight: 300
                                  - width: 100%
                                  - padding: 5px 0
                            custom_fields:
                              strom: |
                                [[[
                                  return `<div style="display: flex; justify-content: space-between; align-items: end; width: 100%;">
                                            <span style="font-size:14px; opacity: 0.7; font-weight: 400; padding-bottom: 4px">Str√∏m:</span>
                                            <span>
                                              ${Math.round(entity.attributes.strom * 10) / 10}
                                              <span style="font-size:14px; opacity: 0.7; font-weight: 400"> kr</span>
                                            </span>
                                          </div>`
                                ]]]
                              nettleie: |
                                [[[
                                  return `<div style="display: flex; justify-content: space-between; align-items: end; width: 100%;">
                                            <span style="font-size:14px; opacity: 0.7; font-weight: 400; padding-bottom: 4px">Nettleie:</span>
                                            <span>
                                              ${Math.round(entity.attributes.nettleie * 10) / 10}
                                              <span style="font-size:14px; opacity: 0.7; font-weight: 400"> kr</span>
                                            </span>
                                          </div>`
                                ]]]
                              solgt: |
                                [[[
                                  return `<div style="display: flex; justify-content: space-between; align-items: end; width: 100%;">
                                            <span style="font-size:14px; opacity: 0.7; font-weight: 400; padding-bottom: 4px">- Solgt for:</span>
                                            <span>
                                              ${Math.round(entity.attributes.solgtfor * 10) / 10}
                                              <span style="font-size:14px; opacity: 0.7; font-weight: 400"> kr</span>
                                            </span>
                                          </div>`
                                ]]]
                              fast: |
                                [[[
                                  return `<div style="display: flex; justify-content: space-between; align-items: end; width: 100%;">
                                            <span style="font-size:14px; opacity: 0.7; font-weight: 400; padding-bottom: 4px">Fastledd:</span>
                                            <span>
                                              ${states['sensor.energy_level_price'].state}
                                              <span style="font-size:14px; opacity: 0.7; font-weight: 400"> kr</span>
                                            </span>
                                          </div>`
                                ]]]
                              vibb: |
                                [[[
                                  return `<div style="display: flex; justify-content: space-between; align-items: end; width: 100%;">
                                            <span style="font-size:14px; opacity: 0.7; font-weight: 400; padding-bottom: 4px">Vibb:</span>
                                            <span>
                                              39
                                              <span style="font-size:14px; opacity: 0.7; font-weight: 400"> kr</span>
                                            </span>
                                          </div>`
                                ]]]
                              totalt: |
                                [[[
                                  return `<div style="display: flex; justify-content: space-between; align-items: end; width: 100%;">
                                            <span style="font-size:14px; opacity: 0.7; font-weight: 400; padding-bottom: 7px">Totalt:</span>
                                            <span>
                                              ${Math.round(entity.state * 10) / 10}
                                              <span style="font-size:14px; opacity: 0.7; font-weight: 400"> kr</span>
                                            </span>
                                          </div>`
                                ]]]         
                          - type: custom:gap-card
                            height: 12
                    - type: custom:gap-card
                      height: 24
                    - type: custom:simple-tabs
                      alignment: center
                      background-color: none
                      border-color: var(--gray400)
                      text-color: var(--gray400)
                      active-text-color: var(--gray100)
                      active-background: var(--active-small)
                      tabs:
                        - title: Time for time
                          card:
                            type: vertical-stack
                            cards:
                              - type: custom:apexcharts-card
                                card_mod:
                                  style: |
                                    ha-card {
                                      background: var(--gray200)!important;
                                    }        
                                graph_span: 24h
                                experimental:
                                  color_threshold: false
                                apex_config:
                                  chart:
                                    height: 300px
                                  grid:
                                    show: true
                                    borderColor: var(--gray300)
                                  legend:
                                    show: false
                                header:
                                  show: false
                                span:
                                  start: day
                                yaxis:
                                  - min: '|-0.3|'
                                    max: '|+0.3|'
                                    decimals: 1
                                    show: true
                                now:
                                  show: true
                                  label: N√•
                                  color: '#ffb581'
                                all_series_config:
                                  float_precision: 2
                                series:
                                  - entity: sensor.norgespris_pris_na
                                    show:
                                      extremas: true
                                      in_header: false
                                      name_in_header: true
                                      in_chart: true
                                    name: Norgespris
                                    type: line
                                    curve: straight
                                    extend_to: end
                                    stroke_width: 4
                                    opacity: 1
                                    color: var(--blue)
                                    data_generator: >
                                      return entity.attributes.today.map((p) =>
                                      {
                                        return [new Date(p.start), p.value];
                                      });
                        - title: I morgen
                          card:
                            type: vertical-stack
                            cards:
                              - type: custom:apexcharts-card
                                card_mod:
                                  style: |
                                    ha-card {
                                      background: var(--gray200)!important;
                                    }  
                                graph_span: 24h
                                experimental:
                                  color_threshold: false
                                apex_config:
                                  chart:
                                    height: 300px
                                  grid:
                                    show: true
                                    borderColor: var(--gray300)
                                  legend:
                                    show: false
                                header:
                                  show: false
                                span:
                                  start: day
                                  offset: +1d
                                yaxis:
                                  - min: '|-0.3|'
                                    max: '|+0.3|'
                                    decimals: 1
                                    show: true
                                all_series_config:
                                  float_precision: 2
                                series:
                                  - entity: sensor.norgespris_pris_na
                                    show:
                                      extremas: true
                                      in_header: false
                                      name_in_header: true
                                      in_chart: true
                                    name: Norgespris
                                    type: line
                                    curve: straight
                                    extend_to: end
                                    stroke_width: 4
                                    opacity: 1
                                    color: var(--blue)
                                    data_generator: >
                                      return entity.attributes.tomorrow.map((p)
                                      => {
                                        return [new Date(p.start), p.value];
                                      });
                        - title: Eksempler
                          card:
                            type: vertical-stack
                            cards:
                              - type: grid
                                square: false
                                columns: 2
                                cards:
                                  - type: custom:button-card
                                    template: template_sensor_small
                                    entity: sensor.ioniq_ladepris_dum
                                    trigger_update:
                                      - sensor.strompris_inkl_avgifter_v2
                                    variables:
                                      text_main: |
                                        [[[
                                          return entity.state + ' kr'
                                        ]]]
                                      text_sub: Lade 0 til 100%
                                      icon: mdi:car
                                      background: var(--gray200)
                                      margin: 0
                                  - type: custom:button-card
                                    template: template_sensor_small
                                    entity: sensor.strom_kostnad_dusj
                                    trigger_update:
                                      - sensor.strompris_inkl_avgifter_v2
                                    variables:
                                      text_main: |
                                        [[[
                                          return entity.state + ' kr'
                                        ]]]
                                      text_sub: Dusj 10 min
                                      icon: mdi:shower-head
                                      background: var(--gray200)
                                      margin: 0
                                  - type: custom:button-card
                                    template: template_sensor_small
                                    entity: sensor.strom_kostnad_tv
                                    trigger_update:
                                      - sensor.strompris_inkl_avgifter_v2
                                    variables:
                                      text_main: |
                                        [[[
                                          return entity.state + ' kr'
                                        ]]] 
                                      text_sub: TV 1 time
                                      icon: mdi:television-ambient-light
                                      background: var(--gray200)
                                      margin: 0
                                  - type: custom:button-card
                                    template: template_sensor_small
                                    entity: sensor.strom_kostnad_torketrommel
                                    trigger_update:
                                      - sensor.strompris_inkl_avgifter_v2
                                    variables:
                                      text_main: |
                                        [[[
                                          return entity.state + ' kr'
                                        ]]] 
                                      text_sub: T√∏rketrommel
                                      icon: mdi:tumble-dryer
                                      background: var(--gray200)
                                      margin: 0
                                  - type: custom:button-card
                                    template: template_sensor_small
                                    entity: sensor.strom_kostnad_vaskemaskin
                                    trigger_update:
                                      - sensor.strompris_inkl_avgifter_v2
                                    variables:
                                      text_main: |
                                        [[[
                                          return entity.state + ' kr'
                                        ]]]
                                      text_sub: Vaskemaskin
                                      icon: mdi:washing-machine
                                      background: var(--gray200)
                                      margin: 0
                                  - type: custom:button-card
                                    template: template_sensor_small
                                    entity: sensor.strom_kostnad_oppvaskmaskin
                                    trigger_update:
                                      - sensor.strompris_inkl_avgifter_v2
                                    variables:
                                      text_main: |
                                        [[[
                                          return entity.state + ' kr'
                                        ]]] 
                                      text_sub: Oppvaskmaskin
                                      icon: mdi:dishwasher
                                      background: var(--gray200)
                                      margin: 0
              - title: Forbruk
                id: forbruk
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.amsleser_p
                          variables:
                            sub_text: Forbruk n√•
                            symbol: W
                            main_text: |
                              [[[
                                return Math.round(entity.state * 100) / 100
                              ]]]  
                            icon: mdi:home-lightning-bolt
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.amsleser_houruse
                          variables:
                            sub_text: Denne time
                            symbol: kWt
                            main_text: |
                              [[[
                                return Math.round(entity.state * 100) / 100
                              ]]]  
                            icon: mdi:transmission-tower-import
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                    - type: energy-date-selection
                      card_mod:
                        style: >
                          ha-card {background: none;}

                          ha-card > div > hui-energy-period-selector $ div >
                          .label {font-size:10px!important }

                          }
                    - type: energy-usage-graph
                      card_mod:
                        style: |
                          ha-card {background: var(--gray200);}
                          }
                    - type: custom:gap-card
                      height: 12
                    - type: energy-sources-table
                      card_mod:
                        style: >
                          ha-card {
                            background: var(--gray200)!important;
                          }

                          .mdc-data-table {
                            background: var(--gray200)!important;
                          }

                          .mdc-data-table__row {height: 32px!important;}
                          .mdc-data-table__table-container {padding-bottom:
                          12px!important;}            

                          .mdc-data-table__table {
                            white-space: unset!important;
                          }

                          .mdc-data-table__cell, .mdc-data-table__header-cell
                          {border: none!important;}

                          .mdc-data-table .mdc-data-table__header-cell
                          {background:var(--gray200)!important;border-bottom:1px
                          solid var(--gray200)!important}

                          .bullet {width: 16px!important;border-radius:
                          24px!important;border-width: 0!important;}
              - title: Solceller
                id: solceller
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.afore_inverter_pv_total_power
                          variables:
                            sub_text: Produksjon n√•
                            symbol: W
                            main_text: |
                              [[[
                                return Math.round(entity.state * 100) / 100
                              ]]]  
                            icon: mdi:solar-power-variant-outline
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.afore_inverter_production_yearly
                          variables:
                            sub_text: Produksjon i √•r
                            symbol: kWt
                            main_text: |
                              [[[
                                let value = parseInt(entity.state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue;
                              ]]]  
                            icon: mdi:solar-power
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                    - type: energy-date-selection
                      card_mod:
                        style: >
                          ha-card {background: none;}

                          ha-card > div > hui-energy-period-selector $ div >
                          .label {font-size:10px!important }

                          }
                    - type: energy-solar-graph
                      card_mod:
                        style: |
                          ha-card {background: var(--gray200);}
                          }
                    - type: custom:gap-card
                      height: 12
                    - square: false
                      type: grid
                      columns: 2
                      cards:
                        - type: energy-solar-consumed-gauge
                          card_mod:
                            style: |
                              ha-card {background: var(--gray200);}
                              }
                        - type: energy-self-sufficiency-gauge
                          card_mod:
                            style: |
                              ha-card {background: var(--gray200);}
                              }
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Serverrom
            icon: mdi:server
            state: null
            hash: '#server'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Server
                icon: mdi:server
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Home Assistant
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.192_168_10_123_core_0_temperature
                          above: 49.9
                      card:
                        type: custom:button-card
                        entity: sensor.192_168_10_123_core_0_temperature
                        name: >-
                          [[[ return '<strong>Advarsel:</strong> CPU temp er ' +
                          entity.state + '¬∞' ]]]
                        icon: mdi:alert-circle-outline
                        styles:
                          card:
                            - padding: 0
                            - background: var(--orange)
                            - margin-bottom: 12px
                          grid:
                            - grid-template-areas: '"i n"'
                            - grid-template-columns: 76px 1fr
                          img_cell:
                            - justify-self: start
                            - background: rgba(0,0,0, 0.1)
                            - margin: 4px 4px
                            - border-radius: 50%
                            - width: 58px
                            - height: 58px
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: var(--black)
                          name:
                            - justify-self: start
                            - color: var(--black)
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: CPU Temperatur
                            icon: mdi:thermometer
                            symbol: ¬∞
                            main_text: |
                              [[[
                                return (states['sensor.192_168_10_123_core_0_temperature'].state)
                              ]]] 
                        - type: custom:button-card
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: HDD Temperatur
                            icon: mdi:thermometer
                            symbol: ¬∞
                            main_text: |
                              [[[
                                return (states['sensor.proxserr_nvme_temperature'].state)
                              ]]] 
                        - type: custom:button-card
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: CPU
                            symbol: '%'
                            icon: mdi:cpu-64-bit
                            main_text: |
                              [[[
                                return (states['sensor.processor_use'].state)
                              ]]] 
                        - type: custom:button-card
                          template: universal_sensor
                          variables:
                            size: small
                            sub_text: Minne
                            symbol: '%'
                            icon: mdi:memory
                            main_text: |
                              [[[
                                return (states['sensor.memory_use_percent'].state)
                              ]]]      
                      columns: 2
                    - type: custom:button-card
                      template: universal_sensor
                      entity: sensor.disk_use_percent_config
                      variables:
                        sub_text: HDD brukt
                        icon: mdi:harddisk
                        margin: 12px
                        background_color: var(--gray200)
                        text_color: var(--gray1000)
                        show_bar: true
                        symbol: '%'
                        bar_invert_colors: true
                badge: >-
                  {{ states('sensor.192_168_10_123_core_0_temperature') |
                  float(0) > 44.9 }}
              - title: Unraid
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:mysmart-prose-card
                      content_style:
                        font-size: 1.4em
                        line-height: 2em
                        padding: 12px 0 12px 0
                      card_style:
                        background: none
                      content: |
                        [[ 
                          {% if states('sensor.homeserr_cpu_temperature') | float(0) > 49.9 %}
                            {% raw %}{{button:cpu}}{% endraw %}
                          {% endif %}
                        ]]
                        Oppetiden til serveren er {{button:uptime}} og
                        str√∏mforbruket er {{button:power}}.
                      buttons:
                        - id: uptime
                          entity: sensor.dashboard_office
                          attribute: uptime
                          style:
                            background: var(--gray1000)
                            color: var(--gray100)
                            cursor: context-menu
                          tap_action:
                            action: none
                        - id: cpu
                          entity: sensor.homeserr_cpu_temperature
                          icon: mdi:alert-circle
                          unit: ¬∞
                          icon_position: start
                          prefix: CPU temp er
                          style:
                            background: var(--red)
                            color: var(--gray100)
                            cursor: context-menu
                            padding: 4px 12px 4px 4px
                          tap_action:
                            action: none
                        - id: power
                          entity: sensor.dashboard_office
                          attribute: strom
                          unit: W
                          style:
                            background: var(--gray1000)
                            color: var(--gray100)
                            cursor: context-menu
                          tap_action:
                            action: none
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          name: Panelovn
                          show_icon: false
                          show_label: false
                          custom_fields:
                            temp: |
                              [[[ 
                                var temp = states['sensor.office_sensor_temphum_temperature'].state;
                                var hum = states['sensor.office_sensor_temphum_humidity'].state;
                                return `
                                ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                                `
                              ]]]  
                            btn1:
                              card:
                                type: custom:paper-buttons-row
                                styles:
                                  display: flex
                                  flex-direction: column
                                  flex-wrap: wrap
                                buttons:
                                  - icon: mdi:chevron-up
                                    ripple: none
                                    name: false
                                    tap_action:
                                      action: call-service
                                      service: input_number.increment
                                      target:
                                        entity_id:
                                          - input_number.office_heater_target
                                      data:
                                        amount: 1
                                    styles:
                                      icon:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray100)
                                        border-radius: 40px 40px 0 0
                                        width: 46px
                                        height: 40px
                                        z-index: 1
                                        border-width: 1px 1px 0 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                                  - name: >-
                                      {{
                                      states('input_number.office_heater_target')
                                      | round(0) }}¬∞
                                    ripple: none
                                    icon: false
                                    styles:
                                      name:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray100)
                                        border-radius: 0
                                        width: 46px
                                        height: 26px
                                        z-index: 1
                                        border-width: 0 1px 0 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                                  - icon: mdi:chevron-down
                                    ripple: none
                                    name: false
                                    tap_action:
                                      action: call-service
                                      service: input_number.decrement
                                      target:
                                        entity_id:
                                          - input_number.office_heater_target
                                      data:
                                        amount: 1
                                    styles:
                                      icon:
                                        color: var(--gray1000)
                                      button:
                                        background: var(--gray100)
                                        border-radius: 0 0 40px 40px
                                        width: 46px
                                        height: 30px
                                        z-index: 1
                                        border-width: 0 1px 1px 1px
                                        border-style: solid
                                        border-color: var(--gray400)
                          styles:
                            card:
                              - padding: 4px
                              - overflow: visible
                              - height: 180px
                              - background: var(--gray200)
                              - height: 142px
                            grid:
                              - grid-template-areas: '"n btn1" "l btn1" "temp btn1"'
                              - grid-template-rows: min-content min-content 1fr
                              - grid-template-columns: 1fr min-content
                            icon:
                              - width: 28px
                              - color: var(--black)
                            img_cell:
                              - justify-self: end
                              - background: var(--green)
                              - border-radius: 100%
                              - align-self: start
                              - width: 60px
                              - height: 60px
                            name:
                              - justify-self: start
                              - text-align: left
                              - font-size: 14px
                              - color: var(--gray1000)
                              - opacity: '0.7'
                              - padding: 14px 0 0 20px
                            custom_fields:
                              btn1:
                                - align-self: end
                                - justify-self: end
                              temp:
                                - justify-self: start
                                - align-self: end
                                - font-size: 2em
                                - font-weight: 300
                                - color: var(--gray1000)
                                - line-height: 1.5em
                                - padding: 0 0 4px 20px
                        - type: vertical-stack
                          cards:
                            - type: custom:button-card
                              template: universal_sensor
                              variables:
                                size: small
                                sub_text: CPU
                                symbol: '%'
                                icon: mdi:cpu-64-bit
                                main_text: |
                                  [[[
                                    return parseFloat(states['sensor.homeserr_cpu_usage'].state).toFixed(1)
                                  ]]] 
                            - type: custom:button-card
                              template: universal_sensor
                              variables:
                                size: small
                                margin: 12px
                                sub_text: Minne
                                icon: mdi:memory
                                symbol: '%'
                                main_text: |
                                  [[[
                                    return parseFloat(states['sensor.homeserr_ram_usage_2'].state).toFixed(1)
                                  ]]] 
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.homeserr_disk_cache_usage
                          variables:
                            main_text: |
                              [[[
                                return parseFloat(states['sensor.homeserr_disk_cache_usage'].state).toFixed(1)
                              ]]]           
                            sub_text: Cache brukt
                            icon: mdi:harddisk
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                            show_bar: true
                            symbol: '%'
                            bar_invert_colors: false
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.homeserr_array_usage
                          variables:
                            main_text: |
                              [[[
                                return parseFloat(states['sensor.homeserr_array_usage'].state).toFixed(1)
                              ]]]            
                            sub_text: Array brukt
                            icon: mdi:harddisk
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                            show_bar: true
                            symbol: '%'
                            bar_invert_colors: false
                      columns: 2
                    - square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          template: template_toggle_card
                          tap_action:
                            action: toggle
                          variables:
                            main_text: Alternativ hastighet
                            icon: mdi:download
                            background: var(--gray200)
                            entity: switch.qbittorrent_alternative_speed
                            margin: 12px
                badge: >-
                  {{ states('sensor.homeserr_cpu_temperature') | float(0) > 49.9
                  }}
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Ioniq 5
            icon: mdi:car
            state: null
            hash: '#bil'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Ioniq 5
                icon: mdi:car
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: conditional
            conditions:
              - condition: numeric_state
                entity: sensor.ioniq_5_ev_battery_level_2
                below: 31
            card:
              type: custom:button-card
              name: >-
                [[[ return '<strong>Advarsel:</strong> Batteriet er ' +
                states['sensor.ioniq_5_ev_battery_level_2'].state + '%']]]
              icon: mdi:alert-circle-outline
              styles:
                card:
                  - padding: 0
                  - background: var(--red)
                grid:
                  - grid-template-areas: '"i n"'
                  - grid-template-columns: 76px 1fr
                img_cell:
                  - justify-self: start
                  - background: rgba(0,0,0, 0.1)
                  - margin: 4px 4px
                  - border-radius: 50%
                  - width: 58px
                  - height: 58px
                icon:
                  - width: 30px
                  - height: 30px
                  - color: var(--black)
                name:
                  - justify-self: start
                  - color: var(--black)
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                template: universal_sensor
                entity: sensor.ioniq_5_ev_battery_level_2
                variables:
                  sub_text: EV Batteri
                  icon: mdi:ev-station
                  background_color: var(--gray200)
                  text_color: var(--gray1000)
                  show_bar: true
                  symbol: '%'
                  bar_invert_colors: true
              - type: custom:button-card
                template: universal_sensor
                entity: sensor.ioniq_5_car_battery_level_2
                variables:
                  sub_text: 12V Batteri
                  icon: mdi:car-battery
                  background_color: var(--gray200)
                  text_color: var(--gray1000)
                  show_bar: true
                  symbol: '%'
                  bar_invert_colors: true
            columns: 2
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Info
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.ioniq_5_ev_range_2
                          variables:
                            sub_text: Rekkevidde
                            symbol: km
                            main_text: |
                              [[[
                                return entity.state
                              ]]] 
                            icon: mdi:road-variant
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.ioniq_5_odometer_2
                          variables:
                            sub_text: Kilometerstand
                            symbol: km
                            main_text: |
                              [[[
                                let value = parseInt(entity.state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue
                              ]]]
                            icon: mdi:speedometer
                            background_color: var(--gray200)
                            text_color: var(--gray1000)
                    - type: custom:mini-graph-card
                      entities:
                        - entity: sensor.ioniq_5_daily
                      name: Daglig kj√∏ring
                      hours_to_show: 168
                      aggregate_func: max
                      group_by: date
                      font_size: 50
                      font_size_header: 12
                      hour24: true
                      show:
                        graph: bar
                        legend: false
                        icon: false
                        labels: false
                        labels_secondary: false
                      card_mod:
                        style: |
                          ha-card {
                            background: var(--gray200);margin-top: 12px;
                          }    
                          .header {padding: 2px 8px 8px 16px;}
                          .name > span {
                            font-weight: 400!important;font-size:14px!important
                          } 
                          .state__uom {
                          font-weight: 300!important;
                          font-size: 14px!important;
                          opacity:1!important;
                          margin-top:0!important;
                          margin-bottom: 2px!important;
                          }
                          .state__value {font-size: 32px!important;}
              - title: Klima
                card:
                  type: vertical-stack
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: timer.ioniq_5_heat
                          tap_action:
                            action: perform-action
                            perform_action: automation.trigger
                            target:
                              entity_id: automation.automation_ioniq_climate
                            data:
                              skip_condition: true
                          variables:
                            sub_text: Oppvarming
                            show_tap_indicator: true
                            main_text: test
                            icon: mdi:heat-wave
                            background_color: var(--active-big)
                            text_color: var(--gray100)
                            show_timer: true
                            enable_off_state_styling: true
                            off_state_value: idle
                            off_state_main_text: Venter
                            off_state_background_color: var(--gray200)
                            off_state_text_color: var(--gray1000)
                        - type: custom:button-card
                          template: universal_sensor
                          entity: timer.ioniq_5_cool
                          tap_action:
                            action: perform-action
                            perform_action: automation.trigger
                            target:
                              entity_id: automation.ioniq_5_klima_nedkjoling
                            data:
                              skip_condition: true
                          variables:
                            sub_text: Nedkj√∏ling
                            show_tap_indicator: true
                            main_text: test
                            icon: mdi:snowflake-thermometer
                            background_color: var(--active-big)
                            text_color: var(--gray100)
                            show_state: true
                            enable_off_state_styling: true
                            off_state_value: idle
                            off_state_main_text: Venter
                            off_state_background_color: var(--gray200)
                            off_state_text_color: var(--gray1000)
                    - type: conditional
                      conditions:
                        - condition: or
                          conditions:
                            - condition: state
                              entity: timer.ioniq_5_cool
                              state: active
                            - condition: state
                              entity: timer.ioniq_5_heat
                              state: active
                      card:
                        type: custom:button-card
                        template: template_trigger_card
                        tap_action:
                          action: perform-action
                          perform_action: automation.trigger
                          target:
                            entity_id: automation.ioniq_climate_off
                          data:
                            skip_condition: true
                        variables:
                          text_main: Avbryt klima
                          icon: mdi:stop
                          background: var(--red)
                          color: var(--black)
                          margin: 12px
                badge: >-
                  {{ is_state('timer.ioniq_5_heat', 'active') or
                  is_state('timer.ioniq_5_cool', 'active') }}
              - title: Lading
                badge: >-
                  {{
                  is_state('binary_sensor.outdoor_carcharger_contact_contact',
                  'off') }}
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: binary_sensor.outdoor_carcharger_contact_contact
                          state: 'off'
                      card:
                        type: custom:button-card
                        name: '[[[ return ''Bilen lades'']]]'
                        icon: mdi:ev-station
                        styles:
                          card:
                            - padding: 0
                            - margin-bottom: 12px
                            - background: var(--green)
                          grid:
                            - grid-template-areas: '"i n"'
                            - grid-template-columns: 76px 1fr
                          img_cell:
                            - justify-self: start
                            - background: rgba(0,0,0, 0.1)
                            - margin: 4px 4px
                            - border-radius: 50%
                            - width: 58px
                            - height: 58px
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: var(--black)
                          name:
                            - justify-self: start
                            - color: var(--black)
                    - type: grid
                      square: false
                      columns: 5
                      cards:
                        - type: custom:button-card
                          name: 50%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit_2
                          tap_action:
                            action: call-service
                            service: script.ioniq_soc_limit
                            data:
                              target_soc: 50
                          state:
                            - value: '50'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 60%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit_2
                          tap_action:
                            action: call-service
                            service: script.ioniq_soc_limit
                            data:
                              target_soc: 60
                          state:
                            - value: '60'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 70%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit_2
                          tap_action:
                            action: call-service
                            service: script.ioniq_soc_limit
                            data:
                              target_soc: 70
                          state:
                            - value: '70'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 80%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit_2
                          tap_action:
                            action: call-service
                            service: script.ioniq_soc_limit
                            data:
                              target_soc: 80
                          state:
                            - value: '80'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 100%
                          entity: number.ioniq_5_ac_charging_limit_2
                          aspect_ratio: 1/1
                          show_icon: false
                          tap_action:
                            action: call-service
                            service: script.ioniq_soc_limit
                            data:
                              target_soc: 100
                          state:
                            - value: '100'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        flex-wrap: wrap
                        font-size: 1.4em
                        line-height: 1.2em
                        gap: 0px
                        margin-bottom: 24px
                        margin-top: 12px
                      buttons:
                        - layout: name
                          name: Det vil ta ca
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          name: >-
                            {% set hours = state_attr('sensor.ioniq_custom',
                            'ladetid')[0] %} {% set minutes =
                            state_attr('sensor.ioniq_custom', 'ladetid')[1] %}
                            {{ hours ~ " time " if hours == 1 else hours ~ "
                            timer " if hours > 1 else "" }} {%- if minutes > 0
                            %}
                              {%- if hours > 0 %}og {% endif %}{{ minutes }} minutter
                            {%- endif %}
                          styles:
                            name:
                              color: var(--black)
                            button:
                              padding: 2px 8px
                              flex-basis: 1
                              flex-shrink: 0
                              display: flex
                              background-color: var(--gray1000)
                              border-radius: 24px
                        - layout: name
                          name: √• lade til
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          name: '{{ states(''number.ioniq_5_ac_charging_limit_2'') }} %'
                          styles:
                            name:
                              color: var(--black)
                            button:
                              padding: 2px 8px
                              flex-basis: 1
                              flex-shrink: 0
                              display: flex
                              background-color: var(--gray1000)
                              border-radius: 24px
                        - layout: name
                          name: ','
                          styles:
                            button:
                              margin-left: '-6px'
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          name: og det vil koste ca
                          styles:
                            button:
                              margin-left: '-6px'
                              flex-basis: 1
                              flex-shrink: 0
                            name:
                              color: var(--gray1000)
                        - layout: name
                          name: >-
                            {{ state_attr('sensor.ioniq_custom', 'ladepris') }}
                            kroner
                          styles:
                            name:
                              color: var(--black)
                            button:
                              padding: 2px 8px
                              flex-basis: 1
                              flex-shrink: 0
                              display: flex
                              background-color: var(--gray1000)
                              border-radius: 24px
                    - type: custom:button-card
                      template: template_toggle_card
                      tap_action:
                        action: toggle
                      variables:
                        main_text: Smartlading
                        icon: mdi:ev-station
                        background: var(--gray200)
                        entity: input_boolean.smartlading
          - type: custom:gap-card
            height: 36
      - type: custom:mysmart-floating-navbar
        styles:
          background: var(--gray1000)
          color: var(--gray100)
          active_color: var(--gray100)
          blur: 5px
          width: 100%
          icon_size: 24px
          button_padding: 12px
          margin_left: 128px
          spacer_height: 0px
        items:
          - icon: mdi:robot-vacuum
            badge_template: |
              states['binary_sensor.rolf_water_shortage']?.state === 'on'
            tap_action:
              action: navigate
              navigation_path: '#rolf'
          - icon: mdi:power-plug
            tap_action:
              action: navigate
              navigation_path: '#strom'
          - icon: mdi:music
            tap_action:
              action: navigate
              navigation_path: '?tab=musikk#media'
          - icon: mdi:car
            badge_template: >
              parseFloat(states['sensor.ioniq_5_ev_battery_level_2']?.state) <
              31

              || states['timer.ioniq_5_heat']?.state === 'active'

              || states['timer.ioniq_5_cool']?.state === 'active'
            tap_action:
              action: navigate
              navigation_path: '#bil'
          - icon: mdi:cctv
            tap_action:
              action: navigate
              navigation_path: /dashboard-kamera/0
          - icon: mdi:message
            tap_action:
              action: navigate
              navigation_path: '#message'
          - icon: mdi:dots-horizontal
            sub_items:
              - icon: mdi:server
                badge_template: >
                  parseFloat(states['sensor.homeserr_cpu_temperature']?.state) >
                  55 || 
                  parseFloat(states['sensor.192_168_10_123_core_0_temperature']?.state)
                  > 55  
                tap_action:
                  action: navigate
                  navigation_path: '#server'
              - icon: mdi:tune-variant
                tap_action:
                  action: navigate
                  navigation_path: '#settings'
              - icon: mdi:list-box
                tap_action:
                  action: navigate
                  navigation_path: /todo
              - icon: mdi:menu
                tap_action:
                  action: toggle-menu
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: screen
                media_query: '(min-width: 768px)'
            card:
              type: custom:button-card
              entity: sensor.neste_tomming_2
              show_icon: false
              state:
                - operator: template
                  value: |
                    [[[
                      return states['sensor.neste_tomming_2'].state.split(',')[0] === "0"
                    ]]]
                  styles:
                    card:
                      - background: var(--active-big)
                    label:
                      - color: var(--black)
                    name:
                      - color: var(--black)
                    custom_fields:
                      type:
                        - color: var(--black)
              name: >
                [[[ return states['sensor.neste_tomming_2'].state.split(',')[0];
                ]]]
              label: |
                [[[
                  const days = states['sensor.neste_tomming_2'].state.split(',')[0];
                  if (days === undefined || days === null || isNaN(days)) {
                    return 'Ukjent tid til s√∏ppelt√∏mming';
                  } else if (days === '0') {
                    return 'S√∏ppel t√∏mmes i dag';
                  } else if (days === '1') {
                    return 'Dag til neste s√∏ppelt√∏mming';
                  } else {
                    return 'Dager til neste s√∏ppelt√∏mming';
                  }
                ]]]
              show_label: true
              custom_fields:
                type: >
                  [[[ return
                  states['sensor.neste_tomming_2'].state.split(',')[1]; ]]]
              tap_action:
                action: navigate
                navigation_path: '#soppel'
              styles:
                grid:
                  - grid-template-areas: '"n l" "n type";'
                  - grid-template-columns: 30% 1fr;
                  - grid-template-rows: 1fr 1fr;
                name:
                  - color: var(--gray1000)
                  - font-size: 2.6em
                  - align-self: center
                  - font-weight: 300
                card:
                  - border: none
                  - '--mdc-ripple-press-opacity': 0
                  - margin-top: 12px
                label:
                  - justify-self: start
                  - align-self: end
                  - font-size: 18px
                  - font-weight: 500
                  - color: var(--gray1000)
                  - text-align: left;
                custom_fields:
                  type:
                    - justify-self: start
                    - font-size: 14px
                    - line-height: 14px
                    - font-weight: 500
                    - color: var(--gray1000)
        view_layout:
          grid-area: right
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Lys
            icon: mdi:lightbulb-group-outline
            state: null
            hash: '#lys'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Lys
                icon: mdi:lightbulb-group-outline
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: var(--gray100)
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: F√∏rste etg
                card:
                  type: custom:simple-tabs
                  alignment: center
                  background-color: var(--gray100)
                  border-color: var(--gray400)
                  text-color: var(--gray400)
                  active-text-color: var(--gray100)
                  active-background: var(--active-small)
                  container_background: >-
                    linear-gradient(122deg,rgba(58, 58, 58, 1) 0%, rgba(58, 58,
                    58, 0.5 ) 100%)
                  container_padding: 12px
                  container_rounding: 32px
                  tabs:
                    - title: Stue
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.livingroom_light_ceiling_left
                              - name: Taklys Sofa
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.livingroom_light_ceiling_right
                              - name: Taklys Spisebord
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - square: false
                            type: grid
                            cards:
                              - type: custom:decluttering-card
                                template: light_toggle
                                variables:
                                  - entity: switch.livingroom_powerstrip_sofa_l3
                                  - name: Bak Sofa
                                  - icon: mdi:sofa
                              - type: custom:decluttering-card
                                template: light_toggle
                                variables:
                                  - entity: light.livingroom_plug_under_trapp
                                  - name: Under Trapp
                                  - icon: mdi:stairs
                            columns: 2
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.livingroom_light_bystairs
                              - name: Taklys ved Trapp
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                    - title: Kj√∏kken
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.kitchen_light_dimmer_left
                              - name: Benklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.kitchen_light_dimmer_right
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                    - title: Gang
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.hallway_light_ceiling_2
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.outdoor_light_carport
                              - name: Utelys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                    - title: Bad
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.bathroomdown_light_ceiling
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
              - title: Andre etg
                card:
                  type: custom:simple-tabs
                  alignment: center
                  background-color: var(--gray100)
                  border-color: var(--gray400)
                  text-color: var(--gray400)
                  active-text-color: var(--gray100)
                  active-background: var(--active-small)
                  container_background: >-
                    linear-gradient(122deg,rgba(58, 58, 58, 1) 0%, rgba(58, 58,
                    58, 0.5 ) 100%)
                  container_padding: 12px
                  container_rounding: 32px
                  tabs:
                    - title: Oppe
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.upstairs_light_ceiling
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.upstairs_light_ceilingstairs_dimmerdown
                              - name: Taklys Trapp
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.upstairs_light_nightlight
                              - name: Nattlys lampe
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - square: false
                            type: grid
                            cards:
                              - type: custom:decluttering-card
                                template: light_toggle
                                variables:
                                  - entity: light.upstairs_plug_desklamp
                                  - name: Lampe Pult
                                  - icon: '[[[ return entity.attributes.icon ]]]'
                            columns: 2
                    - title: Soverom
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.bedroom_light_ceiling
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.bedroom_light_bed
                              - name: Sengegavl
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - square: false
                            type: grid
                            cards:
                              - type: custom:decluttering-card
                                template: light_toggle
                                variables:
                                  - entity: light.bedroom_light_Sarah
                                  - name: Sarah
                                  - icon: '[[[ return entity.attributes.icon ]]]'
                              - type: custom:decluttering-card
                                template: light_toggle
                                variables:
                                  - entity: light.bedroom_light_Ted
                                  - name: Ted
                                  - icon: '[[[ return entity.attributes.icon ]]]'
                            columns: 2
                    - title: Bad oppe
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.bathroomup_light_ceiling
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.bathroomup_light_cabinet
                              - name: Skaplys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                    - title: Anna
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.Anna_light_ceiling
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
                    - title: Tina
                      icon: ''
                      card:
                        type: grid
                        columns: 1
                        square: false
                        cards:
                          - type: custom:decluttering-card
                            template: light_slider
                            variables:
                              - entity: light.Tina_light_ceiling
                              - name: Taklys
                              - icon: '[[[ return entity.attributes.icon ]]]'
                              - background: var(--gray100)
              - title: Lys p√•
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 1
                        square: false
                      card_param: cards
                      filter:
                        include:
                          - domain: light
                            state: 'on'
                            options:
                              type: custom:decluttering-card
                              template: light_slider
                              variables:
                                - entity: this.entity_id
                                - name: null
                                - icon: null
                                - background: var(--gray200)
                        exclude:
                          - entity_id: light.0xc4988*
                          - entity_id: light.hallway_bulb_roof_*
                          - entity_id: light.upstairs_bulb_roof_*
                          - entity_id: light.baby*
                          - entity_id: light.upstairs_plug_desklamp
                          - entity_id: light.livingroom_plug_under_trapp
                          - entity_id: light.upstairs_light_ceilingstairs_dimmerup
                      sort:
                        method: last_changed
                        reverse: true
                        numeric: false
                      show_empty: true
                    - type: custom:gap-card
                      height: 12
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 2
                        square: false
                      card_param: cards
                      filter:
                        include:
                          - entity_id: >-
                              /light.(upstairs_plug_desklamp|livingroom_plug_under_trapp)/
                            state: 'on'
                            options:
                              type: custom:decluttering-card
                              template: light_toggle
                              variables:
                                - entity: this.entity_id
                                - name: null
                                - icon: null
                                - background: var(--gray200)
                        exclude: []
                      sort:
                        method: last_changed
                        reverse: true
                        numeric: false
                      show_empty: true
              - title: Lys av
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 1
                        square: false
                      card_param: cards
                      filter:
                        include:
                          - domain: light
                            state: 'off'
                            options:
                              type: custom:decluttering-card
                              template: light_slider
                              variables:
                                - entity: this.entity_id
                                - name: null
                                - icon: null
                                - background: var(--gray200)
                        exclude:
                          - entity_id: light.0xc4988*
                          - entity_id: light.hallway_bulb_roof_*
                          - entity_id: light.upstairs_bulb_roof_*
                          - entity_id: light.baby*
                          - entity_id: light.upstairs_plug_desklamp
                          - entity_id: light.livingroom_plug_under_trapp
                          - entity_id: light.upstairs_light_ceilingstairs_dimmerup
                      sort:
                        method: last_changed
                        reverse: true
                        numeric: false
                      show_empty: true
                    - type: custom:gap-card
                      height: 12
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 2
                        square: false
                      card_param: cards
                      filter:
                        include:
                          - entity_id: >-
                              /light.(upstairs_plug_desklamp|livingroom_plug_under_trapp)/
                            state: 'off'
                            options:
                              type: custom:decluttering-card
                              template: light_toggle
                              variables:
                                - entity: this.entity_id
                                - name: null
                                - icon: null
                                - background: var(--gray200)
                        exclude: []
                      sort:
                        method: last_changed
                        reverse: true
                        numeric: false
                      show_empty: true
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: S√∏ppelt√∏mming
            icon: mdi:trash-can
            state: null
            hash: '#soppel'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: S√∏ppelt√∏mming
                icon: mdi:trash-can
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:auto-entities
            card:
              type: grid
              columns: 2
              square: false
            card_param: cards
            filter:
              include:
                - entity_id: >-
                    /sensor.(glass_og_metallemballasje|plastemballasje|papp_og_papir|restavfall)/
                  options:
                    type: custom:button-card
                    template: template_sensor_big_alt
                    entity: this.entity_id
                    variables:
                      margin: 0
                      text_sub: '[[[ return entity.attributes.friendly_name ]]]'
                      text_main: |
                        [[[
                          if (entity.attributes.days_to_pickup === 0) {
                            return 'I dag'
                          } else {
                            return entity.attributes.days_to_pickup + '<span style="font-size:14px;line-height:1.5em"> dager</span>'
                          }
                        ]]]
                      text_alt: |
                        [[[ 
                            const date = new Date(entity.attributes.raw_date);
                            const day = date.getDate();
                            const month = date.toLocaleString('no', { month: 'short' }).toLowerCase();
                            return day + '. ' + month;
                        ]]]          
                      icon: null
            sort:
              method: attribute
              attribute: days_to_pickup
              numeric: true
              reverse: false
            show_empty: true
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Media
            icon: mdi:television-classic
            state: null
            hash: '#media'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Media
                icon: mdi:television-classic
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            default_tab:
              - tab: 1
                conditions:
                  - entity: media_player.stue_oppe
                    state: playing
              - tab: 1
                conditions:
                  - entity: media_player.stue
                    state: playing
              - tab: 1
                conditions:
                  - entity: media_player.kjokken
                    state: playing
              - tab: 2
                conditions:
                  - entity: media_player.tv_stue
                    state: 'on'
              - tab: 1
            tabs:
              - title: Musikk
                card:
                  type: vertical-stack
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: custom:expander-card
                          child-margin-top: 0px
                          padding: 6px 0
                          title-card-button-overlay: false
                          title-card-clickable: true
                          expander-card-background: var(--gray200)
                          button-background: none
                          expander-card-background-expanded: var(--gray200)
                          header-color: var(--gray1000)
                          child-padding: 12px
                          title-card:
                            type: custom:button-card
                            name: Favoritter
                            icon: mdi:star-box
                            show_label: false
                            styles:
                              grid:
                                - grid-template-areas: '"i n"'
                                - grid-template-columns: min-content 1fr
                              icon:
                                - color: var(--gray1000)
                                - width: 22px
                                - padding-right: 12px
                                - padding-left: 12px
                              card:
                                - background: none
                                - padding: 12px 0px 12px 6px
                                - overflow: visible
                                - '--mdc-ripple-press-opacity': 0
                              name:
                                - color: var(--gray1000)
                                - font-size: 16px
                                - font-weight: 500
                                - justify-self: start
                                - align-self: center
                          cards:
                            - type: custom:sonos-card
                              sections:
                                - media browser
                              hideBrowseMediaButton: true
                              favoritesHideTitleForThumbnailIcons: true
                              artworkAsBackground: false
                              showBrowseMediaInPlayerSection: false
                              sortFavoritesByType: false
                              startSection: media browser
                              favoritesItemsPerRow: 4
                              card_mod:
                                style:
                                  sonos-media-browser$ sonos-media-browser-icons$: >
                                    .icons {            
                                      border-radius: 0!important;x
                                    }                      

                                    ha-control-button {
                                      --control-button-padding: 0px;
                                    }    

                                    ha-control-button .thumbnail {margin:
                                    0px!important;}
                                  sonos-media-browser$: |
                                    sonos-media-browser-header {
                                      display: none;
                                    }
                                  .: |
                                    ha-card {            
                                      background:none !important;
                                      border-radius: 0!important;
                                    }     
                        - type: custom:gap-card
                          height: 24
                        - type: conditional
                          conditions:
                            - condition: or
                              conditions:
                                - condition: state
                                  entity: media_player.stue
                                  state:
                                    - playing
                                    - paused
                                - condition: state
                                  entity: media_player.stue_oppe
                                  state:
                                    - playing
                                    - paused
                                - condition: state
                                  entity: media_player.kjokken
                                  state:
                                    - playing
                                    - paused
                          card:
                            type: vertical-stack
                            cards:
                              - type: custom:sonos-card
                                sections:
                                  - player
                                artworkAsBackground: true
                                heightPercentage: 30
                                card_mod:
                                  style:
                                    sonos-player$: >
                                      sonos-player-header, sonos-player-controls
                                      {
                                        display: none;
                                      }
                              - type: custom:sonos-card
                                heightPercentage: auto
                                sections:
                                  - player
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {            
                                      background: none;
                                      border-radius: 0;
                                      margin: 30px 0 -5px 0;
                                      --accent-color: var(--gray1000);

                                      }  
                                    sonos-player$: >
                                      .artwork {display: none;}      

                                      .header
                                      {margin:0!important;padding:0!important;}

                                      .controls {
                                        display: none;
                                      }     
                                    sonos-player$ sonos-player-header$: >
                                      .entity,.artist-album, sonos-progress
                                      {display: none;}

                                      .song
                                      {font-weight:500!important;font-size:22px!important;}

                                      .info {text-align: center!important;}
                              - type: custom:sonos-card
                                sections:
                                  - player
                                skipApplyButtonWhenGrouping: true
                                heightPercentage: 0px
                                card_mod:
                                  style:
                                    .: |
                                      ha-card {            
                                      background: none;  
                                    sonos-player$: >
                                      .artwork {display: none;}      

                                      .header
                                      {margin:0!important;padding:0!important;}
                                    sonos-player$ sonos-player-header$: |
                                      .info {display:none}
                                    sonos-player$ sonos-player-controls$: |
                                      sonos-ha-player,ha-icon-button {
                                        --mdc-icon-button-size: 4rem !important;
                                        color: var(--gray1000);
                                      }  
                                      .big-icon {
                                        background:none;
                                        border-radius: 50%;
                                        color: var(--pink);
                                        padding: 20px;
                                        --mdc-icon-size: 5.5rem !important;
                                      }      
                                      sonos-volume {display:none}
                        - type: custom:sonos-card
                          heightPercentage: auto
                          sections:
                            - grouping
                          card_mod:
                            style:
                              .: |
                                ha-card {            
                                background: none;
                                overflow:visible !important;
                                color: white !important;
                                --secondary-text-color: var(--gray1000);
                                }    
                              sonos-grouping$: |
                                sonos-grouping-button {            
                                  display: none;
                                }  
                                .predefined-groups {margin:0!important}
                                .item {padding:0 0 8px 0!important}
                              sonos-grouping$ sonos-volume$: |
                                ha-icon-button {display:none}
                    - type: custom:button-card
                      entity: input_boolean.disco_toggle
                      triggers_update: all
                      name: Disko
                      show_icon: true
                      icon: mdi:alarm-light-outline
                      tap_action:
                        action: toggle
                      state:
                        - value: 'on'
                          custom_fields:
                            state: Diskolys er p√•
                          styles:
                            card:
                              - background: var(--active-big)
                              - margin-bottom: 12px
                            name:
                              - color: var(--black)
                            label:
                              - color: var(--black)
                            custom_fields:
                              state:
                                - color: var(--black)
                            icon:
                              - color: var(--black)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                        - value: 'off'
                          custom_fields:
                            state: Disko er av
                          styles:
                            card:
                              - background: var(--red)
                            img_cell:
                              - background: rgba(0,0,0, 0.1)
                            icon:
                              - color: var(--black)
                            name:
                              - color: var(--black)
                            custom_fields:
                              state:
                                - color: var(--black)
                      styles:
                        card:
                          - height: 66px
                          - border-radius: 75px
                          - padding: 4px 20px 4px 4px
                          - background: var(--gray200)
                          - margin-top: 24px
                        grid:
                          - grid-template-columns: 76px 1fr min-content
                          - grid-template-areas: '"i state icon" "i n icon"'
                        icon:
                          - width: 30px
                          - color: var(--gray1000)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - background: rgba(var(--highlight))
                          - padding: 14px
                          - border-radius: 50%
                        name:
                          - justify-self: start
                          - font-size: 14px
                          - color: var(--gray1000)
                          - opacity: 0.7
                          - padding-bottom: 7px
                        custom_fields:
                          icon: null
                          state:
                            - justify-self: start
                            - font-size: 16px
                            - padding-top: 4px
                            - font-weight: 500
                            - color: var(--gray1000)
                      custom_fields:
                        icon: |
                          [[[
                           var state = entity.state;
                           if(state == "on")
                            return `<ha-icon
                            icon="mdi:toggle-switch"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                           else 
                            return `<ha-icon
                            icon="mdi:toggle-switch-off"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                          ]]]
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: input_boolean.disco_toggle
                          state: 'on'
                      card:
                        square: true
                        type: grid
                        columns: 5
                        cards:
                          - type: custom:button-card
                            name: 1
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_1
                            state:
                              - value: Nice1
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray1000)
                                - margin-top: 12px
                                - margin-bottom: 12px
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--black)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 2
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_2
                            state:
                              - value: Nice2
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray1000)
                                - margin-top: 12px
                                - margin-bottom: 12px
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--black)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 3
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_3
                            state:
                              - value: Nice3
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray1000)
                                - margin-top: 12px
                                - margin-bottom: 12px
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--black)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 4
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_4
                            state:
                              - value: Nice4
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray1000)
                                - margin-top: 12px
                                - margin-bottom: 12px
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--black)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 5
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_5
                            state:
                              - value: Nice5
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray1000)
                                - margin-top: 12px
                                - margin-bottom: 12px
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--black)
                                - padding: 2px 0px
              - title: TV
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      entity: media_player.tv_stue
                      triggers_update:
                        - media_player.shield_androidtv
                      name: TV
                      show_icon: true
                      icon: mdi:television-classic
                      tap_action:
                        action: toggle
                      state:
                        - value: 'on'
                          styles:
                            card:
                              - background: var(--active-big)
                          custom_fields:
                            state: |
                              [[[ 
                                var source = entity.attributes.source;
                                var shield = states['media_player.shield_androidtv'];
                                
                                // RENAME YOUR APPS HERE
                                var appMap = {
                                  "no.nrk.tv": "NRK",
                                  "ar.tvplayer.tv": "TiviMate",
                                  "no.altibox.tv": "Altibox",
                                  "com.retroarch.aarch64": "RetroArch",
                                  "com.netflix.ninja": "Netflix"
                                };

                                if (source == 'TV/HDMI' && shield && shield.attributes.app_name) {
                                  var rawApp = shield.attributes.app_name;
                                  var cleanName = appMap[rawApp] || rawApp;
                                  return 'Ser p√• ' + cleanName;
                                }
                                
                                return 'Ser p√• ' + source;
                              ]]]
                        - value: 'off'
                          custom_fields:
                            state: TV er av
                          styles:
                            card:
                              - background: var(--red)
                            img_cell:
                              - background: rgba(0,0,0, 0.1)
                            icon:
                              - color: var(--black)
                            name:
                              - color: var(--black)
                            custom_fields:
                              state:
                                - color: var(--black)
                      styles:
                        card:
                          - height: 66px
                          - border-radius: 75px
                          - padding: 4px 20px 4px 4px
                          - background: var(--gray200)
                          - margin-bottom: '-8px'
                        grid:
                          - grid-template-columns: 76px 1fr min-content
                          - grid-template-areas: '"i state icon" "i n icon"'
                        icon:
                          - width: 30px
                          - color: var(--black)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - background: rgba(var(--highlight_active))
                          - padding: 14px
                          - border-radius: 50%
                        name:
                          - justify-self: start
                          - font-size: 14px
                          - color: var(--black)
                          - opacity: 0.7
                          - padding-bottom: 7px
                        custom_fields:
                          icon: null
                          state:
                            - justify-self: start
                            - font-size: 16px
                            - padding-top: 4px
                            - font-weight: 500
                            - color: var(--black)
                      custom_fields:
                        icon: |
                          [[[
                           var state = entity.state;
                           if(state == "on")
                            return `<ha-icon
                            icon="mdi:toggle-switch"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                           else 
                            return `<ha-icon
                            icon="mdi:toggle-switch-off"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                          ]]]
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Hjem & Hendelser
            icon: mdi:home-heart
            state: null
            hash: '#hjemhendelser'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Kalender
                icon: mdi:calendar
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Kalender
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      entity: sensor.calendar_upcoming_events
                      show_icon: false
                      show_name: false
                      tap_action:
                        action: none
                      state:
                        - operator: template
                          value: |
                            [[[
                              return new Date(entity.attributes.events[0].start).toDateString() === new Date().toDateString()
                            ]]]
                          styles:
                            card:
                              - background: var(--active-big)
                            custom_fields:
                              day:
                                - color: var(--black)
                              time:
                                - color: var(--black)
                              date:
                                - color: var(--black)
                              event:
                                - color: var(--black)
                        - value: '0'
                          custom_fields:
                            date: No upcoming calendar events
                          styles:
                            card:
                              - background: var(--red)
                            custom_fields:
                              date:
                                - text-transform: none
                                - font-size: 1em
                                - border: none
                              event:
                                - display: none
                              day:
                                - display: none
                              time:
                                - display: none
                      custom_fields:
                        event: |
                          [[[
                            return entity.attributes.events[0].summary
                          ]]]
                        day: |
                          [[[
                            return helpers.formatDateWeekday(entity.attributes.events[0].start)
                          ]]]
                        date: |


                          [[[
                            const d = new Date(entity.attributes.events[0].start);
                            return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                          ]]] 
                        time: >
                          [[[  const start = entity.attributes.events[0].start;
                          const end =

                          entity.attributes.events[0].end; return
                          start.includes('T') ?

                          (helpers.formatTime24h(start) + ' ¬∑ ' +
                          helpers.formatTime24h(end)) :

                          'Hele dagen' ]]] 
                      styles:
                        grid:
                          - grid-template-areas: '"day ." "date time" "date event"'
                          - grid-template-columns: min-content 1fr
                        card:
                          - padding: 20px
                          - background: var(--gray200)
                        custom_fields:
                          day:
                            - justify-self: start
                          time:
                            - justify-self: start
                            - font-size: 1.4em
                            - padding-left: 20px
                          date:
                            - justify-self: start
                            - font-size: 2.6em
                            - padding-right: 20px
                            - font-weight: 300
                          event:
                            - justify-self: start
                            - padding-left: 20px
                            - width: calc(100% - 10px)
                            - text-overflow: ellipsis
                            - text-align: left
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.calendar_upcoming_events
                          above: 1
                      card:
                        type: custom:button-card
                        entity: sensor.calendar_upcoming_events
                        show_icon: false
                        show_name: false
                        tap_action:
                          action: none
                        styles:
                          grid:
                            - grid-template-areas: '"day time" "date event"'
                            - grid-template-columns: min-content 1fr
                          card:
                            - padding: 20px
                            - margin-top: 12px
                            - background: var(--gray200)
                          custom_fields:
                            day:
                              - color: var(--gray800)
                              - justify-self: start
                              - align-self: start
                            time:
                              - justify-self: start
                              - font-size: 1.2em
                              - padding-left: 20px
                            date:
                              - justify-self: start
                              - font-size: 1.6em
                              - padding-right: 20px
                              - width: 100px
                              - text-align: left
                              - font-weight: 300
                            event:
                              - justify-self: start
                              - padding-left: 20px
                              - text-align: left
                              - width: calc(100% - 20px)
                              - text-overflow: ellipsis
                        custom_fields:
                          day: |
                            [[[
                              return helpers.formatDateWeekday(entity.attributes.events[1].start)
                            ]]]      
                          event: |
                            [[[
                              return entity.attributes.events[1].summary
                            ]]]
                          date: |
                            [[[
                              const d = new Date(entity.attributes.events[1].start);
                              return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                            ]]] 
                          time: >
                            [[[  const start =
                            entity.attributes.events[1].start; const end =

                            entity.attributes.events[1].end; return
                            start.includes('T') ?

                            (helpers.formatTime24h(start) + ' ¬∑ ' +
                            helpers.formatTime24h(end)) :

                            'Hele dagen' ]]] 
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.calendar_upcoming_events
                          above: 2
                      card:
                        type: custom:button-card
                        entity: sensor.calendar_upcoming_events
                        show_icon: false
                        show_name: false
                        tap_action:
                          action: none
                        styles:
                          grid:
                            - grid-template-areas: '"day time" "date event"'
                            - grid-template-columns: min-content 1fr
                          card:
                            - padding: 20px
                            - margin-top: 12px
                            - background: var(--gray200)
                          custom_fields:
                            day:
                              - color: var(--gray800)
                              - justify-self: start
                              - align-self: start
                            time:
                              - justify-self: start
                              - font-size: 1.2em
                              - padding-left: 20px
                            date:
                              - justify-self: start
                              - font-size: 1.6em
                              - padding-right: 20px
                              - width: 100px
                              - text-align: left
                              - font-weight: 300
                            event:
                              - justify-self: start
                              - padding-left: 20px
                              - text-align: left
                              - width: calc(100% - 20px)
                              - text-overflow: ellipsis
                        custom_fields:
                          day: |
                            [[[
                              return helpers.formatDateWeekday(entity.attributes.events[2].start)
                            ]]]
                          event: |
                            [[[
                              return entity.attributes.events[2].summary
                            ]]]
                          date: |
                            [[[
                              const d = new Date(entity.attributes.events[2].start);
                              return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                            ]]] 
                          time: >
                            [[[  const start =
                            entity.attributes.events[2].start; const end =

                            entity.attributes.events[2].end; return
                            start.includes('T') ?

                            (helpers.formatTime24h(start) + ' ¬∑ ' +
                            helpers.formatTime24h(end)) :

                            'Hele dagen' ]]]  
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.calendar_upcoming_events
                          above: 3
                      card:
                        type: custom:button-card
                        entity: sensor.calendar_upcoming_events
                        show_icon: false
                        show_name: false
                        tap_action:
                          action: none
                        styles:
                          grid:
                            - grid-template-areas: '"day time" "date event"'
                            - grid-template-columns: min-content 1fr
                          card:
                            - padding: 20px
                            - margin-top: 12px
                            - background: var(--gray200)
                          custom_fields:
                            day:
                              - color: var(--gray800)
                              - justify-self: start
                              - align-self: start
                            time:
                              - justify-self: start
                              - font-size: 1.2em
                              - padding-left: 20px
                            date:
                              - justify-self: start
                              - font-size: 1.6em
                              - padding-right: 20px
                              - width: 100px
                              - text-align: left
                              - font-weight: 300
                            event:
                              - justify-self: start
                              - padding-left: 20px
                              - text-align: left
                              - width: calc(100% - 20px)
                              - text-overflow: ellipsis
                        custom_fields:
                          day: |
                            [[[
                              return helpers.formatDateWeekday(entity.attributes.events[3].start)
                            ]]]
                          event: |
                            [[[
                              return entity.attributes.events[3].summary
                            ]]]
                          date: |
                            [[[
                              const d = new Date(entity.attributes.events[3].start);
                              return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                            ]]] 
                          time: >
                            [[[  const start =
                            entity.attributes.events[3].start; const end =

                            entity.attributes.events[3].end; return
                            start.includes('T') ?

                            (helpers.formatTime24h(start) + ' ¬∑ ' +
                            helpers.formatTime24h(end)) :

                            'Hele dagen' ]]] 
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.calendar_upcoming_events
                          above: 4
                      card:
                        type: custom:button-card
                        entity: sensor.calendar_upcoming_events
                        show_icon: false
                        show_name: false
                        tap_action:
                          action: none
                        styles:
                          grid:
                            - grid-template-areas: '"day time" "date event"'
                            - grid-template-columns: min-content 1fr
                          card:
                            - padding: 20px
                            - margin-top: 12px
                            - background: var(--gray200)
                          custom_fields:
                            day:
                              - color: var(--gray800)
                              - justify-self: start
                              - align-self: start
                            time:
                              - justify-self: start
                              - font-size: 1.2em
                              - padding-left: 20px
                            date:
                              - justify-self: start
                              - font-size: 1.6em
                              - padding-right: 20px
                              - width: 100px
                              - text-align: left
                              - font-weight: 300
                            event:
                              - justify-self: start
                              - padding-left: 20px
                              - text-align: left
                              - width: calc(100% - 20px)
                              - text-overflow: ellipsis
                        custom_fields:
                          day: |
                            [[[
                              return helpers.formatDateWeekday(entity.attributes.events[4].start)
                            ]]]
                          event: |
                            [[[
                              return entity.attributes.events[4].summary
                            ]]]
                          date: |
                            [[[
                              const d = new Date(entity.attributes.events[4].start);
                              return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                            ]]] 
                          time: >
                            [[[  const start =
                            entity.attributes.events[4].start; const end =

                            entity.attributes.events[4].end; return
                            start.includes('T') ?

                            (helpers.formatTime24h(start) + ' ¬∑ ' +
                            helpers.formatTime24h(end)) :

                            'Hele dagen' ]]]  
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.calendar_upcoming_events
                          above: 5
                      card:
                        type: custom:button-card
                        entity: sensor.calendar_upcoming_events
                        show_icon: false
                        show_name: false
                        tap_action:
                          action: none
                        styles:
                          grid:
                            - grid-template-areas: '"day time" "date event"'
                            - grid-template-columns: min-content 1fr
                          card:
                            - padding: 20px
                            - margin-top: 12px
                            - background: var(--gray200)
                          custom_fields:
                            day:
                              - color: var(--gray800)
                              - justify-self: start
                              - align-self: start
                            time:
                              - justify-self: start
                              - font-size: 1.2em
                              - padding-left: 20px
                            date:
                              - justify-self: start
                              - font-size: 1.6em
                              - padding-right: 20px
                              - width: 100px
                              - text-align: left
                              - font-weight: 300
                            event:
                              - justify-self: start
                              - padding-left: 20px
                              - text-align: left
                              - width: calc(100% - 20px)
                              - text-overflow: ellipsis
                        custom_fields:
                          day: |
                            [[[
                              return helpers.formatDateWeekday(entity.attributes.events[5].start)
                            ]]]
                          event: |
                            [[[
                              return entity.attributes.events[5].summary
                            ]]]
                          date: |
                            [[[
                              const d = new Date(entity.attributes.events[5].start);
                              return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                            ]]] 
                          time: >
                            [[[  const start =
                            entity.attributes.events[5].start; const end =

                            entity.attributes.events[5].end; return
                            start.includes('T') ?

                            (helpers.formatTime24h(start) + ' ¬∑ ' +
                            helpers.formatTime24h(end)) :

                            'Hele dagen' ]]]  
                    - type: conditional
                      conditions:
                        - condition: numeric_state
                          entity: sensor.calendar_upcoming_events
                          above: 6
                      card:
                        type: custom:button-card
                        entity: sensor.calendar_upcoming_events
                        show_icon: false
                        show_name: false
                        tap_action:
                          action: none
                        styles:
                          grid:
                            - grid-template-areas: '"day time" "date event"'
                            - grid-template-columns: min-content 1fr
                          card:
                            - padding: 20px
                            - margin-top: 12px
                            - background: var(--gray200)
                          custom_fields:
                            day:
                              - color: var(--gray800)
                              - justify-self: start
                              - align-self: start
                            time:
                              - justify-self: start
                              - font-size: 1.2em
                              - padding-left: 20px
                            date:
                              - justify-self: start
                              - font-size: 1.6em
                              - padding-right: 20px
                              - width: 100px
                              - text-align: left
                              - font-weight: 300
                            event:
                              - justify-self: start
                              - padding-left: 20px
                              - text-align: left
                              - width: calc(100% - 20px)
                              - text-overflow: ellipsis
                        custom_fields:
                          day: |
                            [[[
                              return helpers.formatDateWeekday(entity.attributes.events[6].start)
                            ]]]
                          event: |
                            [[[
                              return entity.attributes.events[6].summary
                            ]]]
                          date: |
                            [[[
                              const d = new Date(entity.attributes.events[6].start);
                              return `${d.getDate()}. ${d.toLocaleString('en',{month:'short'}).toLowerCase()}`
                            ]]] 
                          time: >
                            [[[  const start =
                            entity.attributes.events[6].start; const end =

                            entity.attributes.events[6].end; return
                            start.includes('T') ?

                            (helpers.formatTime24h(start) + ' ¬∑ ' +
                            helpers.formatTime24h(end)) :

                            'Hele dagen' ]]]
              - title: Fremover
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:button-card
                      template: template_sensor_small
                      entity: sensor.posten_sensor_next
                      trigger_update:
                        - sensor.posten_sensor_next_relative
                      styles:
                        card:
                          - margin-bottom: 12px
                      variables:
                        text_main: |
                          [[[
                            var date = new Date(entity.state);
                            var day = date.getDate();
                            var month = date.toLocaleString('no-NO', { month: 'long' });
                            var weekday = states['sensor.posten_sensor_next_relative'].state;
                            return weekday + ', ' + day + '. ' + month;
                          ]]] 
                        text_sub: Post leveres
                        icon: mdi:mail
                        background: var(--gray200)
                        margin: 0
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 2
                        square: false
                      card_param: cards
                      filter:
                        include:
                          - entity_id: /birthdays.(Ted|Sarah|Tina|Anna)/
                            options:
                              type: custom:button-card
                              template: template_sensor_big_alt
                              entity: this.entity_id
                              variables:
                                margin: 0
                                text_sub: >-
                                  [[[ return 'Bursdag ' +
                                  entity.attributes.friendly_name ]]]
                                text_main: |
                                  [[[
                                    if (entity.state === 0) {
                                      return 'I dag'
                                    } else {
                                      return entity.state + '<span style="font-size:14px;line-height:1.5em"> dager</span>'
                                    }
                                  ]]]
                                text_alt: |
                                  [[[ 
                                      const date = new Date(entity.attributes.date_of_birth);
                                      const day = date.getDate();
                                      const month = date.toLocaleString('no', { month: 'short' }).toLowerCase();
                                      return day + '. ' + month;
                                  ]]]          
                                icon: null
                      sort:
                        method: state
                        numeric: true
                        reverse: false
                      show_empty: true
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#stue_nede'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Stue
                icon: mdi:sofa
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--green)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: |
              [[ 
                {% if is_state('binary_sensor.livingroom_door_balcony_contact', 'on') %}
                  {% raw %}{{button:door}}{% endraw %}.
                {% endif %}
              ]]
              Det er {{button:temperature}} i stua og
              luftkvaliteten er {{button:luft}}. Vi har sett
              {{button:tvtid}} tv i dag.
            buttons:
              - id: temperature
                entity: sensor.dashboard_livingroom
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: luft
                entity: sensor.dashboard_livingroom
                attribute: airquality
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: tvtid
                entity: sensor.dashboard_livingroom
                attribute: tvtime
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: door
                entity: sensor.dashboard_livingroom
                attribute: door
                icon: mdi:alert-circle
                icon_position: start
                prefix: Balkongd√∏ra er
                style:
                  background: var(--red)
                  color: var(--gray100)
                  cursor: context-menu
                  padding: 4px 12px 4px 4px
                tap_action:
                  action: none
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 0 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            preset: button
            buttons:
              - icon: mdi:lightbulb-on-outline
                layout: icon_name_state
                name: Mer lys
                tap_action:
                  action: call-service
                  service: script.stue_lys_brighter
              - icon: mdi:lightbulb-outline
                layout: icon_name_state
                name: Mindre lys
                tap_action:
                  action: call-service
                  service: script.stue_lys_darker
              - icon: mdi:movie-open
                layout: icon_name_state
                name: Filmkveld
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.filmkveld
                  data:
                    transition: 1
              - icon: mdi:lightbulb-night-outline
                layout: icon_name_state
                name: Kveldslys
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.filmkveld_duplicate
                  data:
                    transition: 1
              - icon: mdi:lightbulb-off-outline
                layout: icon_name_state
                name: Lys av
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_nede_alt_lys_av
                  data:
                    transition: 1
              - icon: mdi:sleep
                layout: icon_name_state
                name: Natta
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_nede_alt_av
                  data:
                    transition: 1
                styles:
                  button:
                    margin-right: 36px
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Lys
                icon: mdi:lightbulb
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.livingroom_light_ceiling_left
                        - name: Taklys Sofa
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.livingroom_light_ceiling_right
                        - name: Taklys Spisebord
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - square: false
                      type: grid
                      cards:
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: switch.livingroom_powerstrip_sofa_l3
                            - name: Bak Sofa
                            - icon: mdi:sofa
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: light.livingroom_plug_under_trapp
                            - name: Under Trapp
                            - icon: mdi:stairs
                      columns: 2
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.livingroom_light_bystairs
                        - name: Taklys ved Trapp
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
              - title: Gardiner
                icon: mdi:blinds
                card:
                  type: grid
                  square: false
                  columns: 1
                  cards:
                    - type: grid
                      square: false
                      columns: 5
                      cards:
                        - type: custom:button-card
                          name: 0%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 100
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 25%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 75
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 50%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 50
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 75%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 25
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 100%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 0
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 60px 1fr 50px
                        grid-template-rows: 30px
                        grid-template-areas: |
                          "one two three"  
                      cards:
                        - type: custom:button-card
                          view_layout:
                            grid-area: one
                          name: Syd
                          show_icon: false
                          styles:
                            card:
                              - background: none
                              - padding: 8px
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 14px
                              - font-weight: 500
                              - justify-self: start
                        - type: custom:my-slider-v2
                          view_layout:
                            grid-area: two
                          entity: cover.blinds_sofa_syd_2
                          mode: position
                          allowTapping: false
                          allowSliding: true
                          vertical: false
                          flipped: false
                          styles:
                            container:
                              - overflow: visible
                              - margin-top: 12px
                            card:
                              - background: var(--gray200)
                              - border-radius: 4px
                              - height: 8px
                            progress:
                              - background: var(--active-big)
                              - border-radius: 4px
                            thumb:
                              - width: 18px
                              - height: 18px
                              - top: '-5px'
                              - margin-right: '-4px'
                              - border-radius: 50%
                              - background: var(--gray1000)
                            track:
                              - background: none
                        - type: custom:button-card
                          view_layout:
                            grid-area: three
                          entity: cover.blinds_sofa_syd_2
                          name: >-
                            [[[ return
                            100-Math.floor(entity.attributes.current_position) +
                            '%' ]]]
                          show_icon: false
                          styles:
                            card:
                              - background: none
                              - padding: 8px 0px
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                              - overflow: visible
                            name:
                              - font-size: 14px
                              - font-weight: 500
                              - justify-self: end
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 60px 1fr 50px
                        grid-template-rows: 30px
                        grid-template-areas: |
                          "one two three"  
                      cards:
                        - type: custom:button-card
                          view_layout:
                            grid-area: one
                          name: Vest
                          show_icon: false
                          styles:
                            card:
                              - background: none
                              - padding: 8px
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 14px
                              - font-weight: 500
                              - justify-self: start
                        - type: custom:my-slider-v2
                          view_layout:
                            grid-area: two
                          entity: cover.blinds_sofa_vest
                          mode: position
                          allowTapping: false
                          allowSliding: true
                          vertical: false
                          flipped: false
                          styles:
                            container:
                              - overflow: visible
                              - margin-top: 12px
                            card:
                              - background: var(--gray200)
                              - border-radius: 4px
                              - height: 8px
                            progress:
                              - background: var(--active-big)
                              - border-radius: 4px
                            thumb:
                              - width: 18px
                              - height: 18px
                              - top: '-5px'
                              - margin-right: '-4px'
                              - border-radius: 50%
                              - background: var(--gray1000)
                            track:
                              - background: none
                        - type: custom:button-card
                          view_layout:
                            grid-area: three
                          entity: cover.blinds_sofa_vest
                          name: >-
                            [[[ return
                            100-Math.floor(entity.attributes.current_position) +
                            '%' ]]]
                          show_icon: false
                          styles:
                            card:
                              - background: none
                              - padding: 8px 0px
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                              - overflow: visible
                            name:
                              - font-size: 14px
                              - font-weight: 500
                              - justify-self: end
              - title: Klima
                icon: mdi:heart
                card:
                  type: grid
                  columns: 2
                  square: false
                  cards:
                    - type: custom:button-card
                      name: Panelovn
                      show_icon: false
                      show_label: false
                      custom_fields:
                        temp: |
                          [[[ 
                            var temp = states['sensor.i_9psl_temperatur'].state;
                            var hum = states['sensor.i_9psl_luftfuktighet'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]  
                        btn1:
                          card:
                            type: custom:paper-buttons-row
                            styles:
                              display: flex
                              flex-direction: column
                              flex-wrap: wrap
                            buttons:
                              - icon: mdi:chevron-up
                                ripple: none
                                name: false
                                tap_action:
                                  action: call-service
                                  service: input_number.increment
                                  target:
                                    entity_id:
                                      - input_number.stue_nede_heater_target
                                  data:
                                    amount: 1
                                styles:
                                  icon:
                                    color: var(--gray1000)
                                  button:
                                    background: var(--gray100)
                                    border-radius: 40px 40px 0 0
                                    width: 46px
                                    height: 30px
                                    z-index: 1
                                    border-width: 1px 1px 0 1px
                                    border-style: solid
                                    border-color: var(--gray400)
                              - name: >-
                                  {{
                                  states('input_number.stue_nede_heater_target')
                                  | round(0) }}¬∞
                                ripple: none
                                icon: false
                                styles:
                                  name:
                                    color: var(--gray1000)
                                  button:
                                    background: var(--gray100)
                                    border-radius: 0
                                    width: 46px
                                    height: 52px
                                    z-index: 1
                                    border-width: 0 1px 0 1px
                                    border-style: solid
                                    border-color: var(--gray400)
                              - icon: mdi:chevron-down
                                ripple: none
                                name: false
                                tap_action:
                                  action: call-service
                                  service: input_number.decrement
                                  target:
                                    entity_id:
                                      - input_number.stue_nede_heater_target
                                  data:
                                    amount: 1
                                styles:
                                  icon:
                                    color: var(--gray1000)
                                  button:
                                    background: var(--gray100)
                                    border-radius: 0 0 40px 40px
                                    width: 46px
                                    height: 30px
                                    z-index: 1
                                    border-width: 0 1px 1px 1px
                                    border-style: solid
                                    border-color: var(--gray400)
                      styles:
                        card:
                          - padding: 4px
                          - overflow: visible
                          - height: 160px
                          - background: var(--gray200)
                        grid:
                          - grid-template-areas: '"n btn1" "l btn1" "temp btn1"'
                          - grid-template-rows: min-content min-content 1fr
                          - grid-template-columns: 1fr min-content
                        name:
                          - justify-self: start
                          - text-align: left
                          - font-size: 14px
                          - color: var(--gray1000)
                          - opacity: '0.7'
                          - padding: 14px 0 0 20px
                        custom_fields:
                          btn1:
                            - align-self: end
                            - justify-self: end
                          temp:
                            - justify-self: start
                            - align-self: end
                            - font-size: 2em
                            - font-weight: 300
                            - color: var(--gray1000)
                            - line-height: 1.5em
                            - padding: 0 0 4px 20px
                    - type: custom:button-card
                      template: universal_sensor
                      entity: sensor.i_9psl_karbondioksid
                      variables:
                        sub_text: CO‚ÇÇ
                        size: big
                        icon: mdi:molecule-co2
                        alt_text: |
                          [[[
                            const colors = [
                                "Veldig usunt",
                                "Usunt",
                                "B√∏r unng√•s",
                                "Ikke ideelt",
                                "Ok",
                                "Bra"
                            ];
                            
                            const thresholds = [3000, 2001, 1501, 1001, 801, 0];  
                            var state = entity.state;
                            var index = thresholds.findIndex(threshold => state >= threshold);

                            if (variables.invert) {
                                index = 5 - index; // Invert the index (4 is array.length - 1)
                            }
                            
                            var color = colors[index];
                            return  `${color}`
                          ]]]
                        background_color: var(--gray200)
                        text_color: var(--gray1000)
                        symbol: ppm
                        show_bar: true
                        main_text: '[[[ return entity.state ]]]'
                        bar_invert_colors: false
                        bar_value: |
                          [[[
                            return (entity.state) / 3000 * 100
                          ]]]
          - type: custom:gap-card
            height: 48
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#kjokken'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Kj√∏kken
                icon: mdi:silverware-fork-knife
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--blue)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.

              [[ 
                {% if is_state('sensor.oppvaskmaskin', 'on') %}
                  Oppvaskmaskinen har {% raw %}{{button:oppvask}}{% endraw %} igjen.
                {% endif %}
              ]]

              [[ 
                {% if is_state('sensor.ovn_machine_state', 'running') %}
                  Komfyren er {% raw %}{{button:ovn}}{% endraw %}.
                {% endif %}
              ]]  
            buttons:
              - id: temperature
                entity: sensor.dashboard_kitchen
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_kitchen
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: oppvask
                entity: sensor.oppvaskmaskin
                attribute: remain_time
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: ovn
                entity: sensor.ovn_temperatur
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Lys
                icon: mdi:lightbulb
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.kitchen_light_dimmer_left
                        - name: Benklys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.kitchen_light_dimmer_right
                        - name: Taklys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
              - title: Enheter
                icon: mdi:devices
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.ovn_machine_state
                          variables:
                            size: small
                            icon: mdi:stove
                            background_color: var(--gray200)
                            sub_text: Komfyr
                            text_color: var(--gray1000)
                            margin: 0
                            main_text: |
                              [[[ 
                                return (parseFloat(states['sensor.ovn_temperatur'].state)).toFixed(0)
                                + '/' +
                                (parseFloat(states['sensor.ovn_set_point'].state)).toFixed(0)
                                + '¬∞'
                              ]]]
                            enable_off_state_styling: true
                            off_state_value: ready
                            off_state_main_text: Av
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.kitchen_sensor_fridgetemphum_temperature
                          variables:
                            size: small
                            icon: mdi:fridge
                            background_color: var(--gray200)
                            sub_text: Kj√∏leskap
                            symbol: ¬∞
                            text_color: var(--gray1000)
                            main_text: |
                              [[[ 
                                return (parseFloat(entity.state)).toFixed(1)
                              ]]]
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: universal_sensor
                          entity: sensor.oppvaskmaskin
                          variables:
                            icon: mdi:dishwasher
                            margin: 0
                            background_color: var(--active-big)
                            sub_text: Oppvaskmaskin
                            text_color: var(--gray100)
                            main_text: '[[[ return entity.attributes.remain_time ]]]'
                            alt_text: |
                              [[[
                                return states['sensor.dishwasher_states'].attributes.current_course +
                               ' ¬∑ ' + 
                               states['sensor.dishwasher_states'].attributes.run_state
                              ]]]
                            show_bar: true
                            bar_color: var(--gray200)
                            bar_value: >-
                              [[[ return
                              states['sensor.dishwashing_remain_percent'].state
                              ]]]
                            enable_off_state_styling: true
                            off_state_value: 'off'
                            off_state_main_text: Av
                            off_state_background_color: var(--gray200)
                            off_state_text_color: var(--gray1000)
                      columns: 1
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#stue_oppe'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Oppe
                icon: mdi:toy-brick-outline
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--orange)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: |
              [[ 
                {% if is_state('binary_sensor.upstairs_door_balcony_contact', 'on') %}
                  {% raw %}{{button:door}}{% endraw %}.
                {% endif %}
              ]]
              Det er {{button:temperature}} oppe og
              luftkvaliteten er {{button:luft}}
            buttons:
              - id: temperature
                entity: sensor.dashboard_upstairs
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: luft
                entity: sensor.dashboard_upstairs
                attribute: airquality
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: door
                entity: sensor.dashboard_upstairs
                attribute: door
                icon: mdi:alert-circle
                icon_position: start
                prefix: Balkongd√∏ra er
                style:
                  background: var(--red)
                  color: var(--gray100)
                  cursor: context-menu
                  padding: 4px 12px 4px 4px
                tap_action:
                  action: none
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 0 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            preset: button
            base_config:
              styles:
                state:
                  position: absolute
                  top: 8px
                  width: 36px
                  height: 3px
                  padding: 0
                  background: var(--gray1000)
                  border-radius: 5px
                  opacity: 0.1
                name:
                  color: var(--gray1000)
                button:
                  padding: 12px
                  width: 76px
                  height: 76px
                  flex-basis: 1
                  flex-shrink: 0
                  display: flex
                  background-color: var(--gray200)
                  border-radius: 24px
                  color: var(--white)
                icon:
                  '--mdc-icon-size': 26px
                  color: var(--gray1000)
            buttons:
              - icon: mdi:lightbulb-on-outline
                layout: icon_name_state
                name: Mer lys
                tap_action:
                  action: call-service
                  service: script.lys_all_brighter_stue_oppe
              - icon: mdi:lightbulb-outline
                layout: icon_name_state
                name: Mindre lys
                tap_action:
                  action: call-service
                  service: script.lys_all_darker_stue_oppe
              - icon: mdi:desk
                layout: icon_name_state
                name: Kontor
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_oppe_hjemmekontor
                  data:
                    transition: 1
              - icon: mdi:sleep
                layout: icon_name_state
                name: Leggetid
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_oppe_leggetid
                  data:
                    transition: 1
              - icon: mdi:power
                layout: icon_name_state
                name: Alt av
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_oppe_alt_av
                  data:
                    transition: 1
                styles:
                  button:
                    margin-right: 36px
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Lys
                icon: mdi:lightbulb
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.upstairs_light_ceiling
                        - name: Taklys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.upstairs_light_ceilingstairs_dimmerdown
                        - name: Taklys Trapp
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.upstairs_light_nightlight
                        - name: Nattlys lampe
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - square: false
                      type: grid
                      cards:
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: light.upstairs_plug_desklamp
                            - name: Lampe Pult
                            - icon: '[[[ return entity.attributes.icon ]]]'
                      columns: 2
              - title: Klima
                icon: mdi:heart
                card:
                  type: grid
                  columns: 2
                  square: false
                  cards:
                    - type: custom:button-card
                      name: Panelovn
                      show_icon: false
                      show_label: false
                      custom_fields:
                        temp: |
                          [[[ 
                            var temp = states['sensor.meter_0e9a'].state;
                            var hum = states['sensor.meter_0e9a_luftfuktighet'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]  
                        btn1:
                          card:
                            type: custom:paper-buttons-row
                            styles:
                              display: flex
                              flex-direction: column
                              flex-wrap: wrap
                            buttons:
                              - icon: mdi:chevron-up
                                ripple: none
                                name: false
                                tap_action:
                                  action: call-service
                                  service: input_number.increment
                                  target:
                                    entity_id:
                                      - input_number.stue_oppe_heater_upper
                                  data:
                                    amount: 1
                                styles:
                                  icon:
                                    color: var(--gray1000)
                                  button:
                                    background: var(--gray100)
                                    border-radius: 40px 40px 0 0
                                    width: 46px
                                    height: 30px
                                    z-index: 1
                                    border-width: 1px 1px 0 1px
                                    border-style: solid
                                    border-color: var(--gray400)
                              - name: >-
                                  {{
                                  states('input_number.stue_oppe_heater_upper')
                                  | round(0) }}¬∞
                                ripple: none
                                icon: false
                                styles:
                                  name:
                                    color: var(--gray1000)
                                  button:
                                    background: var(--gray100)
                                    border-radius: 0
                                    width: 46px
                                    height: 52px
                                    z-index: 1
                                    border-width: 0 1px 0 1px
                                    border-style: solid
                                    border-color: var(--gray400)
                              - icon: mdi:chevron-down
                                ripple: none
                                name: false
                                tap_action:
                                  action: call-service
                                  service: input_number.decrement
                                  target:
                                    entity_id:
                                      - input_number.stue_oppe_heater_upper
                                  data:
                                    amount: 1
                                styles:
                                  icon:
                                    color: var(--gray1000)
                                  button:
                                    background: var(--gray100)
                                    border-radius: 0 0 40px 40px
                                    width: 46px
                                    height: 30px
                                    z-index: 1
                                    border-width: 0 1px 1px 1px
                                    border-style: solid
                                    border-color: var(--gray400)
                      styles:
                        card:
                          - height: 160px
                          - padding: 4px
                          - overflow: visible
                          - background: var(--gray200)
                        grid:
                          - grid-template-areas: '"n btn1" "l btn1" "temp btn1"'
                          - grid-template-rows: min-content min-content 1fr
                          - grid-template-columns: 1fr min-content
                        icon:
                          - width: 28px
                          - color: var(--black)
                        img_cell:
                          - justify-self: end
                          - background: var(--green)
                          - border-radius: 100%
                          - align-self: start
                          - width: 60px
                          - height: 60px
                        name:
                          - justify-self: start
                          - text-align: left
                          - font-size: 14px
                          - color: var(--gray1000)
                          - opacity: '0.7'
                          - padding: 14px 0 0 20px
                        custom_fields:
                          btn1:
                            - align-self: end
                            - justify-self: end
                          temp:
                            - justify-self: start
                            - align-self: end
                            - font-size: 2em
                            - font-weight: 300
                            - color: var(--gray1000)
                            - line-height: 1.5em
                            - padding: 0 0 4px 20px
                    - type: custom:button-card
                      template: universal_sensor
                      entity: sensor.meter_0e9a_karbondioksid
                      variables:
                        sub_text: CO‚ÇÇ
                        size: big
                        icon: mdi:molecule-co2
                        alt_text: |
                          [[[
                            const colors = [
                                "Veldig usunt",
                                "Usunt",
                                "B√∏r unng√•s",
                                "Ikke ideelt",
                                "Ok",
                                "Bra"
                            ];
                            
                            const thresholds = [3000, 2001, 1501, 1001, 801, 0];  
                            var state = entity.state;
                            var index = thresholds.findIndex(threshold => state >= threshold);

                            if (variables.invert) {
                                index = 5 - index; // Invert the index (4 is array.length - 1)
                            }
                            
                            var color = colors[index];
                            return  `${color}`
                          ]]]
                        background_color: var(--gray200)
                        text_color: var(--gray1000)
                        symbol: ppm
                        show_bar: true
                        main_text: '[[[ return entity.state ]]]'
                        bar_invert_colors: false
                        bar_value: |
                          [[[
                            return (entity.state) / 3000 * 100
                          ]]]
          - type: custom:gap-card
            height: 48
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#bad_nede'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Bad nede
                icon: mdi:washing-machine
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--blue)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.

              [[ 
                {% if is_state('sensor.vaskemaskin', 'on') %}
                  Vaskmaskinen har {% raw %}{{button:oppvask}}{% endraw %} igjen.
                {% endif %}
              ]]
            buttons:
              - id: temperature
                entity: sensor.dashboard_bathdown
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_bathdown
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: oppvask
                entity: sensor.vaskemaskin
                attribute: remain_time
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Lys
                icon: mdi:lightbulb
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.bathroomdown_light_ceiling
                        - name: Taklys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
              - title: Enheter
                icon: mdi:devices
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:button-card
                      template: universal_sensor
                      entity: sensor.vaskemaskin
                      variables:
                        icon: mdi:washing-machine
                        background_color: var(--active-big)
                        sub_text: Vaskemaskin
                        text_color: var(--gray100)
                        main_text: '[[[ return entity.attributes.remain_time ]]]'
                        alt_text: |
                          [[[
                            return entity.attributes.current_course +
                           ' ¬∑ ' + 
                           entity.attributes.run_state
                          ]]]
                        show_bar: true
                        bar_color: var(--gray100)
                        bar_value: >-
                          [[[ return
                          states['sensor.washing_remain_percent'].state ]]]
                        enable_off_state_styling: true
                        off_state_value: 'off'
                        off_state_main_text: Av
                        off_state_background_color: var(--gray200)
                        off_state_text_color: var(--gray1000)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#gang'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Gang
                icon: mdi:door
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--yellow)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              [[ 
                {% if is_state('binary_sensor.hallway_door_entrance_contact', 'on') %}
                  {% raw %}{{button:door}}{% endraw %}
                {% endif %}
              ]]

              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.

              Inngangs√∏dra er {{button:lock}}
            buttons:
              - id: door
                entity: sensor.dashboard_hallway
                attribute: door
                icon: mdi:alert-circle
                icon_position: start
                prefix: D√∏ra er
                style:
                  background: var(--red)
                  color: var(--gray100)
                  cursor: context-menu
                  padding: 4px 12px 4px 4px
                tap_action:
                  action: none
              - id: temperature
                entity: sensor.dashboard_hallway
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_hallway
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: lock
                entity: sensor.dashboard_hallway
                attribute: door_lock
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: navigate
                  navigation_path: '#lock'
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Lys
                icon: mdi:lightbulb
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.hallway_light_ceiling
                        - name: Taklys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.outdoor_light_carport
                        - name: Utelys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
              - title: Enheter
                icon: mdi:devices
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: template_toggle_card
                          tap_action:
                            action: toggle
                          variables:
                            main_text: Ringeklokke lyd
                            icon: mdi:doorbell
                            entity: input_boolean.doorbell_chime_toggle
                            background: var(--gray200)
                        - type: custom:button-card
                          template: template_toggle_card
                          tap_action:
                            action: toggle
                          variables:
                            main_text: Magic Mirror
                            icon: mdi:mirror-rectangle
                            entity: input_boolean.magicmirror_toggle_on_off
                            background: var(--gray200)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#bad_oppe'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Bad oppe
                icon: mdi:bathtub
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--red)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.
            buttons:
              - id: temperature
                entity: sensor.dashboard_bathup
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_bathup
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.bathroomup_light_ceiling
                  - name: Taklys
                  - icon: '[[[ return entity.attributes.icon ]]]'
                  - background: var(--gray100)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.bathroomup_light_cabinet
                  - name: Skaplys
                  - icon: '[[[ return entity.attributes.icon ]]]'
                  - background: var(--gray100)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#soverom'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Soverom
                icon: mdi:bed-king
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--purple)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.
            buttons:
              - id: temperature
                entity: sensor.dashboard_bedroom
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_bedroom
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Lys
                icon: mdi:lightbulb
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.bedroom_light_ceiling
                        - name: Taklys
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - type: custom:decluttering-card
                      template: light_slider
                      variables:
                        - entity: light.bedroom_light_bed
                        - name: Sengegavl
                        - icon: '[[[ return entity.attributes.icon ]]]'
                        - background: var(--gray100)
                    - square: false
                      type: grid
                      cards:
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: light.bedroom_light_Sarah
                            - name: Sarah
                            - icon: '[[[ return entity.attributes.icon ]]]'
                        - type: custom:decluttering-card
                          template: light_toggle
                          variables:
                            - entity: light.bedroom_light_Ted
                            - name: Ted
                            - icon: '[[[ return entity.attributes.icon ]]]'
                      columns: 2
              - title: Gardiner
                icon: mdi:blinds
                card:
                  type: grid
                  square: false
                  columns: 1
                  cards:
                    - type: grid
                      square: false
                      columns: 5
                      cards:
                        - type: custom:button-card
                          name: 0%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 100
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 25%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 75
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 50%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 50
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 75%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 25
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                        - type: custom:button-card
                          name: 100%
                          show_icon: false
                          aspect_ratio: 1/1
                          tap_action:
                            action: call-service
                            service: script.blinds_sofa_target_pos
                            data:
                              target_pos: 0
                          custom_fields:
                            tap: |
                              [[[ 
                                return '<div style="position:absolute; top: 8px; left:calc(50% - 18px);width: 36px; height:3px;background:var(--gray1000);border-radius:5px"></div>';
                              ]]]        
                          styles:
                            custom_fields:
                              tap:
                                - overflow: visible
                                - opacity: 0.1
                            card:
                              - border-radius: 24px
                              - background: var(--gray200)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray1000)
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 110px 1fr 50px
                        grid-template-rows: 30px
                        grid-template-areas: |
                          "one two three"  
                      cards:
                        - type: custom:button-card
                          view_layout:
                            grid-area: one
                          name: Rullegardin
                          show_icon: false
                          styles:
                            card:
                              - background: none
                              - padding: 8px
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 14px
                              - font-weight: 500
                              - justify-self: start
                        - type: custom:my-slider-v2
                          view_layout:
                            grid-area: two
                          entity: cover.roller_shade_da90
                          mode: position
                          allowTapping: false
                          allowSliding: true
                          vertical: false
                          flipped: false
                          styles:
                            container:
                              - overflow: visible
                              - margin-top: 12px
                            card:
                              - background: var(--gray200)
                              - border-radius: 4px
                              - height: 8px
                            progress:
                              - background: var(--active-big)
                              - border-radius: 4px
                            thumb:
                              - width: 18px
                              - height: 18px
                              - top: '-5px'
                              - margin-right: '-4px'
                              - border-radius: 50%
                              - background: var(--gray1000)
                            track:
                              - background: none
                        - type: custom:button-card
                          view_layout:
                            grid-area: three
                          entity: cover.roller_shade_da90
                          name: >-
                            [[[ return
                            100-Math.floor(entity.attributes.current_position) +
                            '%' ]]]
                          show_icon: false
                          styles:
                            card:
                              - background: none
                              - padding: 8px 0px
                              - overflow: visible
                              - '--mdc-ripple-press-opacity': 0
                              - overflow: visible
                            name:
                              - font-size: 14px
                              - font-weight: 500
                              - justify-self: end
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#Anna'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Anna
                icon: mdi:bed
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--pink)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.
            buttons:
              - id: temperature
                entity: sensor.dashboard_Anna
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_Anna
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.Anna_light_ceiling
                  - name: Taklys
                  - icon: '[[[ return entity.attributes.icon ]]]'
                  - background: var(--gray100)
          - type: custom:button-card
            name: Panelovn
            show_icon: false
            show_label: false
            custom_fields:
              temp: |
                [[[ 
                  var temp = states['sensor.Anna_sensor_temphum_temperature'].state;
                  var hum = states['sensor.Anna_sensor_temphum_humidity'].state;
                  return `
                  ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                  `
                ]]]  
              btn1:
                card:
                  type: custom:paper-buttons-row
                  styles:
                    display: flex
                    flex-direction: column
                    flex-wrap: wrap
                  buttons:
                    - icon: mdi:chevron-up
                      ripple: none
                      name: false
                      tap_action:
                        action: call-service
                        service: input_number.increment
                        target:
                          entity_id:
                            - input_number.Anna_heater_target
                        data:
                          amount: 1
                      styles:
                        icon:
                          color: var(--gray1000)
                        button:
                          background: var(--gray200)
                          border-radius: 40px 40px 0 0
                          width: 46px
                          height: 30px
                          z-index: 1
                          border-width: 1px 1px 0 1px
                          border-style: solid
                          border-color: var(--gray400)
                    - name: >-
                        {{ states('input_number.Anna_heater_target') | round(0)
                        }}¬∞
                      ripple: none
                      icon: false
                      styles:
                        name:
                          color: var(--gray1000)
                        button:
                          background: var(--gray200)
                          border-radius: 0
                          width: 46px
                          height: 52px
                          z-index: 1
                          border-width: 0 1px 0 1px
                          border-style: solid
                          border-color: var(--gray400)
                    - icon: mdi:chevron-down
                      ripple: none
                      name: false
                      tap_action:
                        action: call-service
                        service: input_number.decrement
                        target:
                          entity_id:
                            - input_number.Anna_heater_target
                        data:
                          amount: 1
                      styles:
                        icon:
                          color: var(--gray1000)
                        button:
                          background: var(--gray200)
                          border-radius: 0 0 40px 40px
                          width: 46px
                          height: 30px
                          z-index: 1
                          border-width: 0 1px 1px 1px
                          border-style: solid
                          border-color: var(--gray400)
            styles:
              card:
                - padding: 4px
                - overflow: visible
                - margin-top: 12px
                - background: var(--gray200)
                - height: 160px
              grid:
                - grid-template-areas: '"n n btn1" "l l btn1" "temp temp btn1"'
                - grid-template-rows: min-content min-content 1fr
                - grid-template-columns: 1fr min-content min-content
              icon:
                - width: 28px
                - color: var(--black)
              img_cell:
                - justify-self: end
                - background: var(--green)
                - border-radius: 100%
                - align-self: start
                - width: 60px
                - height: 60px
              name:
                - justify-self: start
                - text-align: left
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding: 14px 0 0 20px
              custom_fields:
                btn1:
                  - align-self: end
                  - justify-self: end
                temp:
                  - justify-self: start
                  - align-self: end
                  - font-size: 2em
                  - font-weight: 300
                  - color: var(--gray1000)
                  - line-height: 1.5em
                  - padding: 0 0 4px 20px
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#Tina'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Tina
                icon: mdi:bed
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--pink)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-prose-card
            content_style:
              font-size: 1.4em
              line-height: 2em
              padding: 12px 0 12px 0
            card_style:
              background: none
            content: >
              Det er {{button:temperature}}, med luftfuktighet p√•
              {{button:hum}}.
            buttons:
              - id: temperature
                entity: sensor.dashboard_Tina
                attribute: temp
                unit: ¬∞
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
              - id: hum
                entity: sensor.dashboard_Tina
                attribute: hum
                unit: '%'
                style:
                  background: var(--gray1000)
                  color: var(--gray100)
                  cursor: context-menu
                tap_action:
                  action: none
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.Tina_light_ceiling
                  - name: Taklys
                  - icon: '[[[ return entity.attributes.icon ]]]'
                  - background: var(--gray100)
          - type: custom:button-card
            name: Panelovn
            show_icon: false
            show_label: false
            custom_fields:
              temp: |
                [[[ 
                  var temp = states['sensor.Tina_sensor_temphum_temperature'].state;
                  var hum = states['sensor.Tina_sensor_temphum_humidity'].state;
                  return `
                  ${parseFloat(temp).toFixed(0)}¬∞<span style="font-size:14px;line-height:1.5em;font-weight:400;opacity:0.7;margin-left:2px;">${parseFloat(hum).toFixed(0)}%</span>
                  `
                ]]]  
              btn1:
                card:
                  type: custom:paper-buttons-row
                  styles:
                    display: flex
                    flex-direction: column
                    flex-wrap: wrap
                  buttons:
                    - icon: mdi:chevron-up
                      ripple: none
                      name: false
                      tap_action:
                        action: call-service
                        service: input_number.increment
                        target:
                          entity_id:
                            - input_number.Tina_heater_target
                        data:
                          amount: 1
                      styles:
                        icon:
                          color: var(--gray1000)
                        button:
                          background: var(--gray200)
                          border-radius: 40px 40px 0 0
                          width: 46px
                          height: 30px
                          z-index: 1
                          border-width: 1px 1px 0 1px
                          border-style: solid
                          border-color: var(--gray400)
                    - name: >-
                        {{ states('input_number.Tina_heater_target') | round(0)
                        }}¬∞
                      ripple: none
                      icon: false
                      styles:
                        name:
                          color: var(--gray1000)
                        button:
                          background: var(--gray200)
                          border-radius: 0
                          width: 46px
                          height: 52px
                          z-index: 1
                          border-width: 0 1px 0 1px
                          border-style: solid
                          border-color: var(--gray400)
                    - icon: mdi:chevron-down
                      ripple: none
                      name: false
                      tap_action:
                        action: call-service
                        service: input_number.decrement
                        target:
                          entity_id:
                            - input_number.Tina_heater_target
                        data:
                          amount: 1
                      styles:
                        icon:
                          color: var(--gray1000)
                        button:
                          background: var(--gray200)
                          border-radius: 0 0 40px 40px
                          width: 46px
                          height: 30px
                          z-index: 1
                          border-width: 0 1px 1px 1px
                          border-style: solid
                          border-color: var(--gray400)
            styles:
              card:
                - padding: 4px
                - overflow: visible
                - margin-top: 12px
                - background: var(--gray200)
                - height: 160px
              grid:
                - grid-template-areas: '"n n btn1" "l l btn1" "temp temp btn1"'
                - grid-template-rows: min-content min-content 1fr
                - grid-template-columns: 1fr min-content min-content
              icon:
                - width: 28px
                - color: var(--black)
              img_cell:
                - justify-self: end
                - background: var(--green)
                - border-radius: 100%
                - align-self: start
                - width: 60px
                - height: 60px
              name:
                - justify-self: start
                - text-align: left
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding: 14px 0 0 20px
              custom_fields:
                btn1:
                  - align-self: end
                  - justify-self: end
                temp:
                  - justify-self: start
                  - align-self: end
                  - font-size: 2em
                  - font-weight: 300
                  - color: var(--gray1000)
                  - line-height: 1.5em
                  - padding: 0 0 4px 20px
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Inngangsd√∏r
            icon: mdi:lock
            state: null
            hash: '#lock'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Inngangsd√∏r
                icon: mdi:lock
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:mysmart-draggable-toggle
            entity: lock.hallway_door_lock
            icon_on: mdi:lock-open-variant-outline
            icon_off: mdi:lock-outline
            color_bg: var(--gray200)
            color_active: var(--active-big)
            color_icon: var(--gray1000)
            color_icon_active: var(--gray100)
            size: large
          - type: custom:button-card
            entity: lock.hallway_door_lock
            show_icon: false
            show_label: true
            name: L√•st
            label: >
              [[[

              const getRelativeTime = (timestamp) => {
                  const now = new Date();
                  const past = new Date(timestamp);
                  const diff = now - past;
                  
                  const minutes = Math.floor(diff / 60000);
                  const hours = Math.floor(minutes / 60);
                  const days = Math.floor(hours / 24);
                  
                  if (days > 0) return `${days} ${days === 1 ? 'dag' : 'dager'} siden`;
                  if (hours > 0) return `${hours} ${hours === 1 ? 'time' : 'timer'} siden`;
                  if (minutes > 0) return `${minutes} ${minutes === 1 ? 'minutt' : 'minutter'} siden`;
                  return 'N√•';
              }


              return
              getRelativeTime(states['sensor.hallway_door_lock_battery'].last_changed)
              + ' ¬∑ ' + states['sensor.hallway_door_lock_battery'].state + '%
              batteri'

              ]]]
            state:
              - value: unlocked
                name: Ul√•st
            styles:
              card:
                - background: none
                - padding: 0
              name:
                - font-weight: 500
                - font-size: 20px
              label:
                - font-size: 14px
                - opacity: 0.7
                - line-height: 20px
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 10px 1fr 100px
              grid-template-rows: 26px 40px
              grid-template-areas: |
                "lenone lenone lenone"
                ". lentwo lenthree"
            cards:
              - type: custom:button-card
                view_layout:
                  grid-area: lenone
                name: 'Automatisk l√•s etter:'
                show_icon: false
                styles:
                  card:
                    - background: none
                    - padding: 6px 0 18px 0px
                    - overflow: visible
                  name:
                    - justify-self: start
                    - font-size: 14px
                    - font-weight: 500
              - type: custom:my-slider-v2
                view_layout:
                  grid-area: lentwo
                entity: input_number.lock_autolock
                step: 1
                allowTapping: true
                allowSliding: true
                intermediate: false
                styles:
                  container:
                    - overflow: visible
                    - margin-top: 16px
                  card:
                    - height: 8px
                    - background: '#494949'
                  progress:
                    - background: >-
                        linear-gradient(145deg, rgba(255,200,138,1) 0%,
                        rgba(238,149,255,1) 100%)
                    - border-radius: 4px
                  track:
                    - background: none
                  thumb:
                    - width: 18px
                    - height: 18px
                    - background: white
                    - border-radius: 50%
                    - top: '-5px'
              - type: custom:button-card
                view_layout:
                  grid-area: lenthree
                entity: input_number.lock_autolock
                name: >-
                  [[[ return entity.state == 0 ? '√òyeblikkelig' :
                  Math.floor(entity.state) + ' min' ]]]
                show_icon: false
                styles:
                  card:
                    - background: none
                    - padding: 12px 0
                    - overflow: visible
                  name:
                    - justify-self: end
                    - font-size: 14px
                    - font-weight: 500
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Middag
            icon: mdi:food-variant
            state: null
            hash: '#middag'
            is_sidebar_hidden: true
            styles: >-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }

              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }


              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--gray200)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray1000)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            bg_color: var(--gray200)
          - type: vertical-stack
            cards:
              - type: custom:paper-buttons-row
                styles:
                  justify-content: flex-end
                  background: none
                buttons:
                  - layout: icon|name
                    icon: mdi:auto-fix
                    name: Ny plan
                    ripple: none
                    tap_action:
                      action: call-service
                      service: automation.trigger
                      data: {}
                      target:
                        entity_id: automation.weekly_dinner_planner
                    styles:
                      icon:
                        color: var(--gray400)
                      name:
                        padding: 0 6px 0 6px
                        color: var(--gray400)
                      button:
                        margin-right: 6px
                        flex-basis: 1
                        flex-shrink: 0
                        display: flex
                        background: none
                        border-radius: 24px
                        border: 1px solid var(--gray400)
                  - layout: icon|name
                    icon: mdi:pencil
                    name: Legg til
                    ripple: none
                    tap_action:
                      action: call-service
                      service: automation.trigger
                      data: {}
                      target:
                        entity_id: automation.weekly_dinner_planner
                    styles:
                      icon:
                        color: var(--gray400)
                      name:
                        padding: 0 6px 0 6px
                        color: var(--gray400)
                      button:
                        margin-right: 6px
                        flex-basis: 1
                        flex-shrink: 0
                        display: flex
                        background: none
                        border-radius: 24px
                        border: 1px solid var(--gray400)
              - type: custom:button-card
                entity: input_text.dinner_monday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: monday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'monday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '0'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '0' ? 'I dag' : 'Man'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: monday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: monday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:button-card
                entity: input_text.dinner_tuesday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: tuesday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'tuesday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '1'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '1' ? 'I dag' : 'Tir'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: tuesday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: tuesday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:button-card
                entity: input_text.dinner_wednesday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: wednesday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'wednesday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '2'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '2' ? 'I dag' : 'Ons'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: wednesday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: wednesday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:button-card
                entity: input_text.dinner_thursday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: thursday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'thursday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '3'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '3' ? 'I dag' : 'Tor'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: thursday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: thursday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:button-card
                entity: input_text.dinner_friday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: friday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'friday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '4'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '4' ? 'I dag' : 'Fre'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: friday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: friday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:button-card
                entity: input_text.dinner_saturday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: saturday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'saturday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '5'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '5' ? 'I dag' : 'L√∏r'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: saturday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: saturday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:button-card
                entity: input_text.dinner_sunday
                show_icon: false
                show_name: false
                tap_action:
                  action: call-service
                  service: script.dinner_toggle_day_selection
                  service_data:
                    day: sunday
                state:
                  - operator: template
                    value: |
                      [[[
                        return states['input_select.dinner_replacement_day'].state == 'sunday'
                      ]]]
                    styles:
                      card:
                        - background: var(--blue)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                  - operator: template
                    value: |
                      [[[
                        return states['sensor.ukedagag'].state == '6'
                      ]]]
                    styles:
                      card:
                        - background: var(--active-big)
                      custom_fields:
                        date:
                          - color: var(--black)
                        event:
                          - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"date event btn"'
                    - grid-template-columns: 60px 1fr min-content
                  card:
                    - padding: 10px 10px 10px 20px
                    - margin-top: 12px
                    - background: var(--gray200)
                    - margin-bottom: 36px
                  custom_fields:
                    date:
                      - justify-self: start
                      - font-size: 1.6em
                      - text-transform: uppercase
                      - padding-right: 20px
                      - text-align: left
                    event:
                      - justify-self: start
                      - padding-left: 20px
                      - text-align: left
                      - width: calc(100% - 20px)
                      - text-overflow: ellipsis
                custom_fields:
                  date: |
                    [[[
                      return states['sensor.ukedagag'].state == '6' ? 'I dag' : 'S√∏n'
                    ]]]
                  event: |
                    [[[
                      return entity.state
                    ]]]
                  btn:
                    card:
                      type: custom:paper-buttons-row
                      styles:
                        justify-content: flex-start
                        gap: 6px
                      buttons:
                        - layout: icon
                          icon: mdi:arrow-up
                          tap_action:
                            action: call-service
                            service: script.dinner_move_up
                            service_data:
                              day_of_week: sunday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
                        - layout: icon
                          icon: mdi:arrow-down
                          tap_action:
                            action: call-service
                            service: script.dinner_move_down
                            service_data:
                              day_of_week: sunday
                          styles:
                            button:
                              flex-basis: 1
                              flex-shrink: 0
                              background-color: rgba(0,0,0, 0.1)
                              height: 34px
                              width: 34px
                              border-radius: 50%
                              border: 1px solid rgba(255,255,255, 0.1)
                            icon:
                              color: var(--gray1000)
              - type: custom:expander-card
                child-margin-top: 0px
                padding: 6px 0
                title-card-button-overlay: false
                title-card-clickable: true
                expander-card-background: var(--gray200)
                button-background: none
                expander-card-background-expanded: var(--gray200)
                header-color: var(--gray1000)
                child-padding: 12px
                expanded: false
                title-card:
                  type: custom:button-card
                  name: Rediger middagsplan
                  icon: mdi:pencil
                  styles:
                    grid:
                      - grid-template-areas: '"i n"'
                      - grid-template-columns: min-content 1fr
                    icon:
                      - width: 22px
                      - padding-right: 12px
                      - padding-left: 12px
                      - color: var(--gray1000)
                    card:
                      - background: none
                      - padding: 12px 6px
                      - overflow: visible
                      - '--mdc-ripple-press-opacity': 0
                    name:
                      - color: var(--gray1000)
                      - font-size: 16px
                      - font-weight: 500
                      - justify-self: start
                      - align-self: center
                cards:
                  - type: custom:auto-entities
                    card:
                      type: grid
                      square: false
                    card_param: cards
                    sort:
                      method: none
                    filter:
                      template: |
                        [
                          {% for dinner in state_attr('sensor.ukens_middager', 'middager') %}
                            {
                              "type": "custom:button-card",
                              "name": "{{ dinner.summary }}",
                              "layout": "name",
                              "tap_action": {
                                "action": "call-service",
                                "service": "script.dinner_replace_with_new_meal",
                                "data": {
                                  "new_dinner": "{{ dinner.summary }}"
                                }
                              },
                              "styles": {
                                "card": [
                                  { "background-color": "var(--gray100)" },
                                  { "border-radius": "24px" },
                                  { "padding": "10px 20px" }
                                ],
                                "name": [
                                  { "color": "var(--gray1000)" },
                                  { "justify-self": "start" },
                                  { "font-size": "12px" },
                                  { "text-wrap": "nowrap" }
                                ]
                              }
                            }{% if not loop.last %},{% endif %}
                          {% endfor %}
                        ]
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Innstillinger
            icon: mdi:cog
            state: null
            hash: '#settings'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Innstillinger
                icon: mdi:cog
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                template: template_toggle_card
                tap_action:
                  action: toggle
                variables:
                  main_text: Feriemodus
                  icon: mdi:airplane-takeoff
                  entity: input_boolean.feriemodus
              - type: custom:button-card
                template: template_toggle_card
                tap_action:
                  action: toggle
                variables:
                  main_text: Gjestemodus
                  icon: mdi:account-supervisor
                  entity: input_boolean.gjestemodus
            columns: 2
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Automasjoner
                card:
                  type: custom:auto-entities
                  card:
                    type: grid
                    columns: 1
                    square: false
                  card_param: cards
                  filter:
                    include:
                      - domain: input_boolean
                        entity_id: input_boolean.automation*
                        options:
                          type: custom:button-card
                          template: template_toggle_card_small
                          variables:
                            icon: null
                            entity: this.entity_id
                            background: var(--gray200)
                            state_off: Av
                            state_on: P√•
                    exclude: []
                  sort:
                    method: domain
                    reverse: false
              - title: Push varsler
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: user
                          users:
                            - ed472ae9f2ad4aa9a7d7e6864cd838b2
                      card:
                        type: custom:button-card
                        template: template_toggle_card
                        tap_action:
                          action: toggle
                        variables:
                          main_text: Push varsler
                          icon: mdi:cellphone-text
                          entity: input_boolean.tlf_Ted_ikke_forstyrr
                    - type: conditional
                      conditions:
                        - condition: user
                          users:
                            - 9f7239064e9a433cba9661df0f0a602b
                      card:
                        type: custom:button-card
                        template: template_toggle_card
                        tap_action:
                          action: toggle
                        variables:
                          main_text: Push varsler
                          icon: mdi:cellphone-text
                          entity: input_boolean.tlf_Sarah_ikke_forstyrr
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Gj√∏rem√•l
            icon: mdi:hammer-screwdriver
            state: null
            hash: '#todo'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Gj√∏rem√•l
                icon: mdi:hammer-screwdriver
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: none
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            tabs:
              - title: Store oppgaver
                card:
                  type: custom:todo-list-card
                  title: ''
                  entity: todo.gjoremal
                  mode: tasks
                  show_priority: true
                  card_color: var(--gray100)
                  card_background: var(--gray200)
                  icon_background: rgba(250, 251, 252, 0.1)
                  show_clear_button: false
                  show_search_button: true
                  show_filter_menu: true
              - title: Sm√• oppgaver
                card:
                  type: custom:todo-list-card
                  title: ''
                  entity: todo.sma_oppgaver
                  mode: tasks
                  show_priority: false
                  card_color: var(--gray100)
                  card_background: var(--gray200)
                  icon_background: rgba(250, 251, 252, 0.1)
                  show_clear_button: false
                  show_search_button: true
                  show_filter_menu: true
              - title: Personlig
                icon: ''
                card:
                  type: vertical-stack
                  cards:
                    - square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - ed472ae9f2ad4aa9a7d7e6864cd838b2
                          card:
                            type: custom:todo-list-card
                            title: ''
                            entity: todo.personlig_Ted
                            mode: tasks
                            show_priority: true
                            card_color: var(--gray100)
                            card_background: var(--gray200)
                            icon_background: rgba(250, 251, 252, 0.1)
                            show_clear_button: false
                            show_search_button: true
                            show_filter_menu: true
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - 9f7239064e9a433cba9661df0f0a602b
                          card:
                            type: custom:todo-list-card
                            title: ''
                            entity: todo.personlig_Sarah
                            mode: tasks
                            show_priority: true
                            card_color: var(--gray100)
                            card_background: var(--gray200)
                            icon_background: rgba(250, 251, 252, 0.1)
                            show_clear_button: false
                            show_search_button: true
                            show_filter_menu: true
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Lys
            icon: mdi:lightbulb-group-outline
            state: null
            hash: '#message'
            is_sidebar_hidden: true
            styles: |-
              .editor .bubble-pop-up-background {
                background-color: var(--gray100)!important
              }
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } 
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 30px
            margin_top_desktop: 30px
            card_layout: large
            show_header: false
          - type: custom:paper-buttons-row
            styles:
              display: flex
              flex-direction: row
              background: none
              width: calc(100% + 16px);
              margin: '-12px 0 0 -8px'
            buttons:
              - name: Meldinger
                icon: mdi:message
                styles:
                  button:
                    width: 100%
                    justify-content: start
                    cursor: context-menu
                  name:
                    color: var(--gray1000)
                    text-align: left
                    font-size: 2em
                    font-weight: 400
                    padding-left: 14px
                  icon:
                    color: var(--gray100)
                    '--mdc-icon-size': 24px;
                    background: var(--gray1000)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
              - icon: mdi:close
                ripple: none
                name: false
                tap_action:
                  action: navigate
                  navigation_path: '#'
                styles:
                  icon:
                    color: var(--gray1000)
                    '--mdc-icon-size': 24px;
                    background: var(--gray200)
                    padding: 12px
                    border-radius: 50%
                    justify-content: center;
                    align-items: center;
                    display: flex;
          - type: custom:simple-tabs
            alignment: center
            background-color: transparent
            border-color: var(--gray400)
            text-color: var(--gray400)
            active-text-color: var(--gray100)
            active-background: var(--active-small)
            container_padding: 0 0 12px 0
            tabs:
              - title: Speil
                card:
                  type: custom:mysmart-msg-card
                  entity: script.process_kids_message
                  title: Message Board
              - title: Tale
                card:
                  type: markdown
                  content: Midlertidig
          - type: conditional
            conditions:
              - condition: or
                conditions:
                  - condition: state
                    entity: input_text.magicmirror_message_title
                    state_not: ''
                  - condition: state
                    entity: input_text.magicmirror_message_message
                    state_not: ''
            card:
              type: custom:button-card
              name: >-
                [[[ return '<strong>' +
                states['input_text.magicmirror_message_title'].state +
                '</strong> ' +
                states['input_text.magicmirror_message_message'].state ]]]
              icon: mdi:message
              custom_fields:
                btn:
                  card:
                    type: custom:paper-buttons-row
                    styles:
                      justify-content: flex-start
                      gap: 6px
                      margin-right: 10px
                    buttons:
                      - layout: icon
                        icon: mdi:delete-empty
                        entity: script.delete_kids_message
                        tap_action:
                          action: toggle
                        styles:
                          button:
                            flex-basis: 1
                            flex-shrink: 0
                            background-color: rgba(250, 251, 252, 0.1)
                            height: 34px
                            width: 34px
                            border-radius: 50%
                            border: 1px solid rgba(250, 251, 252, 0.1)
                          icon:
                            color: var(--gray1000)
              styles:
                card:
                  - padding: 0
                  - background: var(--gray200)
                grid:
                  - grid-template-areas: '"i n btn"'
                  - grid-template-columns: 76px 1fr
                img_cell:
                  - justify-self: start
                  - background: rgba(250, 251, 252, 0.1)
                  - margin: 4px 4px
                  - border-radius: 50%
                  - width: 58px
                  - height: 58px
                icon:
                  - width: 30px
                  - height: 30px
                  - color: var(--gray1000)
                name:
                  - justify-self: start
                  - color: var(--gray1000)
          - type: custom:gap-card
            height: 36

